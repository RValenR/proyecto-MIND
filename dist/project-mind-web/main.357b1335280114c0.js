(self.webpackChunkproject_MIND_web=self.webpackChunkproject_MIND_web||[]).push([[179],{2011:(et,Ce,P)=>{"use strict";P.d(Ce,{hO:()=>Ue,xv:()=>ce,Dh:()=>ue,GT:()=>he,cc:()=>be,on:()=>B,pX:()=>X});var _=P(5e3),Y=P(127),O=P(5813);et=P.hmd(et);const fe=["ngOnDestroy"],X=(oe,Se,Re,ie={})=>new Proxy(oe,{get:(pe,ve)=>Re.runOutsideAngular(()=>{var je;if(oe[ve])return(null===(je=null==ie?void 0:ie.spy)||void 0===je?void 0:je.get)&&ie.spy.get(ve,oe[ve]),oe[ve];if(fe.indexOf(ve)>-1)return()=>{};const Be=Se.toPromise().then(ee=>{const W=ee&&ee[ve];return"function"==typeof W?W.bind(ee):W&&W.then?W.then(ne=>Re.run(()=>ne)):Re.run(()=>W)});return new Proxy(()=>{},{get:(ee,W)=>Be[W],apply:(ee,W,ne)=>Be.then(me=>{var se;const Ne=me&&me(...ne);return(null===(se=null==ie?void 0:ie.spy)||void 0===se?void 0:se.apply)&&ie.spy.apply(ve,ne,Ne),Ne})})})}),he=(oe,Se)=>{Se.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(ie=>{Object.defineProperty(oe.prototype,ie,Object.getOwnPropertyDescriptor(Re.prototype||Re,ie))})})};class re{constructor(Se){return Se}}const ue=new _.OlP("angularfire2.app.options"),ce=new _.OlP("angularfire2.app.name");function B(oe,Se,Re){const pe="object"==typeof Re&&Re||{};pe.name=pe.name||"string"==typeof Re&&Re||"[DEFAULT]";const je=Y.Z.apps.filter(Be=>Be&&Be.name===pe.name)[0]||Se.runOutsideAngular(()=>Y.Z.initializeApp(oe,pe));try{JSON.stringify(oe)!==JSON.stringify(je.options)&&U("error",`${je.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new re(je)}const U=(oe,...Se)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[oe](...Se)},Z={provide:re,useFactory:B,deps:[ue,_.R0b,[new _.FiY,ce]]};let Ue=(()=>{class oe{constructor(Re){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",_.q4F.full,Re.toString())}static initializeApp(Re,ie){return{ngModule:oe,providers:[{provide:ue,useValue:Re},{provide:ce,useValue:ie}]}}}return oe.\u0275fac=function(Re){return new(Re||oe)(_.LFG(_.Lbi))},oe.\u0275mod=_.oAB({type:oe}),oe.\u0275inj=_.cJS({providers:[Z]}),oe})();function be(oe,Se,Re,ie,pe){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===oe)||[];if(ve)return function Me(oe,Se){try{return oe.toString()===Se.toString()}catch(Re){return oe===Se}}(pe,je)||(q("error",`${Se} was already initialized on the ${Re} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),q("warn",{is:pe,was:je})),ve;{const Be=ie();return globalThis.\u0275AngularfireInstanceCache.push([oe,Be,pe]),Be}}const Fe=!!et.hot,q=(oe,...Se)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[oe](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(et,Ce,P)=>{"use strict";P.d(Ce,{q4:()=>go,iC:()=>$s,HU:()=>Du,vb:()=>ed,JM:()=>Iu});var _=P(5e3),Y=P(5867),O=P(5861),fe=P(9681),X=P(2090),he=P(4859),re=P(1877),ue=P(2940);const ce="@firebase/installations",B="0.5.5",Z=`w:${B}`,Ue="FIS_v2",Se=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Re(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function ie({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function pe(D){return{token:D.token,requestStatus:2,expiresIn:me(D.expiresIn),creationTime:Date.now()}}function ve(D,b){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Se.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ee(D,{refreshToken:b}){const x=Be(D);return x.append("Authorization",function se(D){return`${Ue} ${D}`}(b)),x}function W(D){return ne.apply(this,arguments)}function ne(){return(ne=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function me(D){return Number(D.replace("s","000"))}function Ne(D,b){return le.apply(this,arguments)}function le(){return(le=(0,O.Z)(function*(D,{fid:b}){const x=ie(D),te={method:"POST",headers:Be(D),body:JSON.stringify({fid:b,authVersion:Ue,appId:D.appId,sdkVersion:Z})},Ae=yield W(()=>fetch(x,te));if(Ae.ok){const Ee=yield Ae.json();return{fid:Ee.fid||b,registrationStatus:2,refreshToken:Ee.refreshToken,authToken:pe(Ee.authToken)}}throw yield ve("Create Installation",Ae)})).apply(this,arguments)}function ft(D){return new Promise(b=>{setTimeout(b,D)})}const In=/^[cdef][\w-]{21}$/;function it(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function Mn(D){return function Ft(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return In.test(x)?x:""}catch(D){return""}}function qt(D){return`${D.appName}!${D.appId}`}const rr=new Map;function jt(D,b){const x=qt(D);At(x,b),function Wi(D,b){const x=function Es(){return!Yn&&"BroadcastChannel"in self&&(Yn=new BroadcastChannel("[Firebase] FID Change"),Yn.onmessage=D=>{At(D.data.key,D.data.fid)}),Yn}();x&&x.postMessage({key:D,fid:b}),function gr(){0===rr.size&&Yn&&(Yn.close(),Yn=null)}()}(x,b)}function At(D,b){const x=rr.get(D);if(x)for(const F of x)F(b)}let Yn=null;const ei="firebase-installations-store";let xi=null;function at(){return xi||(xi=(0,ue.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(ei)})),xi}function Pr(D,b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(D,b){const x=qt(D),z=(yield at()).transaction(ei,"readwrite"),te=z.objectStore(ei),Ae=yield te.get(x);return yield te.put(b,x),yield z.complete,(!Ae||Ae.fid!==b.fid)&&jt(D,b.fid),b})).apply(this,arguments)}function pn(D){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(D){const b=qt(D),F=(yield at()).transaction(ei,"readwrite");yield F.objectStore(ei).delete(b),yield F.complete})).apply(this,arguments)}function lt(D,b){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(D,b){const x=qt(D),z=(yield at()).transaction(ei,"readwrite"),te=z.objectStore(ei),Ae=yield te.get(x),Ee=b(Ae);return void 0===Ee?yield te.delete(x):yield te.put(Ee,x),yield z.complete,Ee&&(!Ae||Ae.fid!==Ee.fid)&&jt(D,Ee.fid),Ee})).apply(this,arguments)}function bt(D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(D){let b;const x=yield lt(D,F=>{const z=ir(F),te=Tt(D,z);return b=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function ir(D){return sa(D||{fid:it(),registrationStatus:0})}function Tt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Se.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ye(D,b){return st.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:hi(D)}:{installationEntry:b}}function st(){return(st=(0,O.Z)(function*(D,b){try{return Pr(D,yield Ne(D,b))}catch(x){throw Re(x)&&409===x.customData.serverCode?yield pn(D):yield Pr(D,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function hi(D){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(D){let b=yield Nt(D);for(;1===b.registrationStatus;)yield ft(100),b=yield Nt(D);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield bt(D);return F||x}return b})).apply(this,arguments)}function Nt(D){return lt(D,b=>{if(!b)throw Se.create("installation-not-found");return sa(b)})}function sa(D){return function kr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ti(D,b){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:D,platformLoggerProvider:b},x){const F=j(D,x),z=ee(D,x),te=b.getImmediate({optional:!0});te&&z.append("x-firebase-client",te.getPlatformInfoString());const Ee={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Z}})},Ge=yield W(()=>fetch(F,Ee));if(Ge.ok)return pe(yield Ge.json());throw yield ve("Generate Auth Token",Ge)})).apply(this,arguments)}function j(D,{fid:b}){return`${ie(D)}/${b}/authTokens:generate`}function $(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(D,b=!1){let x;const F=yield lt(D.appConfig,te=>{if(!en(te))throw Se.create("not-registered");const Ae=te.authToken;if(!b&&Fr(Ae))return te;if(1===Ae.requestStatus)return x=J(D,b),te;{if(!navigator.onLine)throw Se.create("app-offline");const Ee=Nn(te);return x=zt(D,Ee),Ee}});return x?yield x:F.authToken})).apply(this,arguments)}function J(D,b){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(D,b){let x=yield ct(D.appConfig);for(;1===x.authToken.requestStatus;)yield ft(100),x=yield ct(D.appConfig);const F=x.authToken;return 0===F.requestStatus?$(D,b):F})).apply(this,arguments)}function ct(D){return lt(D,b=>{if(!en(b))throw Se.create("not-registered");return function mr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function zt(D,b){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(D,b){try{const x=yield ti(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Pr(D.appConfig,F),x}catch(x){if(!Re(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Pr(D.appConfig,F)}else yield pn(D.appConfig);throw x}})).apply(this,arguments)}function en(D){return void 0!==D&&2===D.registrationStatus}function Fr(D){return 2===D.requestStatus&&!function It(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function Nn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function oa(){return(oa=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield bt(b.appConfig);return F?F.catch(console.error):$(b).catch(console.error),x.fid})).apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D,b=!1){const x=D;return yield On(x.appConfig),(yield $(x,b)).token})).apply(this,arguments)}function On(D){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(D){const{registrationPromise:b}=yield bt(D);b&&(yield b)})).apply(this,arguments)}function Ao(D){return Se.create("missing-app-config-values",{valueName:D})}const Ur="installations",Et=D=>{const b=D.getProvider("app").getImmediate(),x=function Qn(D){if(!D||!D.options)throw Ao("App Configuration");if(!D.name)throw Ao("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Ao(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,platformLoggerProvider:(0,fe._getProvider)(b,"platform-logger"),_delete:()=>Promise.resolve()}},Wt=D=>{const b=D.getProvider("app").getImmediate(),x=(0,fe._getProvider)(b,Ur).getImmediate();return{getId:()=>function nu(D){return oa.apply(this,arguments)}(x),getToken:z=>function ru(D){return aa.apply(this,arguments)}(x,z)}};(function vr(){(0,fe._registerComponent)(new he.wA(Ur,Et,"PUBLIC")),(0,fe._registerComponent)(new he.wA("installations-internal",Wt,"PRIVATE"))})(),(0,fe.registerVersion)(ce,B),(0,fe.registerVersion)(ce,B,"esm2017");const Yi="@firebase/remote-config",on=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ol{constructor(b,x,F,z){this.client=b,this.storage=x,this.storageCache=F,this.logger=z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const te=yield x.client.fetch(b),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Ae),te})()}}function su(D=navigator){return D.languages&&D.languages[0]||D.language}class bn{constructor(b,x,F,z,te,Ae){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=z,this.apiKey=te,this.appId=Ae}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ee={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ge={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:x.appId,language_code:su()},St={method:"POST",headers:Ee,body:JSON.stringify(Ge)},xt=fetch(Ae,St),Sn=new Promise((Li,Dr)=>{b.signal.addEventListener(()=>{const _c=new Error("The operation was aborted.");_c.name="AbortError",Dr(_c)})});let Jn;try{yield Promise.race([xt,Sn]),Jn=yield xt}catch(Li){let Dr="fetch-client-network";throw"AbortError"===Li.name&&(Dr="fetch-timeout"),on.create(Dr,{originalErrorMessage:Li.message})}let vn=Jn.status;const Ra=Jn.headers.get("ETag")||void 0;let mi,Gr;if(200===Jn.status){let Li;try{Li=yield Jn.json()}catch(Dr){throw on.create("fetch-client-parse",{originalErrorMessage:Dr.message})}mi=Li.entries,Gr=Li.state}if("INSTANCE_STATE_UNSPECIFIED"===Gr?vn=500:"NO_CHANGE"===Gr?vn=304:("NO_TEMPLATE"===Gr||"EMPTY_CONFIG"===Gr)&&(mi={}),304!==vn&&200!==vn)throw on.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:Ra,config:mi}})()}}class Ji{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function Pl(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),te=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(te),F(on.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const te=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),te}catch(te){if(!function wp(D){if(!(D instanceof X.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(te))throw te;const Ae={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Ae),z.attemptFetch(b,Ae)}})()}}class Ip{constructor(b,x,F,z,te){this.app=b,this._client=x,this._storageCache=F,this._storage=z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ca(D,b){const x=D.target.error||void 0;return on.create(b,{originalErrorMessage:x&&x.message})}const No="app_namespace_store";class Fl{constructor(b,x,F,z=function bp(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(ca(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(No,{keyPath:"compositeKey"})}}catch(x){b(on.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,te)=>{const Ee=F.transaction([No],"readonly").objectStore(No),Ge=x.createCompositeKey(b);try{const St=Ee.get(Ge);St.onerror=xt=>{te(ca(xt,"storage-get"))},St.onsuccess=xt=>{const Sn=xt.target.result;z(Sn?Sn.value:void 0)}}catch(St){te(on.create("storage-get",{originalErrorMessage:St&&St.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((te,Ae)=>{const Ge=z.transaction([No],"readwrite").objectStore(No),St=F.createCompositeKey(b);try{const xt=Ge.put({compositeKey:St,value:x});xt.onerror=Sn=>{Ae(ca(Sn,"storage-set"))},xt.onsuccess=()=>{te()}}catch(xt){Ae(on.create("storage-set",{originalErrorMessage:xt&&xt.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,te)=>{const Ee=F.transaction([No],"readwrite").objectStore(No),Ge=x.createCompositeKey(b);try{const St=Ee.delete(Ge);St.onerror=xt=>{te(ca(xt,"storage-delete"))},St.onsuccess=()=>{z()}}catch(St){te(on.create("storage-delete",{originalErrorMessage:St&&St.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Oo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),te=yield x;te&&(b.lastFetchStatus=te);const Ae=yield F;Ae&&(b.lastSuccessfulFetchTimestampMillis=Ae);const Ee=yield z;Ee&&(b.activeConfig=Ee)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Bm(){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Tp(){(0,fe._registerComponent)(new he.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw on.create("registration-window");if(!(0,X.hl)())throw on.create("indexed-db-unavailable");const{projectId:te,apiKey:Ae,appId:Ee}=F.options;if(!te)throw on.create("registration-project-id");if(!Ae)throw on.create("registration-api-key");if(!Ee)throw on.create("registration-app-id");const Ge=new Fl(Ee,F.name,x=x||"firebase"),St=new Oo(Ge),xt=new re.Yd(Yi);xt.logLevel=re.in.ERROR;const Sn=new bn(z,fe.SDK_VERSION,x,te,Ae,Ee),Jn=new Ji(Sn,Ge),vn=new Ol(Jn,Ge,St,xt),Ra=new Ip(F,vn,St,Ge,xt);return function Ht(D){const b=(0,X.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Yi,"0.3.4"),(0,fe.registerVersion)(Yi,"0.3.4","esm2017")}();const Cs="/firebase-messaging-sw.js",ii="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ko="google.c.a.c_id",Ll="google.c.a.c_l",Cp="google.c.a.ts",As="google.c.a.e";var es=(()=>{return(D=es||(es={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",es;var D})();function si(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vl(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),z=new Uint8Array(F.length);for(let te=0;te<F.length;++te)z[te]=F.charCodeAt(te);return z}const sr="fcm_token_details_db",Bl="fcm_token_object_Store";function jl(D){return ou.apply(this,arguments)}function ou(){return ou=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(sr))return null;let b=null;return(yield(0,ue.openDb)(sr,5,function(){var F=(0,O.Z)(function*(z){var te;if(z.oldVersion<2||!z.objectStoreNames.contains(Bl))return;const Ae=z.transaction.objectStore(Bl),Ee=yield Ae.index("fcmSenderId").get(D);if(yield Ae.clear(),Ee)if(2===z.oldVersion){const Ge=Ee;if(!Ge.auth||!Ge.p256dh||!Ge.endpoint)return;b={token:Ge.fcmToken,createTime:null!==(te=Ge.createTime)&&void 0!==te?te:Date.now(),subscriptionOptions:{auth:Ge.auth,p256dh:Ge.p256dh,endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:"string"==typeof Ge.vapidKey?Ge.vapidKey:si(Ge.vapidKey)}}}else if(3===z.oldVersion){const Ge=Ee;b={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:si(Ge.auth),p256dh:si(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:si(Ge.vapidKey)}}}else if(4===z.oldVersion){const Ge=Ee;b={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:si(Ge.auth),p256dh:si(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:si(Ge.vapidKey)}}}});return function(z){return F.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(sr),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),au(b)?b:null}),ou.apply(this,arguments)}function au(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const ts="firebase-messaging-store";let nc=null;function Kt(){return nc||(nc=(0,ue.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(ts)})),nc}function da(D){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(D){const b=Hn(D),F=yield(yield Kt()).transaction(ts).objectStore(ts).get(b);if(F)return F;{const z=yield jl(D.appConfig.senderId);if(z)return yield Gt(D,z),z}})).apply(this,arguments)}function Gt(D,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D,b){const x=Hn(D),z=(yield Kt()).transaction(ts,"readwrite");return yield z.objectStore(ts).put(b,x),yield z.complete,b})).apply(this,arguments)}function ha(D){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(D){const b=Hn(D),F=(yield Kt()).transaction(ts,"readwrite");yield F.objectStore(ts).delete(b),yield F.complete})).apply(this,arguments)}function Hn({appConfig:D}){return D.appId}const an=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ns(D,b){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(D,b){const x=yield Ms(D),F=fa(b),z={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(xs(D.appConfig),z)).json()}catch(Ae){throw an.create("token-subscribe-failed",{errorInfo:Ae})}if(te.error)throw an.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw an.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Fo(D,b){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(D,b){const x=yield Ms(D),F=fa(b.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${xs(D.appConfig)}/${b.token}`,z)).json()}catch(Ae){throw an.create("token-update-failed",{errorInfo:Ae})}if(te.error)throw an.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw an.create("token-update-no-token");return te.token})).apply(this,arguments)}function rc(D,b){return Br.apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ms(D)};try{const te=yield(yield fetch(`${xs(D.appConfig)}/${b}`,F)).json();if(te.error)throw an.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(z){throw an.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function xs({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ms(D){return ot.apply(this,arguments)}function ot(){return(ot=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function fa({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const z={web:{endpoint:x,auth:b,p256dh:D}};return F!==no&&(z.web.applicationPubKey=F),z}const pa=6048e5;function $l(D){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(D){const b=yield un(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:si(b.getKey("auth")),p256dh:si(b.getKey("p256dh"))},F=yield da(D.firebaseDependencies);if(F){if(ya(F.subscriptionOptions,x))return Date.now()>=F.createTime+pa?Th(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield rc(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Ct(D.firebaseDependencies,x)}return Ct(D.firebaseDependencies,x)})).apply(this,arguments)}function ic(D){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(D){const b=yield da(D.firebaseDependencies);b&&(yield rc(D.firebaseDependencies,b.token),yield ha(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Th(D,b){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(D,b){try{const x=yield Fo(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Gt(D.firebaseDependencies,F),x}catch(x){throw yield ic(D),x}})).apply(this,arguments)}function Ct(D,b){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(D,b){const F={token:yield ns(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Gt(D,F),F.token})).apply(this,arguments)}function un(D,b){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vl(b)})})).apply(this,arguments)}function ya(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function _r(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function sc(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function oc(D,b){!b.data||(D.data=b.data)}(b,D),function Hl(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Gl(D){return"object"==typeof D&&!!D&&ko in D}function va(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function kn(D){return an.create("missing-app-config-values",{valueName:D})}va("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),va("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pi{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Lo(D){if(!D||!D.options)throw kn("App Configuration Object");if(!D.name)throw kn("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw kn(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ac(D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Cs,{scope:ii}),D.swRegistration.update().catch(()=>{})}catch(b){throw an.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function rs(D,b){return _a.apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ac(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function ql(D,b){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=no)})).apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D,b){if(!navigator)throw an.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw an.create("permission-blocked");return yield ql(D,null==b?void 0:b.vapidKey),yield rs(D,null==b?void 0:b.serviceWorkerRegistration),$l(D)})).apply(this,arguments)}function uc(D,b,x){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,O.Z)(function*(D,b,x){const F=cc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ko],message_name:x[Ll],message_time:x[Cp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cc(D){switch(D){case es.NOTIFICATION_CLICKED:return"notification_open";case es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hu(){return(hu=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===es.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(_r(x)):D.onMessageHandler.next(_r(x)));const F=x.data;Gl(F)&&"1"===F[As]&&(yield uc(D,x.messageType,F))})).apply(this,arguments)}const so="@firebase/messaging",oo=D=>{const b=new pi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ap(D,b){return hu.apply(this,arguments)}(b,x)),b},Wl=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function zl(D,b){return io.apply(this,arguments)}(b,F)}};function Uo(){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ch(){(0,fe._registerComponent)(new he.wA("messaging",oo,"PUBLIC")),(0,fe._registerComponent)(new he.wA("messaging-internal",Wl,"PRIVATE")),(0,fe.registerVersion)(so,"0.9.8"),(0,fe.registerVersion)(so,"0.9.8","esm2017")}();const Kl="analytics",dc="firebase_id",hc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fu="https://www.googletagmanager.com/gtag/js",zn=new re.Yd("@firebase/analytics");function xh(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function os(D,b){const x=document.createElement("script");x.src=`${fu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Sp(D,b,x,F,z,te){return Da.apply(this,arguments)}function Da(){return(Da=(0,O.Z)(function*(D,b,x,F,z,te){const Ae=F[z];try{if(Ae)yield b[Ae];else{const Ge=(yield xh(x)).find(St=>St.measurementId===z);Ge&&(yield b[Ge.appId])}}catch(Ee){zn.error(Ee)}D("config",z,te)})).apply(this,arguments)}function ba(D,b,x,F,z){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(D,b,x,F,z){try{let te=[];if(z&&z.send_to){let Ae=z.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Ee=yield xh(x);for(const Ge of Ae){const St=Ee.find(Sn=>Sn.measurementId===Ge),xt=St&&b[St.appId];if(!xt){te=[];break}te.push(xt)}}0===te.length&&(te=Object.values(b)),yield Promise.all(te),D("event",F,z||{})}catch(te){zn.error(te)}})).apply(this,arguments)}function as(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(fu))return b;return null}const Tn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Er=new class wr{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Zl(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function tn(D){return fc.apply(this,arguments)}function fc(){return(fc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,z={method:"GET",headers:Zl(F)},te=hc.replace("{app-id}",x),Ae=yield fetch(te,z);if(200!==Ae.status&&304!==Ae.status){let Ee="";try{const Ge=yield Ae.json();(null===(b=Ge.error)||void 0===b?void 0:b.message)&&(Ee=Ge.error.message)}catch(Ge){}throw Tn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Ee})}return Ae.json()})).apply(this,arguments)}function Ns(D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(D,b=Er,x){const{appId:F,apiKey:z,measurementId:te}=D.options;if(!F)throw Tn.create("no-app-id");if(!z){if(te)return{measurementId:te,appId:F};throw Tn.create("no-api-key")}const Ae=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ee=new Rh;return setTimeout((0,O.Z)(function*(){Ee.abort()}),void 0!==x?x:6e4),ao({appId:F,apiKey:z,measurementId:te},Ae,Ee,b)})).apply(this,arguments)}function ao(D,b,x){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,z=Er){const{appId:te,measurementId:Ae}=D;try{yield Dt(F,b)}catch(Ee){if(Ae)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Ee.message}]`),{appId:te,measurementId:Ae};throw Ee}try{const Ee=yield tn(D);return z.deleteThrottleMetadata(te),Ee}catch(Ee){if(!pc(Ee)){if(z.deleteThrottleMetadata(te),Ae)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Ee.message}]`),{appId:te,measurementId:Ae};throw Ee}const Ge=503===Number(Ee.customData.httpStatus)?(0,X.$s)(x,z.intervalMillis,30):(0,X.$s)(x,z.intervalMillis),St={throttleEndTimeMillis:Date.now()+Ge,backoffCount:x+1};return z.setThrottleMetadata(te,St),zn.debug(`Calling attemptFetch again in ${Ge} millis`),ao(D,St,F,z)}})).apply(this,arguments)}function Dt(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),te=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(te),F(Tn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function pc(D){if(!(D instanceof X.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Rh{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function gu(){return Os.apply(this,arguments)}function Os(){return(Os=(0,O.Z)(function*(){if(!(0,X.hl)())return zn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return zn.warn(Tn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ps(){return(Ps=(0,O.Z)(function*(D,b,x,F,z,te,Ae){var Ee;const Ge=Ns(D);Ge.then(vn=>{x[vn.measurementId]=vn.appId,D.options.measurementId&&vn.measurementId!==D.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>zn.error(vn)),b.push(Ge);const St=gu().then(vn=>{if(vn)return F.getId()}),[xt,Sn]=yield Promise.all([Ge,St]);as()||os(te,xt.measurementId),z("js",new Date);const Jn=null!==(Ee=null==Ae?void 0:Ae.config)&&void 0!==Ee?Ee:{};return Jn.origin="firebase",Jn.update=!0,null!=Sn&&(Jn[dc]=Sn),z("config",xt.measurementId,Jn),xt.measurementId})).apply(this,arguments)}class mu{constructor(b){this.app=b}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},yu=[];const uo={};let co,Fs,ks="dataLayer",gc=!1;function Yl(D,b,x){!function oi(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),x=Tn.create("invalid-analytics-context",{errorInfo:b});zn.warn(x.message)}}();const F=D.options.appId;if(!F)throw Tn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Tn.create("no-api-key");zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ir[F])throw Tn.create("already-exists",{id:F});if(!gc){!function Vo(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(ks);const{wrappedGtag:te,gtagCore:Ae}=function xp(D,b,x,F,z){let te=function(...Ae){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(te=window[z]),window[z]=function Mh(D,b,x,F){function te(){return(te=(0,O.Z)(function*(Ae,Ee,Ge){try{"event"===Ae?yield ba(D,b,x,Ee,Ge):"config"===Ae?yield Sp(D,b,x,F,Ee,Ge):D("set",Ee)}catch(St){zn.error(St)}})).apply(this,arguments)}return function z(Ae,Ee,Ge){return te.apply(this,arguments)}}(te,D,b,x),{gtagCore:te,wrappedGtag:window[z]}}(Ir,yu,uo,ks,"gtag");Fs=te,co=Ae,gc=!0}return Ir[F]=function Cn(D,b,x,F,z,te,Ae){return Ps.apply(this,arguments)}(D,yu,uo,b,co,ks,x),new mu(D)}function Aa(){return(Aa=(0,O.Z)(function*(D,b,x,F,z){if(z&&z.global)D("event",x,F);else{const te=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function Wn(){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const fo="@firebase/analytics";!function Rp(){(0,fe._registerComponent)(new he.wA(Kl,(b,{options:x})=>Yl(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,fe._registerComponent)(new he.wA("analytics-internal",function D(b){try{const x=b.getProvider(Kl).getImmediate();return{logEvent:(F,z,te)=>function Oh(D,b,x,F){D=(0,X.m9)(D),function lo(D,b,x,F,z){return Aa.apply(this,arguments)}(Fs,Ir[D.app.options.appId],b,x,F).catch(z=>zn.error(z))}(x,F,z,te)}}catch(x){throw Tn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,fe.registerVersion)(fo,"0.7.5"),(0,fe.registerVersion)(fo,"0.7.5","esm2017")}();var ar=P(4408),Yt=P(7565);const po=new class Eu extends Yt.v{}(class Ql extends ar.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var mc=P(4986),ur=P(8505),ai=P(9468),Jl=P(5363);const go=new _.GfV("7.2.1"),ui="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",Sa="__angularfire_symbol__remoteConfigIsSupportedValue",yc="__angularfire_symbol__remoteConfigIsSupported",Xl="__angularfire_symbol__messagingIsSupportedValue",vc="__angularfire_symbol__messagingIsSupported";function Iu(D,b,x){if(b){if(1===b.length)return b[0];const te=b.filter(Ae=>Ae.app===x);if(1===te.length)return te[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=Wn().then(D=>globalThis[ui]=D).catch(()=>globalThis[ui]=!1)),globalThis[vc]||(globalThis[vc]=Uo().then(D=>globalThis[Xl]=D).catch(()=>globalThis[Xl]=!1)),globalThis[yc]||(globalThis[yc]=Bm().then(D=>globalThis[Sa]=D).catch(()=>globalThis[Sa]=!1));const ed=(D,b)=>{const x=b?[b]:(0,Y.C6)(),F=[];return x.forEach(z=>{z.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function Vs(){}class td{constructor(b,x=po){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const z=this.zone;return this.delegate.schedule(function(Ae){z.runGuarded(()=>{b.apply(this,[Ae])})},x,F)}}class ci{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vs,{},Vs,Vs)),x.pipe((0,ur.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Du=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new td(Zone.current)),this.insideAngular=x.run(()=>new td(Zone.current,mc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(_.LFG(_.R0b))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Bs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function $s(D){return Bs(),function xa(D){return function(x){return(x=x.lift(new ci(D.ngZone))).pipe((0,ai.R)(D.outsideAngular),(0,Jl.Q)(D.insideAngular))}}(Bs())(D)}},2090:(et,Ce,P)=>{"use strict";P.d(Ce,{BH:()=>Ue,LL:()=>le,ZR:()=>Ne,zI:()=>ne,US:()=>he,tV:()=>ce,$s:()=>Nt,r3:()=>Ai,Sg:()=>be,ne:()=>xi,vZ:()=>Yn,ZB:()=>U,pd:()=>Is,m9:()=>ti,z$:()=>Me,jU:()=>oe,ru:()=>Se,d:()=>ie,xb:()=>At,w1:()=>pe,hl:()=>ee,uI:()=>Fe,UG:()=>q,b$:()=>Re,G6:()=>Be,Mn:()=>ve,xO:()=>gr,zd:()=>Si,eu:()=>W});const fe=function(L){const j=[];let $=0;for(let Ie=0;Ie<L.length;Ie++){let J=L.charCodeAt(Ie);J<128?j[$++]=J:J<2048?(j[$++]=J>>6|192,j[$++]=63&J|128):55296==(64512&J)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?(J=65536+((1023&J)<<10)+(1023&L.charCodeAt(++Ie)),j[$++]=J>>18|240,j[$++]=J>>12&63|128,j[$++]=J>>6&63|128,j[$++]=63&J|128):(j[$++]=J>>12|224,j[$++]=J>>6&63|128,j[$++]=63&J|128)}return j},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,j){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let J=0;J<L.length;J+=3){const qe=L[J],ct=J+1<L.length,zt=ct?L[J+1]:0,Zt=J+2<L.length,en=Zt?L[J+2]:0;let Nn=(15&zt)<<2|en>>6,mr=63&en;Zt||(mr=64,ct||(Nn=64)),Ie.push($[qe>>2],$[(3&qe)<<4|zt>>4],$[Nn],$[mr])}return Ie.join("")},encodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(L):this.encodeByteArray(fe(L),j)},decodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(L):function(L){const j=[];let $=0,Ie=0;for(;$<L.length;){const J=L[$++];if(J<128)j[Ie++]=String.fromCharCode(J);else if(J>191&&J<224){const qe=L[$++];j[Ie++]=String.fromCharCode((31&J)<<6|63&qe)}else if(J>239&&J<365){const Zt=((7&J)<<18|(63&L[$++])<<12|(63&L[$++])<<6|63&L[$++])-65536;j[Ie++]=String.fromCharCode(55296+(Zt>>10)),j[Ie++]=String.fromCharCode(56320+(1023&Zt))}else{const qe=L[$++],ct=L[$++];j[Ie++]=String.fromCharCode((15&J)<<12|(63&qe)<<6|63&ct)}}return j.join("")}(this.decodeStringToByteArray(L,j))},decodeStringToByteArray(L,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let J=0;J<L.length;){const qe=$[L.charAt(J++)],zt=J<L.length?$[L.charAt(J)]:0;++J;const en=J<L.length?$[L.charAt(J)]:64;++J;const It=J<L.length?$[L.charAt(J)]:64;if(++J,null==qe||null==zt||null==en||null==It)throw Error();Ie.push(qe<<2|zt>>4),64!==en&&(Ie.push(zt<<4&240|en>>2),64!==It&&Ie.push(en<<6&192|It))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ue=function(L){return function(L){const j=fe(L);return he.encodeByteArray(j,!0)}(L).replace(/\./g,"")},ce=function(L){try{return he.decodeString(L,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function U(L,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!Z($)||(L[$]=U(L[$],j[$]));return L}function Z(L){return"__proto__"!==L}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,Ie)=>{$?this.reject($):this.resolve(Ie),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,Ie))}}}function be(L,j){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=j||"demo-project",J=L.iat||0,qe=L.sub||L.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:J,exp:J+3600,auth_time:J,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ct)),""].join(".")}function Me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function oe(){return"object"==typeof self&&self.self===self}function Se(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ie(){return Me().indexOf("Electron/")>=0}function pe(){const L=Me();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function ve(){return Me().indexOf("MSAppHost/")>=0}function Be(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function W(){return new Promise((L,j)=>{try{let $=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(Ie);J.onsuccess=()=>{J.result.close(),$||self.indexedDB.deleteDatabase(Ie),L(!0)},J.onupgradeneeded=()=>{$=!1},J.onerror=()=>{var qe;j((null===(qe=J.error)||void 0===qe?void 0:qe.message)||"")}}catch($){j($)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(j,$,Ie){super($),this.code=j,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(j,$,Ie){this.service=j,this.serviceName=$,this.errors=Ie}create(j,...$){const Ie=$[0]||{},J=`${this.service}/${j}`,qe=this.errors[j],ct=qe?function ft(L,j){return L.replace(Ft,($,Ie)=>{const J=j[Ie];return null!=J?String(J):`<${Ie}?>`})}(qe,Ie):"Error";return new Ne(J,`${this.serviceName}: ${ct} (${J}).`,Ie)}}const Ft=/\{\$([^}]+)}/g;function Ai(L,j){return Object.prototype.hasOwnProperty.call(L,j)}function At(L){for(const j in L)if(Object.prototype.hasOwnProperty.call(L,j))return!1;return!0}function Yn(L,j){if(L===j)return!0;const $=Object.keys(L),Ie=Object.keys(j);for(const J of $){if(!Ie.includes(J))return!1;const qe=L[J],ct=j[J];if(Es(qe)&&Es(ct)){if(!Yn(qe,ct))return!1}else if(qe!==ct)return!1}for(const J of Ie)if(!$.includes(J))return!1;return!0}function Es(L){return null!==L&&"object"==typeof L}function gr(L){const j=[];for(const[$,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach(J=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(J))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(Ie));return j.length?"&"+j.join("&"):""}function Si(L){const j={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[J,qe]=Ie.split("=");j[decodeURIComponent(J)]=decodeURIComponent(qe)}}),j}function Is(L){const j=L.indexOf("?");if(!j)return"";const $=L.indexOf("#",j);return L.substring(j,$>0?$:void 0)}function xi(L,j){const $=new at(L,j);return $.subscribe.bind($)}class at{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(Ie=>{this.error(Ie)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,Ie){let J;if(void 0===j&&void 0===$&&void 0===Ie)throw new Error("Missing Observer.");J=function Rn(L,j){if("object"!=typeof L||null===L)return!1;for(const $ of j)if($ in L&&"function"==typeof L[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:Ie},void 0===J.next&&(J.next=pn),void 0===J.error&&(J.error=pn),void 0===J.complete&&(J.complete=pn);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(ct){}}),this.observers.push(J),qe}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}function Nt(L,j=1e3,$=2){const Ie=j*Math.pow($,L),J=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+J)}function ti(L){return L&&L._delegate?L._delegate:L}},7003:(et,Ce,P)=>{"use strict";var _=P(5e3);let Y=null;function O(){return Y}const re=new _.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ce(){return(0,_.LFG)(U)}()},providedIn:"platform"}),n})();const B=new _.OlP("Location Initialized");let U=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(re))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ue(){return new U((0,_.LFG)(re))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function oe(n){const e=(0,_.LFG)(re).location;return new Re((0,_.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Se=new _.OlP("appBaseHref");let Re=(()=>{class n extends q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const h=this.prepareExternalUrl(o+Fe(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){const h=this.prepareExternalUrl(o+Fe(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Se,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),ie=(()=>{class n extends q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let h=this.prepareExternalUrl(o+Fe(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){let h=this.prepareExternalUrl(o+Fe(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Se,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),pe=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(Be(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=be,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(_.LFG(q),_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ve(){return new pe((0,_.LFG)(q),(0,_.LFG)(ue))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Ro{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,c,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ro(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===c?void 0:c);else if(null!==c){const g=r.get(c);r.move(g,h),bs(g,o)}});for(let o=0,c=r.length;o<c;o++){const g=r.get(o).context;g.index=o,g.count=c,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{bs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function bs(n,e){n.context.$implicit=e.item}class Pl{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class wp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Ji=new wp,Ep=new Pl;let ec=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,_.QGY)(t))return Ji;if((0,_.F4k)(t))return Ep;throw function bn(n,e){return new _.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.sBO,16))},n.\u0275pipe=_.Yjl({name:"async",type:n,pure:!1}),n})(),As=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function or(n){return"server"===n}let au=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new uu((0,_.LFG)(re),window)}),n})();class uu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ts(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tc(this.window.history)||tc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function tc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ss extends class da extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new Ss)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return Gt=Gt||document.querySelector("base"),Gt?Gt.getAttribute("href"):null}();return null==t?null:function ro(n){ha=ha||document.createElement("a"),ha.setAttribute("href",n);const e=ha.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function So(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let ha,Gt=null;const Hn=new _.OlP("TRANSITION_ID"),an=[{provide:_.ip1,useFactory:function lu(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[Hn,re,_.zs3],multi:!0}];class ns{static init(){(0,_.VLi)(new ns)}addToWindow(e){_.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const o=_.dqk.getAllAngularTestabilities();let c=o.length,h=!1;const g=function(E){h=h||E,c--,0==c&&r(h)};o.forEach(function(E){E.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Gn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=new _.OlP("EventManagerPlugins");let Mi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const h=o[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Fo),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class rc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Br=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),xs=(()=>{class n extends Br{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ms),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ms))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(re))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Ms(n){O().remove(n)}const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fa=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?De(n,o,t):(o=o.replace(fa,n),t.push(o))}return t}function Ct(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let un=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Rs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new sc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case _.ifc.ShadowDom:return new oc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Mi),_.LFG(xs),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Rs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ot[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=ot[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ot[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,o&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ct(r)):this.eventManager.addEventListener(e,t,Ct(r))}}class sc extends Rs{constructor(e,t,r,o){super(e),this.component=r;const c=De(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function ma(n){return"_ngcontent-%COMP%".replace(fa,n)}(o+"-"+r.id),this.hostAttr=function Th(n){return"_nghost-%COMP%".replace(fa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class oc extends Rs{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=De(o.id,o.styles,[]);for(let h=0;h<c.length;h++){const g=document.createElement("style");g.textContent=c[h],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Hl=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(re))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Gl=["alt","control","meta","shift"],Lo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ac=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let h="";if(Gl.forEach(E=>{const T=r.indexOf(E);T>-1&&(r.splice(T,1),h+=E+".")}),h+=c,0!=r.length||0===c.length)return null;const g={};return g.domEventName=o,g.fullKey=h,g}static getEventFullKey(t){let r="",o=function Ri(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&kn.hasOwnProperty(e)&&(e=kn[e]))}return Lo[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Gl.forEach(c=>{c!=o&&pi[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(re))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const zl=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function rs(){Ss.makeCurrent(),ns.init()},multi:!0},{provide:re,useFactory:function ql(){return(0,_.RDi)(document),document},deps:[]}]),io=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function _a(){return new _.qLn},deps:[]},{provide:Fo,useClass:Hl,multi:!0,deps:[re,_.R0b,_.Lbi]},{provide:Fo,useClass:ac,multi:!0,deps:[re]},{provide:un,useClass:un,deps:[Mi,xs,_.AFp]},{provide:_.FYo,useExisting:un},{provide:Br,useExisting:xs},{provide:xs,useClass:xs,deps:[re]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Mi,useClass:Mi,deps:[Fo,_.R0b]},{provide:class Kt{},useClass:Gn,deps:[]}];let uc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Hn,useExisting:_.AFp},an]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:io,imports:[As,_.hGG]}),n})();"undefined"!=typeof window&&window;var as=P(2011),nn=P(8996),Tn=P(7669);function nt(...n){const e=(0,Tn.yG)(n);return(0,nn.D)(n,e)}var Oi=P(7579);class wr extends Oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Er=P(8306);const{isArray:Zl}=Array,{getPrototypeOf:tn,prototype:fc,keys:Ns}=Object;var Bo=P(4671),Dt=P(4004);const{isArray:pc}=Array;var Cn=P(5403),Ps=P(9672);function mu(...n){const e=(0,Tn.yG)(n),t=(0,Tn.jO)(n),{args:r,keys:o}=function Ta(n){if(1===n.length){const e=n[0];if(Zl(e))return{args:e,keys:null};if(function ao(n){return n&&"object"==typeof n&&tn(n)===fc}(e)){const t=Ns(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,nn.D)([],e);const c=new Er.y(function Ir(n,e,t=Bo.y){return r=>{yu(e,()=>{const{length:o}=n,c=new Array(o);let h=o,g=o;for(let E=0;E<o;E++)yu(e,()=>{const T=(0,nn.D)(n[E],e);let M=!1;T.subscribe((0,Cn.x)(r,N=>{c[E]=N,M||(M=!0,g--),g||r.next(t(c.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>function Os(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,h):Bo.y));return t?c.pipe(function gu(n){return(0,Dt.U)(e=>function Rh(n,e){return pc(e)?n(...e):n(e)}(n,e))}(t)):c}function yu(n,e,t){n?(0,Ps.f)(t,n,e):e()}var uo=P(576);function ks(n,e){const t=(0,uo.m)(n)?n:()=>n,r=o=>o.error(t());return new Er.y(e?o=>e.schedule(r,0,o):r)}const co=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fs=P(8189);function vu(...n){return function gc(){return(0,Fs.J)(1)}()((0,nn.D)(n,(0,Tn.yG)(n)))}var oi=P(8421);function Yl(n){return new Er.y(e=>{(0,oi.Xf)(n()).subscribe(e)})}var lo=P(515),Aa=P(727),mn=P(4482);function _u(){return(0,mn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,c=t;t=null,o&&(!c||o===c)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wu extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Aa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Aa.w0.EMPTY)}return e}refCount(){return _u()(this)}}function yn(n,e){return(0,mn.e)((t,r)=>{let o=null,c=0,h=!1;const g=()=>h&&!o&&r.complete();t.subscribe((0,Cn.x)(r,E=>{null==o||o.unsubscribe();let T=0;const M=c++;(0,oi.Xf)(n(E,M)).subscribe(o=(0,Cn.x)(r,N=>r.next(e?e(E,N,M,T++):N),()=>{o=null,g()}))},()=>{h=!0,g()}))})}var Ls=P(5698);function gi(...n){const e=(0,Tn.yG)(n);return(0,mn.e)((t,r)=>{(e?vu(n,t,e):vu(n,t)).subscribe(r)})}function us(n,e,t,r,o){return(c,h)=>{let g=t,E=e,T=0;c.subscribe((0,Cn.x)(h,M=>{const N=T++;E=g?n(E,M,N):(g=!0,M),r&&h.next(E)},o&&(()=>{g&&h.next(E),h.complete()})))}}function Us(n,e){return(0,mn.e)(us(n,e,arguments.length>=2,!0))}function Pi(n,e){return(0,mn.e)((t,r)=>{let o=0;t.subscribe((0,Cn.x)(r,c=>n.call(e,c,o++)&&r.next(c)))})}function jr(n){return(0,mn.e)((e,t)=>{let c,r=null,o=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,h=>{c=(0,oi.Xf)(n(h,jr(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,c.subscribe(t))})}var Wn=P(5577);function ho(n,e){return(0,uo.m)(e)?(0,Wn.z)(n,e,1):(0,Wn.z)(n,1)}function sn(n){return n<=0?()=>lo.E:(0,mn.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Nh(n=$m){return(0,mn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function $m(){return new co}function Mp(n){return(0,mn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function fo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,c)=>n(o,c,r)):Bo.y,(0,Ls.q)(1),t?Mp(e):Nh(()=>new co))}var $r=P(8505);class ar{constructor(e,t){this.id=e,this.url=t}}class Ql extends ar{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yt extends ar{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Eu extends ar{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class po extends ar{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hm extends ar{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mc extends ar{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ur extends ar{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ai extends ar{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jl extends ar{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ui{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const gt="primary";class Hr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function mo(n){return new Hr(n)}const jo="ngNavigationCancelingError";function Iu(n){const e=Error("NavigationCancelingError: "+n);return e[jo]=!0,e}function Vs(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const h=r[c],g=n[c];if(h.startsWith(":"))o[h.substring(1)]=g;else if(h!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ci(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!Du(n[o],e[o]))return!1;return!0}function Du(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function Bs(n){return Array.prototype.concat.apply([],n)}function $o(n){return n.length>0?n[n.length-1]:null}function An(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fi(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,nn.D)(Promise.resolve(n)):nt(n)}const xa={exact:function b(n,e,t){if(!xt(n.segments,e.segments)||!te(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:F},Ma={exact:function D(n,e){return ci(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Du(n[t],e[t]))},ignored:()=>!0};function nd(n,e,t){return xa[t.paths](n.root,e.root,t.matrixParams)&&Ma[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return z(n,e,e.segments,t)}function z(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!xt(o,t)||e.hasChildren()||!te(o,t,r))}if(n.segments.length===t.length){if(!xt(n.segments,t)||!te(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(xt(n.segments,o)&&te(n.segments,o,r)&&n.children[gt])&&z(n.children[gt],e,c,r)}}function te(n,e,t){return e.every((r,o)=>Ma[t](n[o].parameters,r.parameters))}class Ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mo(this.queryParams)),this._queryParamMap}toString(){return Ra.serialize(this)}}class Ee{constructor(e,t){this.segments=e,this.children=t,this.parent=null,An(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mi(this)}}class Ge{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=mo(this.parameters)),this._parameterMap}toString(){return Ph(this)}}function xt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Jn{}class vn{parse(e){const t=new m0(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gr(e.root,!0)}`,r=function qm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Dr(t)}=${Dr(o)}`).join("&"):`${Dr(t)}=${Dr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _c(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ra=new vn;function mi(n){return n.segments.map(e=>Ph(e)).join("/")}function Gr(n,e){if(!n.hasChildren())return mi(n);if(e){const t=n.children[gt]?Gr(n.children[gt],!1):"",r=[];return An(n.children,(o,c)=>{c!==gt&&r.push(`${c}:${Gr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Sn(n,e){let t=[];return An(n.children,(r,o)=>{o===gt&&(t=t.concat(e(r,o)))}),An(n.children,(r,o)=>{o!==gt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===gt?[Gr(n.children[gt],!1)]:[`${o}:${Gr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[gt]?`${mi(n)}/${t[0]}`:`${mi(n)}/(${t.join("//")})`}}function Li(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dr(n){return Li(n).replace(/%3B/gi,";")}function rd(n){return Li(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Na(n){return decodeURIComponent(n)}function Oa(n){return Na(n.replace(/\+/g,"%20"))}function Ph(n){return`${rd(n.path)}${function Gm(n){return Object.keys(n).map(e=>`;${rd(e)}=${rd(n[e])}`).join("")}(n.parameters)}`}const Ho=/^[^\/()?;=#]+/;function Go(n){const e=n.match(Ho);return e?e[0]:""}const zm=/^[^=?&#]+/,Np=/^[^&#]+/;class m0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[gt]=new Ee(e,t)),r}parseSegment(){const e=Go(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ge(Na(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Go(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Go(this.remaining);o&&(r=o,this.capture(r))}e[Na(t)]=Na(r)}parseQueryParam(e){const t=function Wm(n){const e=n.match(zm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function id(n){const e=n.match(Np);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Oa(t),c=Oa(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Go(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=gt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[gt]:new Ee([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Op{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Fh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Fh(e,this._root).map(t=>t.value)}}function kh(n,e){if(n===e.value)return e;for(const t of e.children){const r=kh(n,t);if(r)return r}return null}function Fh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Fh(n,t);if(r.length)return r.unshift(e),r}return[]}class Ui{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Pa extends Op{constructor(e,t){super(e),this.snapshot=t,Dc(this,e)}toString(){return this.snapshot.toString()}}function Pp(n,e){const t=function Lh(n,e){const h=new Ic([],{},{},"",{},gt,e,null,n.root,-1,{});return new Vh("",new Ui(h,[]))}(n,e),r=new wr([new Ge("",{})]),o=new wr({}),c=new wr({}),h=new wr({}),g=new wr(""),E=new wc(r,o,h,g,c,gt,e,t.root);return E.snapshot=t.root,new Pa(new Ui(E,[]),t)}class wc{constructor(e,t,r,o,c,h,g,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=g,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>mo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>mo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ec(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function Uh(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ic{constructor(e,t,r,o,c,h,g,E,T,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=g,this.routeConfig=E,this._urlSegment=T,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vh extends Op{constructor(e,t){super(t),this.url=e,Dc(this,t)}toString(){return Bh(this._root)}}function Dc(n,e){e.value._routerState=n,e.children.forEach(t=>Dc(n,t))}function Bh(n){const e=n.children.length>0?` { ${n.children.map(Bh).join(", ")} } `:"";return`${n.value}${e}`}function jh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ci(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ci(e.params,t.params)||n.params.next(t.params),function td(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ci(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ci(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $h(n,e){const t=ci(n.params,e.params)&&function St(n,e){return xt(n,e)&&n.every((t,r)=>ci(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$h(n.parent,e.parent))}function ka(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Zm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ka(n,r,o);return ka(n,r)})}(n,e,t);return new Ui(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(g=>ka(n,g)),h}}const r=function Hs(n){return new wc(new wr(n.url),new wr(n.params),new wr(n.queryParams),new wr(n.fragment),new wr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>ka(n,c));return new Ui(r,o)}}function Tc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sd(n){return"object"==typeof n&&null!=n&&n.outlets}function od(n,e,t,r,o){let c={};return r&&An(r,(h,g)=>{c[g]=Array.isArray(h)?h.map(E=>`${E}`):`${h}`}),new Ae(t.root===n?e:Ym(t.root,n,e),c,o)}function Ym(n,e,t){const r={};return An(n.children,(o,c)=>{r[c]=o===e?t:Ym(o,e,t)}),new Ee(n.segments,r)}class kp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tc(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(sd);if(o&&o!==$o(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ad{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zo(n,e,t){if(n||(n=new Ee([],{})),0===n.segments.length&&n.hasChildren())return Hh(n,e,t);const r=function ey(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const h=n.segments[o],g=t[r];if(sd(g))break;const E=`${g}`,T=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&T&&"object"==typeof T&&void 0===T.outlets){if(!bu(E,T,h))return c;r+=2}else{if(!bu(E,{},h))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Ee(n.segments.slice(0,r.pathIndex),{});return c.children[gt]=new Ee(n.segments.slice(r.pathIndex),n.children),Hh(c,0,o)}return r.match&&0===o.length?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Wo(n,e,t):r.match?Hh(n,0,o):Wo(n,e,t)}function Hh(n,e,t){if(0===t.length)return new Ee(n.segments,{});{const r=function y0(n){return sd(n[0])?n[0].outlets:{[gt]:n}}(t),o={};return An(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[h]=zo(n.children[h],e,c))}),An(n.children,(c,h)=>{void 0===r[h]&&(o[h]=c)}),new Ee(n.segments,o)}}function Wo(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(sd(c)){const E=Fp(c.outlets);return new Ee(r,E)}if(0===o&&Tc(t[0])){r.push(new Ge(n.segments[e].path,yi(t[0]))),o++;continue}const h=sd(c)?c.outlets[gt]:`${c}`,g=o<t.length-1?t[o+1]:null;h&&g&&Tc(g)?(r.push(new Ge(h,yi(g))),o+=2):(r.push(new Ge(h,{})),o++)}return new Ee(r,{})}function Fp(n){const e={};return An(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Wo(new Ee([],{}),0,t))}),e}function yi(n){const e={};return An(n,(t,r)=>e[r]=`${t}`),e}function bu(n,e,t){return n==t.path&&ci(e,t.parameters)}class ud{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=qo(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,o[h],r),delete o[h]}),An(o,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=qo(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);if(r&&r.outlet){const h=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=qo(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=qo(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new Xl(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Sa(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(jh(o),o===c)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(g.contexts),h.attachRef=g.componentRef,h.route=g.route.value,h.outlet&&h.outlet.attach(g.componentRef,g.route.value),jh(g.route.value),this.activateChildRoutes(e,null,h.children)}else{const g=function Up(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=g?g.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class Vp{constructor(e,t){this.routes=e,this.module=t}}function yo(n){return"function"==typeof n}function vo(n){return n instanceof Ae}const Ko=Symbol("INITIAL_VALUE");function Cc(){return yn(n=>mu(n.map(e=>e.pipe((0,Ls.q)(1),gi(Ko)))).pipe(Us((e,t)=>{let r=!1;return t.reduce((o,c,h)=>o!==Ko?o:(c===Ko&&(r=!0),r||!1!==c&&h!==t.length-1&&!vo(c)?o:c),e)},Ko),Pi(e=>e!==Ko),(0,Dt.U)(e=>vo(e)?e:!0===e),(0,Ls.q)(1)))}class ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fa,this.attachRef=null}}class Fa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ac=(()=>{class n{constructor(t,r,o,c,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=c||gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,E=new Bp(t,g,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Fa),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Bp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wc?this.route:e===Fa?this.childContexts:this.parent.get(e,t)}}let Sc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[Ac],encapsulation:2}),n})();function xc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];zh(r,ry(e,r))}}function zh(n,e){n.children&&xc(n.children,e)}function ry(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function _n(n){const e=n.children&&n.children.map(_n),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=Sc),t}function vi(n){return n.outlet||gt}function jp(n,e){const t=n.filter(r=>vi(r)===e);return t.push(...n.filter(r=>vi(r)!==e)),t}const cd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},cd):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(e.matcher||Vs)(t,n,e);if(!c)return Object.assign({},cd);const h={};An(c.posParams,(E,T)=>{h[T]=E.path});const g=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:g,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function ld(n,e,t,r,o="corrected"){if(t.length>0&&function $p(n,e,t){return t.some(r=>Wh(n,e,r)&&vi(r)!==gt)}(n,t,r)){const h=new Ee(e,function iy(n,e,t,r){const o={};o[gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&vi(c)!==gt){const h=new Ee([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[vi(c)]=h}return o}(n,e,r,new Ee(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function sy(n,e,t){return t.some(r=>Wh(n,e,r))}(n,t,r)){const h=new Ee(n.segments,function dd(n,e,t,r,o,c){const h={};for(const g of r)if(Wh(n,t,g)&&!o[vi(g)]){const E=new Ee([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[vi(g)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new Ee(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Wh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function oy(n,e,t,r){return!!(vi(n)===r||r!==gt&&Wh(e,t,n))&&("**"===n.path||Mc(e,n,t).matched)}function Tu(n,e,t){return 0===e.length&&!n.children[t]}class Fn{constructor(e){this.segmentGroup=e||null}}class Cu{constructor(e){this.urlTree=e}}function La(n){return ks(new Fn(n))}function hd(n){return ks(new Cu(n))}class _i{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=ld(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ee(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,gt).pipe((0,Dt.U)(c=>this.createUrlTree(Nc(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(jr(c=>{if(c instanceof Cu)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Fn?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,gt).pipe((0,Dt.U)(o=>this.createUrlTree(Nc(o),e.queryParams,e.fragment))).pipe(jr(o=>{throw o instanceof Fn?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ee([],{[gt]:e}):e;return new Ae(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(c=>new Ee([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,nn.D)(o).pipe(ho(c=>{const h=r.children[c],g=jp(t,c);return this.expandSegmentGroup(e,g,h,c).pipe((0,Dt.U)(E=>({segment:E,outlet:c})))}),Us((c,h)=>(c[h.outlet]=h.segment,c),{}),function Oh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,c)=>n(o,c,r)):Bo.y,sn(1),t?Mp(e):Nh(()=>new co))}())}expandSegment(e,t,r,o,c,h){return(0,nn.D)(r).pipe(ho(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,c,h).pipe(jr(T=>{if(T instanceof Fn)return nt(null);throw T}))),fo(g=>!!g),jr((g,E)=>{if(g instanceof co||"EmptyError"===g.name){if(Tu(t,o,c))return nt(new Ee([],{}));throw new Fn(t)}throw g}))}expandSegmentAgainstRoute(e,t,r,o,c,h,g){return oy(o,t,c,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,h):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h):La(t):La(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hd(c):this.lineralizeSegments(r,c).pipe((0,Wn.z)(h=>{const g=new Ee(h,{});return this.expandSegment(e,g,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){const{matched:g,consumedSegments:E,remainingSegments:T,positionalParamSegments:M}=Mc(t,o,c);if(!g)return La(t);const N=this.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?hd(N):this.lineralizeSegments(o,N).pipe((0,Wn.z)(H=>this.expandSegment(e,t,r,H.concat(T),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(N=>(r._loadedConfig=N,new Ee(o,{})))):nt(new Ee(o,{}));const{matched:h,consumedSegments:g,remainingSegments:E}=Mc(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,Wn.z)(M=>{const N=M.module,H=M.routes,{segmentGroup:Q,slicedSegments:we}=ld(t,g,E,H),Ve=new Ee(Q.segments,Q.children);if(0===we.length&&Ve.hasChildren())return this.expandChildren(N,H,Ve).pipe((0,Dt.U)($n=>new Ee(g,$n)));if(0===H.length&&0===we.length)return nt(new Ee(g,{}));const Je=vi(r)===c;return this.expandSegment(N,Ve,H,we,Je?gt:c,!0).pipe((0,Dt.U)(Bt=>new Ee(g.concat(Bt.segments),Bt.children)))})):La(t)}getChildConfig(e,t,r){return t.children?nt(new Vp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Wn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(c=>(t._loadedConfig=c,c))):function Ua(n){return ks(Iu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nt(new Vp([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?nt(o.map(h=>{const g=e.get(h);let E;if(function Gh(n){return n&&yo(n.canLoad)}(g))E=g.canLoad(t,r);else{if(!yo(g))throw new Error("Invalid CanLoad guard");E=g(t,r)}return Fi(E)})).pipe(Cc(),(0,$r.b)(h=>{if(!vo(h))return;const g=Iu(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw g.url=h,g}),(0,Dt.U)(h=>!0===h)):nt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return nt(r);if(o.numberOfChildren>1||!o.children[gt])return ks(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new Ae(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return An(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[c]=t[g]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let h={};return An(t.children,(g,E)=>{h[E]=this.createSegmentGroup(e,g,r,o)}),new Ee(c,h)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Nc(n){const e={};for(const r of Object.keys(n.children)){const c=Nc(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function Rc(n){if(1===n.numberOfChildren&&n.children[gt]){const e=n.children[gt];return new Ee(n.segments.concat(e.segments),e.children)}return n}(new Ee(n.segments,e))}class Oc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Au{constructor(e,t){this.component=e,this.route=t}}function Hp(n,e,t){const r=n._root;return Su(r,e?e._root:null,t,[r.value])}function fd(n,e,t){const r=function Gs(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Su(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=qo(e);return n.children.forEach(h=>{(function uy(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const E=function Zh(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xt(n.url,e.url)||!ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$h(n,e)||!ci(n.queryParams,e.queryParams);default:return!$h(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Oc(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Su(n,e,c.component?g?g.children:null:t,r,o),E&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Au(g.outlet.component,h))}else h&&Pc(e,g,o),o.canActivateChecks.push(new Oc(r)),Su(n,null,c.component?g?g.children:null:t,r,o)})(h,c[h.value.outlet],t,r.concat([h.value]),o),delete c[h.value.outlet]}),An(c,(h,g)=>Pc(h,t.getContext(g),o)),o}function Pc(n,e,t){const r=qo(n),o=n.value;An(r,(c,h)=>{Pc(c,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Au(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class zp{}function Wp(n){return new Er.y(e=>e.error(n))}class ly{constructor(e,t,r,o,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=ld(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,gt);if(null===t)return null;const r=new Ic([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ui(r,t),c=new Vh(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=Ec(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],g=jp(e,c),E=this.processSegmentGroup(g,h,c);if(null===E)return null;r.push(...E)}const o=m(r);return function dy(n){n.sort((e,t)=>e.value.outlet===gt?-1:t.value.outlet===gt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,o);if(null!==h)return h}return Tu(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!oy(e,t,r,o))return null;let c,h=[],g=[];if("**"===e.path){const Q=r.length>0?$o(r).parameters:{};c=new Ic(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),vi(e),e.component,e,p(t),v(t)+r.length,R(e))}else{const Q=Mc(t,e,r);if(!Q.matched)return null;h=Q.consumedSegments,g=Q.remainingSegments,c=new Ic(h,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,C(e),vi(e),e.component,e,p(t),v(t)+h.length,R(e))}const E=function hy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:T,slicedSegments:M}=ld(t,h,g,E.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===M.length&&T.hasChildren()){const Q=this.processChildren(E,T);return null===Q?null:[new Ui(c,Q)]}if(0===E.length&&0===M.length)return[new Ui(c,[])];const N=vi(e)===o,H=this.processSegment(E,T,M,N?gt:o);return null===H?null:[new Ui(c,H)]}}function fy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function m(n){const e=[],t=new Set;for(const r of n){if(!fy(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=m(r.children);e.push(new Ui(r.value,o))}return e.filter(r=>!t.has(r))}function p(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function v(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function C(n){return n.data||{}}function R(n){return n.resolve||{}}function ht(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rn(n){return yn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,Dt.U)(()=>e)):nt(e)})}class pd extends class Fc{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Va=new _.OlP("ROUTES");class gd{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new Vp(Bs(h.injector.get(Va,void 0,_.XFs.Self|_.XFs.Optional)).map(_n),h)}),jr(c=>{throw t._loader$=void 0,c}));return t._loader$=new wu(o,()=>new Oi.x).pipe(_u()),t._loader$}loadModuleFactory(e){return Fi(e()).pipe((0,Wn.z)(t=>t instanceof _.YKP?nt(t):(0,nn.D)(this.compiler.compileModuleAsync(t))))}}class Zo{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function md(n){throw n}function ef(n,e,t){return e.parse("/")}function yd(n,e){return nt(null)}const vd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class n{constructor(t,r,o,c,h,g,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oi.x,this.errorHandler=md,this.malformedUriErrorHandler=ef,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yd,afterPreactivation:yd},this.urlHandlingStrategy=new Zo,this.routeReuseStrategy=new pd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(_.h0i),this.console=h.get(_.c2e);const N=h.get(_.R0b);this.isNgZoneEnabled=N instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function $s(){return new Ae(new Ee([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gd(h,g,H=>this.triggerEvent(new go(H)),H=>this.triggerEvent(new ui(H))),this.routerState=Pp(this.currentUrlTree,this.rootComponentType),this.transitions=new wr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Pi(o=>0!==o.id),(0,Dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yn(o=>{let c=!1,h=!1;return nt(o).pipe((0,$r.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yn(g=>{const E=this.browserUrlTree.toString(),T=!this.navigated||g.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Kp(g.source)&&(this.browserUrlTree=g.extractedUrl),nt(g).pipe(yn(N=>{const H=this.transitions.getValue();return r.next(new Ql(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?lo.E:Promise.resolve(N)}),function ay(n,e,t,r){return yn(o=>function Kh(n,e,t,r,o){return new _i(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Dt.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$r.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function G(n,e,t,r,o){return(0,Wn.z)(c=>function Xh(n,e,t,r,o="emptyOnly",c="legacy"){try{const h=new ly(n,e,t,r,o,c).recognize();return null===h?Wp(new zp):nt(h)}catch(h){return Wp(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,Dt.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$r.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new Hm(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Q,source:we,restoredState:Ve,extras:Je}=g,Rt=new Ql(H,this.serializeUrl(Q),we,Ve);r.next(Rt);const Bt=Pp(Q,this.rootComponentType).snapshot;return nt(Object.assign(Object.assign({},g),{targetSnapshot:Bt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},Je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),lo.E}),rn(g=>{const{targetSnapshot:E,id:T,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Q}}=g;return this.hooks.beforePreactivation(E,{navigationId:T,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Q})}),(0,$r.b)(g=>{const E=new mc(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(E)}),(0,Dt.U)(g=>Object.assign(Object.assign({},g),{guards:Hp(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function qp(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function cr(n,e,t,r){return(0,nn.D)(n).pipe((0,Wn.z)(o=>function Jh(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?nt(c.map(g=>{const E=fd(g,e,o);let T;if(function ty(n){return n&&yo(n.canDeactivate)}(E))T=Fi(E.canDeactivate(n,e,t,r));else{if(!yo(E))throw new Error("Invalid CanDeactivate guard");T=Fi(E(n,e,t,r))}return T.pipe(fo())})).pipe(Cc()):nt(!0)}(o.component,o.route,t,e,r)),fo(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Wn.z)(g=>g&&function v0(n){return"boolean"==typeof n}(g)?function Yh(n,e,t,r){return(0,nn.D)(e).pipe(ho(o=>vu(function cy(n,e){return null!==n&&e&&e(new ki(n)),nt(!0)}(o.route.parent,r),function Qh(n,e){return null!==n&&e&&e(new yc(n)),nt(!0)}(o.route,r),function kc(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function Gp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Yl(()=>nt(h.guards.map(E=>{const T=fd(E,h.node,t);let M;if(function _0(n){return n&&yo(n.canActivateChild)}(T))M=Fi(T.canActivateChild(r,n));else{if(!yo(T))throw new Error("Invalid CanActivateChild guard");M=Fi(T(r,n))}return M.pipe(fo())})).pipe(Cc())));return nt(c).pipe(Cc())}(n,o.path,t),function _o(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const o=r.map(c=>Yl(()=>{const h=fd(c,e,t);let g;if(function qh(n){return n&&yo(n.canActivate)}(h))g=Fi(h.canActivate(e,n));else{if(!yo(h))throw new Error("Invalid CanActivate guard");g=Fi(h(e,n))}return g.pipe(fo())}));return nt(o).pipe(Cc())}(n,o.route,t))),fo(o=>!0!==o,!0))}(r,c,n,e):nt(g)),(0,Dt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,$r.b)(g=>{if(vo(g.guardsResult)){const T=Iu(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw T.url=g.guardsResult,T}const E=new ur(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(E)}),Pi(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),rn(g=>{if(g.guards.canActivateChecks.length)return nt(g).pipe((0,$r.b)(E=>{const T=new ai(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(T)}),yn(E=>{let T=!1;return nt(E).pipe(function ae(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return nt(t);let c=0;return(0,nn.D)(o).pipe(ho(h=>function Le(n,e,t,r){return function Qe(n,e,t,r){const o=ht(n);if(0===o.length)return nt({});const c={};return(0,nn.D)(o).pipe((0,Wn.z)(h=>function rt(n,e,t,r){const o=fd(n,e,r);return Fi(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,$r.b)(g=>{c[h]=g}))),sn(1),(0,Wn.z)(()=>ht(c).length===o.length?nt(c):lo.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),Ec(n,t).resolve),null)))}(h.route,r,n,e)),(0,$r.b)(()=>c++),sn(1),(0,Wn.z)(h=>c===o.length?nt(t):lo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$r.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,$r.b)(E=>{const T=new Jl(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(T)}))}),rn(g=>{const{targetSnapshot:E,id:T,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Q}}=g;return this.hooks.afterPreactivation(E,{navigationId:T,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Q})}),(0,Dt.U)(g=>{const E=function Km(n,e,t){const r=ka(n,e._root,t?t._root:void 0);return new Pa(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:E})}),(0,$r.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new ud(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,$r.b)({next(){c=!0},complete(){c=!0}}),function Rp(n){return(0,mn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;c||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),jr(g=>{if(h=!0,function ed(n){return n&&n[jo]}(g)){const E=vo(g.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const T=new Eu(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(T),E?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kp(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new po(o.id,this.serializeUrl(o.extractedUrl),g);r.next(E);try{o.resolve(this.errorHandler(g))}catch(T){o.reject(T)}}return lo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const c={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(c.state=E)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,h,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xc(t),this.config=t.map(_n),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:g,preserveFragment:E}=r,T=o||this.routerState.root,M=E?this.currentUrlTree.fragment:h;let N=null;switch(g){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=c||null}return null!==N&&(N=this.removeEmptyProps(N)),function bc(n,e,t,r,o){if(0===t.length)return od(e.root,e.root,e,r,o);const c=function Qm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const g={};return An(c.outlets,(E,T)=>{g[T]="string"==typeof E?E.split("/"):E}),[...o,{outlets:g}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===h?(c.split("/").forEach((g,E)=>{0==E&&"."===g||(0==E&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,c]},[]);return new kp(t,e,r)}(t);if(c.toRoot())return od(e.root,new Ee([],{}),e,r,o);const h=function Jm(n,e,t){if(n.isAbsolute)return new ad(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new ad(c,c===e.root,0)}const r=Tc(n.commands[0])?0:1;return function Xm(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new ad(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),g=h.processChildren?Hh(h.segmentGroup,h.index,c.commands):zo(h.segmentGroup,h.index,c.commands);return od(h.segmentGroup,g,e,r,o)}(T,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=vo(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function my(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},vd):!1===r?Object.assign({},gy):r,vo(t))return nd(this.currentUrlTree,t,o);const c=this.parseUrl(t);return nd(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Yt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,h){var g,E,T;if(this.disposed)return Promise.resolve(!1);const M=this.transitions.value,N=Kp(r)&&M&&!Kp(M.source),H=M.rawUrl.toString()===t.toString(),Q=M.id===(null===(g=this.currentNavigation)||void 0===g?void 0:g.id);if(N&&H&&Q)return Promise.resolve(!0);let Ve,Je,Rt;h?(Ve=h.resolve,Je=h.reject,Rt=h.promise):Rt=new Promise((Pt,xn)=>{Ve=Pt,Je=xn});const Bt=++this.navigationId;let $n;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),$n=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(E=this.browserPageId)&&void 0!==E?E:0:(null!==(T=this.browserPageId)&&void 0!==T?T:0)+1):$n=0,this.setTransition({id:Bt,targetPageId:$n,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:Ve,reject:Je,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(Pt=>Promise.reject(Pt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Eu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Kp(n){return"imperative"!==n}class Zp{}class E0{preload(e,t){return nt(null)}}let wy=(()=>{class n{constructor(t,r,o,c){this.router=t,this.injector=o,this.preloadingStrategy=c,this.loader=new gd(o,r,E=>t.triggerEvent(new go(E)),E=>t.triggerEvent(new ui(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof Yt),ho(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,nn.D)(o).pipe((0,Fs.J)(),(0,Dt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Wn.z)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(qr),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(Zp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Yp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ql?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yt&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const xu=new _.OlP("ROUTER_CONFIGURATION"),Ey=new _.OlP("ROUTER_FORROOT_GUARD"),qI=[pe,{provide:Jn,useClass:vn},{provide:qr,useFactory:function C0(n,e,t,r,o,c,h={},g,E){const T=new qr(null,n,e,t,r,o,Bs(c));return g&&(T.urlHandlingStrategy=g),E&&(T.routeReuseStrategy=E),function Xp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,T),h.enableTracing&&T.events.subscribe(M=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),T},deps:[Jn,Fa,pe,_.zs3,_.Sil,Va,xu,[class py{},new _.FiY],[class Vi{},new _.FiY]]},Fa,{provide:wc,useFactory:function eg(n){return n.routerState.root},deps:[qr]},wy,E0,class GI{preload(e,t){return t().pipe(jr(()=>nt(null)))}},{provide:xu,useValue:{enableTracing:!1}}];function Qp(){return new _.PXZ("Router",qr)}let I0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[qI,Jp(t),{provide:Ey,useFactory:T0,deps:[[qr,new _.FiY,new _.tp0]]},{provide:xu,useValue:r||{}},{provide:q,useFactory:b0,deps:[ue,[new _.tBr(Se),new _.FiY],xu]},{provide:Yp,useFactory:D0,deps:[qr,au,xu]},{provide:Zp,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:E0},{provide:_.PXZ,multi:!0,useFactory:Qp},[tg,{provide:_.ip1,multi:!0,useFactory:Iy,deps:[tg]},{provide:ng,useFactory:A0,deps:[tg]},{provide:_.tb,multi:!0,useExisting:ng}]]}}static forChild(t){return{ngModule:n,providers:[Jp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Ey,8),_.LFG(qr,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function D0(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Yp(n,e,t)}function b0(n,e,t={}){return t.useHash?new ie(n,e):new Re(n,e)}function T0(n){return"guarded"}function Jp(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:Va,multi:!0,useValue:n}]}let tg=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oi.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),c=this.injector.get(qr),h=this.injector.get(xu);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(xu),o=this.injector.get(wy),c=this.injector.get(Yp),h=this.injector.get(qr),g=this.injector.get(_.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),c.init(),h.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Iy(n){return n.appInitializer.bind(n)}function A0(n){return n.bootstrapListener.bind(n)}const ng=new _.OlP("Router Initializer");var S0=P(4986),zr=P(5813);function Dy(){return(0,mn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,o=>{const c=t;t=o,r&&e.next([c,o]),r=!0}))})}function by(n,e){return n===e}P(3059);var We,vT=P(3942),_e=P(5861),Uc=P(9681),nf=P(4859),Mu=P(1877),Mt=P(2090),wo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ba={},Ty=Ty||{},vt=wo||self;function rg(){}function Cy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ay="closure_uid_"+(1e9*Math.random()>>>0),KI=0;function wt(n,e,t){return n.call.apply(n.bind,arguments)}function M0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Tr(n,e,t){return(Tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wt:M0).apply(null,arguments)}function rf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Xn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var h=Array(arguments.length-2),g=2;g<arguments.length;g++)h[g-2]=arguments[g];return e.prototype[o].apply(r,h)}}function Cr(){this.s=this.s,this.o=this.o}var ZI={};Cr.prototype.s=!1,Cr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function WI(n){return Object.prototype.hasOwnProperty.call(n,Ay)&&n[Ay]||(n[Ay]=++KI)}(this);delete ZI[n]}},Cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ig=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Yo=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function xy(n){return Array.prototype.concat.apply([],arguments)}function sf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function My(n){return/^[\s\xa0]*$/.test(n)}var Ar,Ry=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bi(n,e){return-1!=n.indexOf(e)}function Ed(n,e){return n<e?-1:n>e?1:0}e:{var sg=vt.navigator;if(sg){var og=sg.userAgent;if(og){Ar=og;break e}}Ar=""}function of(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function YI(n){const e={};for(const t in n)e[t]=n[t];return e}var N0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<N0.length;c++)t=N0[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ny(n){return Ny[" "](n),n}Ny[" "]=rg;var Id,n,P0=Bi(Ar,"Opera"),af=Bi(Ar,"Trident")||Bi(Ar,"MSIE"),k0=Bi(Ar,"Edge"),F0=k0||af,Oy=Bi(Ar,"Gecko")&&!(Bi(Ar.toLowerCase(),"webkit")&&!Bi(Ar,"Edge"))&&!(Bi(Ar,"Trident")||Bi(Ar,"MSIE"))&&!Bi(Ar,"Edge"),L0=Bi(Ar.toLowerCase(),"webkit")&&!Bi(Ar,"Edge");function U0(){var n=vt.document;return n?n.documentMode:void 0}e:{var V0="",B0=(n=Ar,Oy?/rv:([^\);]+)(\)|;)/.exec(n):k0?/Edge\/([\d\.]+)/.exec(n):af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):L0?/WebKit\/(\S+)/.exec(n):P0?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(B0&&(V0=B0?B0[1]:""),af){var j0=U0();if(null!=j0&&j0>parseFloat(V0)){Id=String(j0);break e}}Id=V0}var _T={};var ET=vt.document&&af&&(U0()||parseInt(Id,10))||void 0,IT=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",rg,e),vt.removeEventListener("test",rg,e)}catch(t){}return n}();function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qs(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Oy){e:{try{Ny(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Py[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qs.Z.h.call(this)}}wi.prototype.h=function(){this.defaultPrevented=!0},Xn(qs,wi);var Py={2:"touch",3:"pen",4:"mouse"};qs.prototype.h=function(){qs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var uf="closure_listenable_"+(1e6*Math.random()|0),H0=0;function ky(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++H0,this.ca=this.fa=!1}function cf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Dd(n){this.src=n,this.g={},this.h=0}function Fy(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=ig(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(cf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qo(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}Dd.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=Qo(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new ky(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var ag="closure_lm_"+(1e6*Math.random()|0),Ly={};function ug(n,e,t,r,o){if(r&&r.once)return z0(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)ug(n,e[c],t,r,o);return null}return t=Nu(t),n&&n[uf]?n.N(e,t,wd(r)?!!r.capture:!!r,o):G0(n,e,t,!1,r,o)}function G0(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var h=wd(o)?!!o.capture:!!o,g=Ru(n);if(g||(n[ag]=g=new Dd(n)),(t=g.add(e,t,r,h,c)).proxy)return t;if(r=function q0(){var e=Uy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)IT||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Bc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function z0(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)z0(n,e[c],t,r,o);return null}return t=Nu(t),n&&n[uf]?n.O(e,t,wd(r)?!!r.capture:!!r,o):G0(n,e,t,!0,r,o)}function W0(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)W0(n,e[c],t,r,o);else r=wd(r)?!!r.capture:!!r,t=Nu(t),n&&n[uf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qo(c=n.g[e],t,r,o))&&(cf(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Ru(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qo(e,t,r,o)),(t=-1<n?e[n]:null)&&Vc(t))}function Vc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[uf])Fy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ru(e))?(Fy(t,n),0==t.h&&(t.src=null,e[ag]=null)):cf(n)}}}function Bc(n){return n in Ly?Ly[n]:Ly[n]="on"+n}function Uy(n,e){if(n.ca)n=!0;else{e=new qs(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Vc(n),n=t.call(r,e)}return n}function Ru(n){return(n=n[ag])instanceof Dd?n:null}var jc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nu(n){return"function"==typeof n?n:(n[jc]||(n[jc]=function(e){return n.handleEvent(e)}),n[jc])}function Sr(){Cr.call(this),this.i=new Dd(this),this.P=this,this.I=null}function xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var o=e;O0(e=new wi(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];o=lf(h,r,!0,e)&&o}if(o=lf(h=e.g=n,r,!0,e)&&o,o=lf(h,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=lf(h=e.g=t[c],r,!1,e)&&o}function lf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var g=h.listener,E=h.ia||h.src;h.fa&&Fy(n.i,h),o=!1!==g.call(E,r)&&o}}return o&&!r.defaultPrevented}Xn(Sr,Cr),Sr.prototype[uf]=!0,Sr.prototype.removeEventListener=function(n,e,t,r){W0(this,n,e,t,r)},Sr.prototype.M=function(){if(Sr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)cf(t[r]);delete n.g[e],n.h--}}this.I=null},Sr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Sr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var df=vt.JSON.stringify;function Vy(){var n=jy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cg,hf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new XI,n=>n.reset());class XI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Z0(n){vt.setTimeout(()=>{throw n},0)}function Y0(n,e){cg||function Q0(){var n=vt.Promise.resolve(void 0);cg=function(){n.then(eD)}}(),By||(cg(),By=!0),jy.add(n,e)}var By=!1,jy=new class K0{constructor(){this.h=this.g=null}add(e,t){const r=hf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eD(){for(var n;n=Vy();){try{n.h.call(n.g)}catch(t){Z0(t)}var e=hf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}By=!1}function lg(n,e){Sr.call(this),this.h=n||1,this.g=e||vt,this.j=Tr(this.kb,this),this.l=Date.now()}function Ei(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function $y(n,e,t){if("function"==typeof n)t&&(n=Tr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tr(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function J0(n){n.g=$y(()=>{n.g=null,n.i&&(n.i=!1,J0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xn(lg,Sr),(We=lg.prototype).da=!1,We.S=null,We.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xr(this,"tick"),this.da&&(Ei(this),this.start()))}},We.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.M=function(){lg.Z.M.call(this),Ei(this),delete this.g};class DT extends Cr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:J0(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dg(n){Cr.call(this),this.h=n,this.g={}}Xn(dg,Cr);var Hy=[];function tD(n,e,t,r){Array.isArray(t)||(t&&(Hy[0]=t.toString()),t=Hy);for(var o=0;o<t.length;o++){var c=ug(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function X0(n){of(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vc(e)},n),n.g={}}function bd(){this.g=!0}function Td(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<o.length;h++)o[h]=""}}}return df(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}dg.prototype.M=function(){dg.Z.M.call(this),X0(this)},dg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bd.prototype.Aa=function(){this.g=!1},bd.prototype.info=function(){};var $c={},Gy=null;function hg(){return Gy=Gy||new Sr}function nw(n){wi.call(this,$c.Ma,n)}function Cd(n){const e=hg();xr(e,new nw(e,n))}function qy(n,e){wi.call(this,$c.STAT_EVENT,n),this.stat=e}function Ii(n){const e=hg();xr(e,new qy(e,n))}function Eo(n,e){wi.call(this,$c.Na,n),this.size=e}function Hc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}$c.Ma="serverreachability",Xn(nw,wi),$c.STAT_EVENT="statevent",Xn(qy,wi),$c.Na="timingevent",Xn(Eo,wi);var fg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},rw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function iw(){}function sw(){}iw.prototype.h=null;var Ky,ff={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wy(){wi.call(this,"d")}function pf(){wi.call(this,"c")}function pg(){}function Ou(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new dg(this),this.P=iD,this.W=new lg(n=F0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}Xn(Wy,wi),Xn(pf,wi),Xn(pg,iw),pg.prototype.g=function(){return new XMLHttpRequest},pg.prototype.i=function(){return{}},Ky=new pg;var iD=45e3,gf={},Ad={};function mg(n,e,t){n.K=1,n.v=Eg(cs(e)),n.s=t,n.U=!0,ow(n,null)}function ow(n,e){n.F=Date.now(),mf(n),n.A=cs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ig(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gg,n.g=Qc(n.l,t?e:null,!n.s),0<n.O&&(n.L=new DT(Tr(n.Ia,n,n.g),n.O)),tD(n.V,n.g,"readystatechange",n.gb),e=n.H?YI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Cd(1),function ew(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var h="",g=c.split("&"),E=0;E<g.length;E++){var T=g[E].split("=");if(1<T.length){var M=T[0];T=T[1];var N=M.split("_");h=2<=N.length&&"type"==N[1]?h+(M+"=")+T+"&":h+(M+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function aw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yg(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=bT(n,t),o==Ad){4==e&&(n.o=4,Ii(14),r=!1),Td(n.j,n.m,null,"[Incomplete Response]");break}if(o==gf){n.o=4,Ii(15),Td(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Td(n.j,n.m,o,null),vg(n,o)}aw(n)&&o!=Ad&&o!=gf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bf(e),e.L=!0,Ii(11))):(Td(n.j,n.m,t,"[Invalid Chunked Response]"),Pu(n),Sd(n))}function bT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ad:(t=Number(e.substring(t,r)),isNaN(t)?gf:(r+=1)+t>e.length?Ad:(e=e.substr(r,t),n.C=r+t,e))}function mf(n){n.Y=Date.now()+n.P,Zy(n,n.P)}function Zy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Hc(Tr(n.eb,n),e)}function yf(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function Sd(n){0==n.l.G||n.I||Wc(n.l,n)}function Pu(n){yf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ei(n.W),X0(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||tv(t.i,n)))if(t.I=n.N,!n.J&&tv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(T){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Hc(Tr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ga(t),Lu(t)}ji(t),Ii(18)}if(1>=fw(t.i)&&t.ka){try{t.ka()}catch(T){}t.ka=void 0}}else Ws(t,11)}else if((n.J||t.g==n)&&Ga(t),!My(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let T=o[e];if(t.U=T[0],T=T[1],2==t.G)if("c"==T[0]){t.J=T[1],t.la=T[2];const M=T[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=T[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=T[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const we=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(we){var c=r.i;!c.g&&(Bi(we,"spdy")||Bi(we,"quic")||Bi(we,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Dg(c,c.h),c.h=null))}if(r.D){const Ve=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.sa=Ve,ln(r.F,r.D,Ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Yc(r,r.H?r.la:null,r.W),h.J){lD(r.i,h);var g=h,E=r.K;E&&g.setTimeout(E),g.B&&(yf(g),mf(g)),r.g=h}else Df(r);0<t.l.length&&Ld(t)}else"stop"!=T[0]&&"close"!=T[0]||Ws(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?Ws(t,7):av(t):"noop"!=T[0]&&t.j&&t.j.wa(T),t.A=0)}Cd(4)}catch(T){}}function xd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cy(n)||"string"==typeof n)Yo(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Cy(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function ja(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Cy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function Md(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Md)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Yy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Rd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Rd(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Rd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(We=Ou.prototype).setTimeout=function(n){this.P=n},We.gb=function(n){n=n.target;const e=this.L;e&&3==Ha(n)?e.l():this.Ia(n)},We.Ia=function(n){try{if(n==this.g)e:{const M=Ha(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||F0||this.g&&(this.h.h||this.g.ga()||vw(this.g)))){this.I||4!=M||7==e||Cd(8==e||0>=N?3:2),yf(this);var t=this.g.ba();this.N=t;t:if(aw(this)){var r=vw(this.g);n="";var o=r.length,c=4==Ha(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pu(this),Sd(this);var h="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function nD(n,e,t,r,o,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,E=this.g;if((g=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!My(g)){var T=g;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Ii(12),Pu(this),Sd(this);break e}Td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vg(this,t)}this.U?(yg(this,M,h),F0&&this.i&&3==M&&(tD(this.V,this.W,"tick",this.fb),this.W.start())):(Td(this.j,this.m,h,null),vg(this,h)),4==M&&Pu(this),this.i&&!this.I&&(4==M?Wc(this.l,this):(this.i=!1,mf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Pu(this),Sd(this)}}}catch(M){}},We.fb=function(){if(this.g){var n=Ha(this.g),e=this.g.ga();this.C<e.length&&(yf(this),yg(this,n,e),this.i&&4!=n&&mf(this))}},We.cancel=function(){this.I=!0,Pu(this)},We.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function rD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Cd(3),Ii(17)),Pu(this),this.o=2,Sd(this)):Zy(this,this.Y-n)},(We=Md.prototype).R=function(){Yy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},We.T=function(){return Yy(this),this.g.concat()},We.get=function(n,e){return Rd(this.h,n)?this.h[n]:e},We.set=function(n,e){Rd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},We.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var _g=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $a(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $a){this.g=void 0!==e?e:n.g,wg(this,n.j),this.s=n.s,Nd(this,n.i),vf(this,n.m),this.l=n.l,e=n.h;var t=new wf;t.i=e.i,e.g&&(t.g=new Md(e.g),t.h=e.h),Qy(this,t),this.o=n.o}else n&&(t=String(n).match(_g))?(this.g=!!e,wg(this,t[1]||"",!0),this.s=_f(t[2]||""),Nd(this,t[3]||"",!0),vf(this,t[4]),this.l=_f(t[5]||"",!0),Qy(this,t[6]||"",!0),this.o=_f(t[7]||"")):(this.g=!!e,this.h=new wf(null,this.g))}function cs(n){return new $a(n)}function wg(n,e,t){n.j=t?_f(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Nd(n,e,t){n.i=t?_f(e,!0):e}function vf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Qy(n,e,t){e instanceof wf?(n.h=e,function lw(n,e){e&&!n.j&&(ku(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(cw(this,r),Ig(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Od(e,kd)),n.h=new wf(e,n.g))}function ln(n,e,t){n.h.set(e,t)}function Eg(n){return ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _f(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Od(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Pd),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Pd(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$a.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Od(e,Xy,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Od(e,Xy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Od(t,"/"==t.charAt(0)?aD:oD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Od(t,uD)),n.join("")};var Xy=/[#\/\?@]/g,oD=/[#\?:]/g,aD=/[#\?]/g,kd=/[#\?@]/g,uD=/#/g;function wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ku(n){n.g||(n.g=new Md,n.h=0,n.i&&function uw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cw(n,e){ku(n),e=Gc(n,e),Rd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Rd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Yy(n)))}function zs(n,e){return ku(n),e=Gc(n,e),Rd(n.g.h,e)}function Ig(n,e,t){cw(n,e),0<t.length&&(n.i=null,n.g.set(Gc(n,e),sf(t)),n.h+=t.length)}function Gc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ev(n){this.l=n||cD,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=wf.prototype).add=function(n,e){ku(this),this.i=null,n=Gc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){ku(this),this.g.forEach(function(t,r){Yo(t,function(o){n.call(e,o,r,this)},this)},this)},We.T=function(){ku(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},We.R=function(n){ku(this);var e=[];if("string"==typeof n)zs(this,n)&&(e=xy(e,this.g.get(Gc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xy(e,n[t])}return e},We.set=function(n,e){return ku(this),this.i=null,zs(this,n=Gc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=o;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var cD=10;function hw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function fw(n){return n.h?1:n.g?n.g.size:0}function tv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Dg(n,e){n.g?n.g.add(e):n.h=e}function lD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sf(n.i)}function rv(){}function dD(){this.g=new rv}function TT(n,e,t){const r=t||"";try{xd(n,function(o,c){let h=o;wd(o)&&(h=df(o)),e.push(r+c+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Fd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function Ef(n){this.l=n.$b||null,this.j=n.ib||!1}function If(n,e){Sr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ev.prototype.cancel=function(){if(this.i=nv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rv.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},rv.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},Xn(Ef,iw),Ef.prototype.g=function(){return new If(this.l,this.j)},Ef.prototype.i=function(n){return function(){return n}}({}),Xn(If,Sr);var bg=0;function hD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Di(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Tg(n)}function Tg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=If.prototype).open=function(n,e){if(this.readyState!=bg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Tg(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Di(this)),this.readyState=bg},We.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Tg(this)),this.g&&(this.readyState=3,Tg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},We.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Di(this):Tg(this),3==this.readyState&&hD(this)}},We.Ua=function(n){this.g&&(this.response=this.responseText=n,Di(this))},We.Ta=function(n){this.g&&(this.response=n,Di(this))},We.ha=function(){this.g&&Di(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(If.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var AT=vt.JSON.parse;function Kn(n){Sr.call(this),this.headers=new Md,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iv,this.K=this.L=!1}Xn(Kn,Sr);var iv="",pw=/^https?$/i,fD=["POST","PUT"];function gw(n){return"content-type"==n.toLowerCase()}function sv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mw(n),Ag(n)}function mw(n){n.D||(n.D=!0,xr(n,"complete"),xr(n,"error"))}function Cg(n){if(n.h&&void 0!==Ty&&(!n.C[1]||4!=Ha(n)||2!=n.ba()))if(n.v&&4==Ha(n))$y(n.Fa,0,n);else if(xr(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(_g)[1]||null;if(!o&&vt.self&&vt.self.location){var c=vt.self.location.protocol;o=c.substr(0,c.length-1)}r=!pw.test(o?o.toLowerCase():"")}t=r}if(t)xr(n,"complete"),xr(n,"success");else{n.m=6;try{var h=2<Ha(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",mw(n)}}finally{Ag(n)}}}function Ag(n,e){if(n.g){yw(n);const t=n.g,r=n.C[0]?rg:null;n.g=null,n.C=null,e||xr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function yw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function vw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case iv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ov(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function pD(n){let e="";return of(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ln(n,e,t))}function Fu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qc(n){this.za=0,this.l=[],this.h=new bd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fu("baseRetryDelayMs",5e3,n),this.$a=Fu("retryDelaySeedMs",1e4,n),this.Ya=Fu("forwardChannelMaxRetries",2,n),this.ra=Fu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ev(n&&n.concurrentRequestLimit),this.Ca=new dD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function av(n){if(_w(n),3==n.G){var e=n.V++,t=cs(n.F);ln(t,"SID",n.J),ln(t,"RID",e),ln(t,"TYPE","terminate"),er(n,t),(e=new Ou(n,n.h,e,void 0)).K=2,e.v=Eg(cs(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),mf(e)}Zc(n)}function Lu(n){n.g&&(bf(n),n.g.cancel(),n.g=null)}function _w(n){Lu(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Ga(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function uv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ld(n)}function Ld(n){hw(n.i)||n.m||(n.m=!0,Y0(n.Ha,n),n.C=0)}function Ud(n,e){var t;t=e?e.m:n.V++;const r=cs(n.F);ln(r,"SID",n.J),ln(r,"RID",t),ln(r,"AID",n.U),er(n,r),n.o&&n.s&&ov(r,n.o,n.s),t=new Ou(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Uu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Dg(n.i,t),mg(t,r,e)}function er(n,e){n.j&&xd({},function(t,r){ln(e,r,t)})}function Uu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Tr(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=o[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let g=!0;for(let E=0;E<t;E++){let T=o[E].h;const M=o[E].g;if(T-=c,0>T)c=Math.max(0,o[E].h-100),g=!1;else try{TT(M,h,"req"+T+"_")}catch(N){r&&r(M)}}if(g){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Df(n){n.g||n.u||(n.Y=1,Y0(n.Ga,n),n.A=0)}function ji(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Hc(Tr(n.Ga,n),Kc(n,n.A)),n.A++,0))}function bf(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function zc(n){n.g=new Ou(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=cs(n.oa);ln(e,"RID","rpc"),ln(e,"SID",n.J),ln(e,"CI",n.N?"0":"1"),ln(e,"AID",n.U),er(n,e),ln(e,"TYPE","xmlhttp"),n.o&&n.s&&ov(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Eg(cs(e)),t.s=null,t.U=!0,ow(t,n)}function Ga(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function Wc(n,e){var t=null;if(n.g==e){Ga(n),bf(n),n.g=null;var r=2}else{if(!tv(n.i,e))return;t=e.D,lD(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;xr(r=hg(),new Eo(r,t,e,o)),Ld(n)}else Df(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Jo(n,e){return!(fw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Hc(Tr(n.Ha,n,e),Kc(n,n.C)),n.C++,0)))}(n,e)||2==r&&ji(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ws(n,5);break;case 4:Ws(n,10);break;case 3:Ws(n,6);break;default:Ws(n,2)}}function Kc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ws(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Tr(n.jb,n);t||(t=new $a("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||wg(t,"https"),Eg(t)),function CT(n,e){const t=new bd;if(vt.Image){const r=new Image;r.onload=rf(Fd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=rf(Fd,t,r,"TestLoadImage: error",!1,e),r.onabort=rf(Fd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=rf(Fd,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.j&&n.j.va(e),Zc(n),_w(n)}function Zc(n){n.G=0,n.I=-1,n.j&&((0!=nv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,sf(n.l),n.l.length=0),n.j.ua())}function Yc(n,e,t){let r=function Jy(n){return n instanceof $a?cs(n):new $a(n,void 0)}(t);if(""!=r.i)e&&Nd(r,e+"."+r.i),vf(r,r.m);else{const o=vt.location;r=function sD(n,e,t,r){var o=new $a(null,void 0);return n&&wg(o,n),e&&Nd(o,e),t&&vf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&of(n.aa,function(o,c){ln(r,c,o)}),t=n.sa,(e=n.D)&&t&&ln(r,e,t),ln(r,"VER",n.ma),er(n,r),r}function Qc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Ba&&!n.qa?new Ef({ib:!0}):n.qa)).L=n.H,e}function Jc(){}function Tf(){if(af&&!(10<=Number(ET)))throw Error("Environmental error: no available transport.")}function $i(n,e){Sr.call(this),this.g=new qc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!My(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!My(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xc(this)}function cv(n){Wy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function lv(){pf.call(this),this.status=1}function Xc(n){this.g=n}(We=Kn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ky.g(),this.C=function zy(n){return n.h||(n.h=n.i())}(this.u?this.u:Ky),this.g.onreadystatechange=Tr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void sv(this,c)}n=t||"";const o=new Md(this.headers);r&&xd(r,function(c,h){o.set(h,c)}),r=function Sy(n){e:{var e=gw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=ig(fD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yw(this),0<this.B&&((this.K=function ST(n){return af&&function wT(){return function QI(n){var e=_T;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ry(String(Id)).split("."),t=Ry("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",c=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=Ed(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||Ed(0==o[2].length,0==c[2].length)||Ed(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tr(this.pa,this)):this.A=$y(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){sv(this,c)}},We.pa=function(){void 0!==Ty&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xr(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xr(this,"complete"),xr(this,"abort"),Ag(this))},We.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ag(this,!0)),Kn.Z.M.call(this)},We.Fa=function(){this.s||(this.F||this.v||this.l?Cg(this):this.cb())},We.cb=function(){Cg(this)},We.ba=function(){try{return 2<Ha(this)?this.g.status:-1}catch(n){return-1}},We.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},We.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),AT(e)}},We.Da=function(){return this.m},We.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=qc.prototype).ma=8,We.G=1,We.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},We.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ou(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=YI(c),O0(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Uu(this,o,e),ln(t=cs(this.F),"RID",n),ln(t,"CVER",22),this.D&&ln(t,"X-HTTP-Session-Id",this.D),er(this,t),this.o&&c&&ov(t,this.o,c),Dg(this.i,o),this.Ra&&ln(t,"TYPE","init"),this.ja?(ln(t,"$req",e),ln(t,"SID","null"),o.$=!0,mg(o,t,null)):mg(o,t,e),this.G=2}}else 3==this.G&&(n?Ud(this,n):0==this.l.length||hw(this.i)||Ud(this))},We.Ga=function(){if(this.u=null,zc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Hc(Tr(this.bb,this),n)}},We.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),Lu(this),zc(this))},We.ab=function(){null!=this.v&&(this.v=null,Lu(this),ji(this),Ii(19))},We.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(We=Jc.prototype).xa=function(){},We.wa=function(){},We.va=function(){},We.ua=function(){},We.Oa=function(){},Tf.prototype.g=function(n,e){return new $i(n,e)},Xn($i,Sr),$i.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Y0(Tr(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Yc(n,null,n.W),Ld(n)},$i.prototype.close=function(){av(this.g)},$i.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,uv(this.g,e)}else this.v?((e={}).__data__=df(n),uv(this.g,e)):uv(this.g,n)},$i.prototype.M=function(){this.g.j=null,delete this.j,av(this.g),delete this.g,$i.Z.M.call(this)},Xn(cv,Wy),Xn(lv,pf),Xn(Xc,Jc),Xc.prototype.xa=function(){xr(this.g,"a")},Xc.prototype.wa=function(n){xr(this.g,new cv(n))},Xc.prototype.va=function(n){xr(this.g,new lv(n))},Xc.prototype.ua=function(){xr(this.g,"b")},Tf.prototype.createWebChannel=Tf.prototype.g,$i.prototype.send=$i.prototype.u,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,fg.NO_ERROR=0,fg.TIMEOUT=8,fg.HTTP_ERROR=6,rw.COMPLETE="complete",sw.EventType=ff,ff.OPEN="a",ff.CLOSE="b",ff.ERROR="c",ff.MESSAGE="d",Sr.prototype.listen=Sr.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.La,Kn.prototype.getLastErrorCode=Kn.prototype.Da,Kn.prototype.getStatus=Kn.prototype.ba,Kn.prototype.getResponseJson=Kn.prototype.Qa,Kn.prototype.getResponseText=Kn.prototype.ga,Kn.prototype.send=Kn.prototype.ea;var ww=Ba.createWebChannelTransport=function(){return new Tf},Ew=Ba.getStatEventTarget=function(){return hg()},Sg=Ba.ErrorCode=fg,Iw=Ba.EventType=rw,gD=Ba.Event=$c,dv=Ba.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mD=Ba.FetchXmlHttpFactory=Ef,xg=Ba.WebChannel=sw,Dw=Ba.XhrIo=Kn;const bw="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let el="9.6.7";const Vu=new Mu.Yd("@firebase/firestore");function Mg(){return Vu.logLevel}function Pe(n,...e){if(Vu.logLevel<=Mu.in.DEBUG){const t=e.map(Af);Vu.debug(`Firestore (${el}): ${n}`,...t)}}function lr(n,...e){if(Vu.logLevel<=Mu.in.ERROR){const t=e.map(Af);Vu.error(`Firestore (${el}): ${n}`,...t)}}function Cf(n,...e){if(Vu.logLevel<=Mu.in.WARN){const t=e.map(Af);Vu.warn(`Firestore (${el}): ${n}`,...t)}}function Af(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function mt(n,e){n||Xe()}function He(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class Vd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wD{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,t(T)):Promise.resolve();let h=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new dr,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const T=h;e.enqueueRetryable((0,_e.Z)(function*(){yield T.promise,yield c(r.currentUser)}))},E=T=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(T=>E(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?E(T):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new dr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new vD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Wr(e)}}class Tw{constructor(e,t,r){this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ED{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Tw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rg{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=c=>{null!=c.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.p;return this.p=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?o(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.p=t.token,new hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ID(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Hi.A=-1;class Cw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=ID(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function Bd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Aw(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pt(e)}static min(){return new pt(new hr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function fv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ng(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Og{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Og.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Og?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),h=t.get(o);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Lt extends Og{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const DD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends Og{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return DD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===g?(h=!h,o++):"."!==g||h?(r+=g,o++):(c(),o++)}if(c(),h)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class Xo{constructor(e){this.fields=e,e.sort(Kr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new Zn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const pv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(n){if(mt(!!n),"string"==typeof n){let e=0;const t=pv.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(n.seconds),nanos:dn(n.nanos)}}function dn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ea(n){return"string"==typeof n?Zn.fromBase64String(n):Zn.fromUint8Array(n)}function Sf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bD(n){const e=n.mapValue.fields.__previous_value__;return Sf(e)?bD(e):e}function xf(n){const e=ju(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class gv{constructor(e,t,r,o,c,h,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.useFetchStreams=E}}class qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}function $u(n){return null==n}function Mf(n){return 0===n&&1/n==-1/0}function Pg(n){return"number"==typeof n&&Number.isInteger(n)&&!Mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Lt.fromString(e))}static fromName(e){return new ze(Lt.fromString(e).popFirst(5))}static empty(){return new ze(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Lt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Lt(e.slice()))}}const xw={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function za(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sf(n)?4:10:Xe()}function Ks(n,e){if(n===e)return!0;const t=za(n);if(t!==za(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xf(n).isEqual(xf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=ju(r.timestampValue),h=ju(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ea(n.bytesValue).isEqual(ea(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return dn(r.geoPointValue.latitude)===dn(o.geoPointValue.latitude)&&dn(r.geoPointValue.longitude)===dn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return dn(r.integerValue)===dn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=dn(r.doubleValue),h=dn(o.doubleValue);return c===h?Mf(c)===Mf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(fv(c)!==fv(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===h[g]||!Ks(c[g],h[g])))return!1;return!0}(n,e);default:return Xe()}var o}function Rf(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function tl(n,e){if(n===e)return 0;const t=za(n),r=za(e);if(t!==r)return Ot(t,r);switch(t){case 0:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=dn(o.integerValue||o.doubleValue),g=dn(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return mv(n.timestampValue,e.timestampValue);case 4:return mv(xf(n),xf(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(o,c){const h=ea(o),g=ea(c);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),g=c.split("/");for(let E=0;E<h.length&&E<g.length;E++){const T=Ot(h[E],g[E]);if(0!==T)return T}return Ot(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=Ot(dn(o.latitude),dn(c.latitude));return 0!==h?h:Ot(dn(o.longitude),dn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const h=o.values||[],g=c.values||[];for(let E=0;E<h.length&&E<g.length;++E){const T=tl(h[E],g[E]);if(T)return T}return Ot(h.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const h=o.fields||{},g=Object.keys(h),E=c.fields||{},T=Object.keys(E);g.sort(),T.sort();for(let M=0;M<g.length&&M<T.length;++M){const N=Ot(g[M],T[M]);if(0!==N)return N;const H=tl(h[g[M]],E[T[M]]);if(0!==H)return H}return Ot(g.length,T.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function mv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=ju(n),r=ju(e),o=Ot(t.seconds,r.seconds);return 0!==o?o:Ot(t.nanos,r.nanos)}function Hu(n){return yv(n)}function yv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ju(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ea(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const h of r.values||[])c?c=!1:o+=",",o+=yv(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const g of o)h?h=!1:c+=",",c+=`${g}:${yv(r.fields[g])}`;return c+"}"}(n.mapValue):Xe();var e}function kg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vv(n){return!!n&&"integerValue"in n}function Fg(n){return!!n&&"arrayValue"in n}function _v(n){return!!n&&"nullValue"in n}function Lg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nf(n){return!!n&&"mapValue"in n}function jd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jd(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jd(t)}setAll(e){let t=Kr.emptyPath(),r={},o=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=g.popLast()}h?r[g.lastSegment()]=jd(h):o.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Nf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Bu(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Zr(jd(this.value))}}function wv(n){const e=[];return Bu(n.fields,(t,r)=>{const o=new Kr([t]);if(Nf(r)){const c=wv(r.mapValue).fields;if(0===c.length)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Xo(e)}class wn{constructor(e,t,r,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wn(e,0,pt.min(),pt.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,pt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,pt.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,pt.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let Ug=(()=>{class n{constructor(t,r,o,c){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=c}}return n.UNKNOWN_ID=-1,n})();class Of{constructor(e,t){this.fieldPath=e,this.kind=t}}class $d{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $d(0,Ev.min())}}class Ev{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ev(pt.min(),ze.empty(),-1)}}class TD{constructor(e,t=null,r=[],o=[],c=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=g,this.P=null}}function Mw(n,e=null,t=[],r=[],o=null,c=null,h=null){return new TD(n,e,t,r,o,c,h)}function Hd(n){const e=He(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Hu(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),$u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hu(r)).join(",")),e.P=t}return e.P}function Ln(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Ow(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ks(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dv(n.startAt,e.startAt)&&Dv(n.endAt,e.endAt)}function Pf(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class bi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new AD(e,t,r):"array-contains"===t?new Nw(e,r):"in"===t?new Gd(e,r):"not-in"===t?new xD(e,r):"array-contains-any"===t?new MD(e,r):new bi(e,t,r)}static v(e,t,r){return"in"===t?new Rw(e,r):new SD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(tl(t,this.value)):null!==t&&za(this.value)===za(t)&&this.V(tl(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AD extends bi{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.V(t)}}class Rw extends bi{constructor(e,t){super(e,"in",t),this.keys=Iv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SD extends bi{constructor(e,t){super(e,"not-in",t),this.keys=Iv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Iv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class Nw extends bi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fg(t)&&Rf(t.arrayValue,this.value)}}class Gd extends bi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rf(this.value.arrayValue,t)}}class xD extends bi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rf(this.value.arrayValue,t)}}class MD extends bi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rf(this.value.arrayValue,r))}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}class qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ow(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function RD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],h=n.position[o];if(r=c.field.isKeyField()?ze.comparator(ze.fromName(h.referenceValue),t.key):tl(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function Dv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class ta{constructor(e,t=null,r=[],o=[],c=null,h="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=g,this.endAt=E,this.D=null,this.C=null}}function Io(n,e,t,r,o,c,h,g){return new ta(n,e,t,r,o,c,h,g)}function zd(n){return new ta(n)}function Vg(n){return!$u(n.limit)&&"F"===n.limitType}function ls(n){return!$u(n.limit)&&"L"===n.limitType}function ds(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hs(n){for(const e of n.filters)if(e.S())return e.field;return null}function Bg(n){return null!==n.collectionGroup}function rl(n){const e=He(n);if(null===e.D){e.D=[];const t=hs(e),r=ds(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new qd(t)),e.D.push(new qd(Kr.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.D.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new qd(Kr.keyField(),c))}}}return e.D}function Zs(n){const e=He(n);if(!e.C)if("F"===e.limitType)e.C=Mw(e.path,e.collectionGroup,rl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of rl(e))t.push(new qd(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new nl(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new nl(e.startAt.position,!e.startAt.inclusive):null;e.C=Mw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Pw(n,e,t){return new ta(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return Ln(Zs(n),Zs(e))&&n.limitType===e.limitType}function kw(n){return`${Hd(Zs(n))}|lt:${n.limitType}`}function Ff(n){return`Query(target=${function CD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Hu(r.value)}`;var r}).join(", ")}]`),$u(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Hu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Hu(t)).join(",")),`Target(${e})`}(Zs(n))}; limitType=${n.limitType})`}function il(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,c,h){const g=RD(o,c,h);return o.inclusive?g<=0:g<0}(t.startAt,rl(t),r)||t.endAt&&!function(o,c,h){const g=RD(o,c,h);return o.inclusive?g>=0:g>0}(t.endAt,rl(t),r)));var t,r}function Fw(n){return(e,t)=>{let r=!1;for(const o of rl(n)){const c=Lw(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function Lw(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,c,h){const g=c.data.field(o),E=h.data.field(o);return null!==g&&null!==E?tl(g,E):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function Uw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function bv(n){return{integerValue:""+n}}function Tv(n,e){return Pg(e)?bv(e):Uw(n,e)}class sl{constructor(){this._=void 0}}function ND(n,e,t){return n instanceof ol?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof na?Av(n,e):n instanceof Gu?Sv(n,e):function(r,o){const c=Cv(r,o),h=xv(c)+xv(r.k);return vv(c)&&vv(r.k)?bv(h):Uw(r.O,h)}(n,e)}function Vw(n,e,t){return n instanceof na?Av(n,e):n instanceof Gu?Sv(n,e):t}function Cv(n,e){return n instanceof al?vv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ol extends sl{}class na extends sl{constructor(e){super(),this.elements=e}}function Av(n,e){const t=Mv(e);for(const r of n.elements)t.some(o=>Ks(o,r))||t.push(r);return{arrayValue:{values:t}}}class Gu extends sl{constructor(e){super(),this.elements=e}}function Sv(n,e){let t=Mv(e);for(const r of n.elements)t=t.filter(o=>!Ks(o,r));return{arrayValue:{values:t}}}class al extends sl{constructor(e,t){super(),this.O=e,this.k=t}}function xv(n){return dn(n.integerValue||n.doubleValue)}function Mv(n){return Fg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wd{constructor(e,t){this.field=e,this.transform=t}}class OD{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $g{}function PD(n,e,t){n instanceof Lf?function(r,o,c){const h=r.value.clone(),g=Gw(r.fieldTransforms,o,c.transformResults);h.setAll(g),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ul?function(r,o,c){if(!jg(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Gw(r.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(Hw(r)),g.setAll(h),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rv(n,e,t){var o;n instanceof Lf?function(r,o,c){if(!jg(r.precondition,o))return;const h=r.value.clone(),g=qw(r.fieldTransforms,c,o);h.setAll(g),o.convertToFoundDocument($w(o),h).setHasLocalMutations()}(n,e,t):n instanceof ul?function(r,o,c){if(!jg(r.precondition,o))return;const h=qw(r.fieldTransforms,c,o),g=o.data;g.setAll(Hw(r)),g.setAll(h),o.convertToFoundDocument($w(o),g).setHasLocalMutations()}(n,e,t):jg(n.precondition,o=e)&&o.convertToNoDocument(pt.min())}function kD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=Cv(r.transform,o||null);null!=c&&(null==t&&(t=Zr.empty()),t.set(r.field,c))}return t||null}function jw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bd(t,r,(o,c)=>function Bw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof na&&r instanceof na||t instanceof Gu&&r instanceof Gu?Bd(t.elements,r.elements,Ks):t instanceof al&&r instanceof al?Ks(t.k,r.k):t instanceof ol&&r instanceof ol);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function $w(n){return n.isFoundDocument()?n.version:pt.min()}class Lf extends $g{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class ul extends $g{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function Hw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gw(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],h=c.transform,g=e.data.field(c.field);r.set(c.field,Vw(h,g,t[o]))}return r}function qw(n,e,t){const r=new Map;for(const o of n){const c=o.transform,h=t.data.field(o.field);r.set(o.field,ND(c,h,e))}return r}class Uf extends $g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Nv extends $g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class FD{constructor(e){this.count=e}}var nr,kt;function Ov(n){switch(n){default:return Xe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Pv(n){if(void 0===n)return lr("GRPC error has no .code"),de.UNKNOWN;switch(n){case nr.OK:return de.OK;case nr.CANCELLED:return de.CANCELLED;case nr.UNKNOWN:return de.UNKNOWN;case nr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case nr.INTERNAL:return de.INTERNAL;case nr.UNAVAILABLE:return de.UNAVAILABLE;case nr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case nr.NOT_FOUND:return de.NOT_FOUND;case nr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case nr.ABORTED:return de.ABORTED;case nr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case nr.DATA_LOSS:return de.DATA_LOSS;default:return Xe()}}(kt=nr||(nr={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";class Un{constructor(e,t){this.comparator=e,this.root=t||Mr.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mr{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:Mr.RED,this.left=null!=o?o:Mr.EMPTY,this.right=null!=c?c:Mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Mr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Mr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1,Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Mr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(n){return n.hasNext()?n.getNext():void 0}const zw=new Un(ze.comparator);function fs(){return zw}const ll=new Un(ze.comparator);function Fv(){return ll}const LD=new Un(ze.comparator),Kd=new hn(ze.comparator);function Qt(...n){let e=Kd;for(const t of n)e=e.add(t);return e}const Lv=new hn(Ot);function Uv(){return Lv}class Zd{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Zd(pt.min(),r,Uv(),fs(),Qt())}}class Yd{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yd(Zn.EMPTY_BYTE_STRING,t,Qt(),Qt(),Qt())}}class Vv{constructor(e,t,r,o){this.M=e,this.removedTargetIds=t,this.key=r,this.$=o}}class dt{constructor(e,t){this.targetId=e,this.F=t}}class Ww{constructor(e,t,r=Zn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Kw{constructor(){this.B=0,this.L=Zw(),this.U=Zn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Qt(),t=Qt(),r=Qt();return this.L.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new Yd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Zw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class UD{constructor(e){this.nt=e,this.st=new Map,this.it=fs(),this.rt=Bf(),this.ot=new hn(Ot)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.F.count,o=this.wt(t);if(o){const c=o.target;if(Pf(c))if(0===r){const h=new ze(c.path);this.at(t,h,wn.newNoDocument(h,pt.min()))}else mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((c,h)=>{const g=this.wt(h);if(g){if(c.current&&Pf(g.target)){const E=new ze(g.target.path);null!==this.it.get(E)||this.It(h,E)||this.at(h,E,wn.newNoDocument(E,e))}c.j&&(t.set(h,c.H()),c.J())}});let r=Qt();this.rt.forEach((c,h)=>{let g=!0;h.forEachWhile(E=>{const T=this.wt(E);return!T||2===T.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.it.forEach((c,h)=>h.setReadTime(e));const o=new Zd(e,t,this.ot,this.it,r);return this.it=fs(),this.rt=Bf(),this.ot=new hn(Ot),o}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Kw,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new hn(Ot),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new Kw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Bf(){return new Un(ze.comparator)}function Zw(){return new Un(ze.comparator)}const Hg={asc:"ASCENDING",desc:"DESCENDING"},Gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Vn{constructor(e,t){this.databaseId=e,this.N=t}}function qg(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bv(n,e){return n.N?e.toBase64():e.toUint8Array()}function VD(n,e){return qg(n,e.toTimestamp())}function Rr(n){return mt(!!n),pt.fromTimestamp(function(e){const t=ju(e);return new hr(t.seconds,t.nanos)}(n))}function zg(n,e){return(t=n,new Lt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jv(n){const e=Lt.fromString(n);return mt(iE(e)),e}function Qd(n,e){return zg(n.databaseId,e.path)}function Do(n,e){const t=jv(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(Jd(t))}function $v(n,e){return zg(n.databaseId,e)}function Yw(n){const e=jv(n);return 4===e.length?Lt.emptyPath():Jd(e)}function jf(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jd(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Qw(n,e,t){return{name:Qd(n,e),fields:t.value.mapValue.fields}}function Jw(n,e,t){const r=Do(n,e.name),o=Rr(e.updateTime),c=new Zr({mapValue:{fields:e.fields}}),h=wn.newFoundDocument(r,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Xd(n,e){let t;if(e instanceof Lf)t={update:Qw(n,e.key,e.value)};else if(e instanceof Uf)t={delete:Qd(n,e.key)};else if(e instanceof ul)t={update:Qw(n,e.key,e.data),updateMask:GD(e.fieldMask)};else{if(!(e instanceof Nv))return Xe();t={verify:Qd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof ol)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof na)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Gu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof al)return{fieldPath:c.field.canonicalString(),increment:h.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:VD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function Kg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?tr.updateTime(Rr(o.updateTime)):void 0!==o.exists?tr.exists(o.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,h){let g=null;"setToServerValue"in h?(mt("REQUEST_TIME"===h.setToServerValue),g=new ol):"appendMissingElements"in h?g=new na(h.appendMissingElements.values||[]):"removeAllFromArray"in h?g=new Gu(h.removeAllFromArray.values||[]):"increment"in h?g=new al(c,h.increment):Xe();const E=Kr.fromServerFormat(h.fieldPath);return new Wd(E,g)}(n,o)):[];var o;if(e.update){const o=Do(n,e.update.name),c=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Xo((e.updateMask.fieldPaths||[]).map(T=>Kr.fromServerFormat(T)));return new ul(o,c,h,t,r)}return new Lf(o,c,t,r)}if(e.delete){const o=Do(n,e.delete);return new Uf(o,t)}if(e.verify){const o=Do(n,e.verify);return new Nv(o,t)}return Xe()}function eE(n,e){return{documents:[$v(n,e.path)]}}function eh(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=$v(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$v(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const T=E.map(M=>function(N){if("=="===N.op){if(Lg(N.value))return{unaryFilter:{field:dl(N.field),op:"IS_NAN"}};if(_v(N.value))return{unaryFilter:{field:dl(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Lg(N.value))return{unaryFilter:{field:dl(N.field),op:"IS_NOT_NAN"}};if(_v(N.value))return{unaryFilter:{field:dl(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(N.field),op:nE(N.op),value:N.value}}}(M));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(E){if(0!==E.length)return E.map(T=>{return{field:dl((M=T).field),direction:$D(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(T=e.limit,n.N||$u(T)?T:{value:T});var T,g,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function th(n){let e=Yw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=tE(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new qd(hl((N=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(M){let N;return N="object"==typeof M?M.value:M,$u(N)?null:N}(t.limit));let E=null;var M;t.startAt&&(E=new nl((M=t.startAt).values||[],!!M.before));let T=null;return t.endAt&&(T=function(M){return new nl(M.values||[],!M.before)}(t.endAt)),Io(e,o,h,c,g,"F",E,T)}function tE(n){return n?void 0!==n.unaryFilter?[rE(n)]:void 0!==n.fieldFilter?[HD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>tE(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function $D(n){return Hg[n]}function nE(n){return Gg[n]}function dl(n){return{fieldPath:n.canonicalString()}}function hl(n){return Kr.fromServerFormat(n.fieldPath)}function HD(n){return bi.create(hl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function rE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hl(n.unaryFilter.field);return bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hl(n.unaryFilter.field);return bi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hl(n.unaryFilter.field);return bi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hl(n.unaryFilter.field);return bi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function GD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qD(e)),e=RT(n.get(t),e);return qD(e)}function RT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function qD(n){return n+"\x01\x01"}function Wa(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Lt.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Xe(),n.charAt(h+1)){case"\x01":const g=n.substring(c,h);let E;0===o.length?E=g:(o+=g,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(c,h),o+="\0";break;case"\x11":o+=n.substring(c,h+1);break;default:Xe()}c=h+2}return new Lt(r)}class sE{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class li{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}li.store="owner",li.key="owner";class qu{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}qu.store="mutationQueues",qu.keyPath="userId";class fn{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}fn.store="mutations",fn.keyPath="batchId",fn.userMutationsIndex="userMutationsIndex",fn.userMutationsKeyPath=["userId","batchId"];class Qr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Yr(t)]}static key(e,t,r){return[e,Yr(t),r]}}Qr.store="documentMutations",Qr.PLACEHOLDER=new Qr;class $f{constructor(e,t){this.path=e,this.readTime=t}}class zD{constructor(e,t){this.path=e,this.version=t}}class Bn{constructor(e,t,r,o,c,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=h}}Bn.store="remoteDocuments",Bn.readTimeIndex="readTimeIndex",Bn.readTimeIndexPath="readTime",Bn.collectionReadTimeIndex="collectionReadTimeIndex",Bn.collectionReadTimeIndexPath=["parentPath","readTime"];class ra{constructor(e){this.byteSize=e}}ra.store="remoteDocumentGlobal",ra.key="remoteDocumentGlobalKey";class Gi{constructor(e,t,r,o,c,h,g){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=g}}Gi.store="targets",Gi.keyPath="targetId",Gi.queryTargetsIndexName="queryTargetsIndex",Gi.queryTargetsKeyPath=["canonicalId","targetId"];class Jr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Jr.store="targetDocuments",Jr.keyPath=["targetId","path"],Jr.documentTargetsIndex="documentTargetsIndex",Jr.documentTargetsKeyPath=["path","targetId"];class qi{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}qi.key="targetGlobalKey",qi.store="targetGlobal";class fl{constructor(e,t){this.collectionId=e,this.parent=t}}fl.store="collectionParents",fl.keyPath=["collectionId","parent"];class Ka{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Ka.store="clientMetadata",Ka.keyPath="clientId";class bo{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}bo.store="bundles",bo.keyPath="bundleId";class nh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}nh.store="namedQueries",nh.keyPath="name";class zi{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}zi.store="indexConfiguration",zi.keyPath="indexId",zi.collectionGroupIndex="collectionGroupIndex",zi.collectionGroupIndexPath="collectionGroup";class Ys{constructor(e,t,r,o,c,h){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=o,this.documentKey=c,this.largestBatchId=h}}Ys.store="indexState",Ys.keyPath=["indexId","uid"],Ys.sequenceNumberIndex="sequenceNumberIndex",Ys.sequenceNumberIndexPath=["uid","sequenceNumber"];class ps{constructor(e,t,r,o,c){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=o,this.documentKey=c}}ps.store="indexEntries",ps.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],ps.documentKeyIndex="documentKeyIndex",ps.documentKeyIndexPath=["indexId","uid","documentKey"];class Nr{constructor(e,t,r,o,c,h){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=o,this.largestBatchId=c,this.overlayMutation=h}}Nr.store="documentOverlays",Nr.keyPath=["userId","collectionPath","documentId"],Nr.collectionPathOverlayIndex="collectionPathOverlayIndex",Nr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Nr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Nr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Hv=[qu.store,fn.store,Qr.store,Bn.store,Gi.store,li.store,qi.store,Jr.store,Ka.store,ra.store,fl.store,bo.store,nh.store],oE=[...Hv,Nr.store],Gv=[...oE,zi.store,Ys.store,ps.store],aE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let o=0,c=0,h=!1;e.forEach(g=>{++o,g.next(()=>{++c,h&&c===o&&t()},E=>r(E))}),h=!0,c===o&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(o=>o?ge.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class Zg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new dr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new pl(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=zv(r.target.error);this.At.reject(new pl(e,o))}}static open(e,t,r,o){try{return new Zg(t,e.transaction(o,r))}catch(c){throw new pl(t,c)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uE(t)}}class To{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===To.vt((0,Mt.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),ml(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,Mt.hl)())return!1;if(To.St())return!0;const e=(0,Mt.z$)(),t=To.vt(e),r=0<t&&t<10,o=To.Dt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{o(new pl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const g=h.target.error;o("VersionError"===g.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new pl(e,g))},c.onupgradeneeded=h=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.bt.kt(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,_e.Z)(function*(){const h="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.xt(e);const E=Zg.open(c.db,e,h?"readonly":"readwrite",r),T=o(E).next(M=>(E.Pt(),M)).catch(M=>(E.abort(M),ge.reject(M))).toPromise();return T.catch(()=>{}),yield E.Rt,T}catch(E){const T="FirebaseError"!==E.name&&g<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),c.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WD{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return ml(this.$t.delete())}}class pl extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gl(n){return"IndexedDbTransactionError"===n.name}class uE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ml(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),ml(this.store.add(e))}get(e){return ml(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),ml(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),ml(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),c=[];return this.Kt(o,(h,g)=>{c.push(g)}).next(()=>c)}{const o=this.store.getAll(r.range);return new ge((c,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}}Gt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(c,h,g)=>g.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}Wt(e){const t=this.cursor({});return new ge((r,o)=>{t.onerror=c=>{const h=zv(c.target.error);o(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(g=>{g?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((o,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const g=h.target.result;if(!g)return void o();const E=new WD(g),T=t(g.primaryKey,g.value,E);if(T instanceof ge){const M=T.catch(N=>(E.done(),ge.reject(N)));r.push(M)}E.isDone?o():null===E.Lt?g.continue():g.continue(E.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ml(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=zv(r.target.error);t(o)}})}let cE=!1;function zv(n){const e=To.vt((0,Mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout(()=>{throw r},0)),r}}return n}class lE extends qv{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Or(n,e){const t=He(n);return To.Nt(t.zt,e)}class Wv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&PD(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Rv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Rv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(pt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,r)=>jw(t,r))&&Bd(this.baseMutations,e.baseMutations,(t,r)=>jw(t,r))}}class Kv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=LD;const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Kv(e,t,r,o)}}class Zv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Za{constructor(e,t,r,o,c=pt.min(),h=pt.min(),g=Zn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Yv{constructor(e){this.Ht=e}}function dE(n,e){let t;if(e.document)t=Jw(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=vl(e.noDocument.readTime);t=wn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=ze.fromSegments(e.unknownDocument.path),o=vl(e.unknownDocument.version);t=wn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(Qv(e.readTime)),t}function hE(n,e){const t=Yg(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const o={name:Qd(h=n.Ht,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:qg(h,g.version.toTimestamp())};return new Bn(null,null,o,e.hasCommittedMutations,t,r)}var h,g;if(e.isNoDocument()){const o=e.key.path.toArray(),c=yl(e.version),h=e.hasCommittedMutations;return new Bn(null,new $f(o,c),null,h,t,r)}if(e.isUnknownDocument()){const o=e.key.path.toArray(),c=yl(e.version);return new Bn(new zD(o,c),null,null,!0,t,r)}return Xe()}function Yg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qv(n){const e=new hr(n[0],n[1]);return pt.fromTimestamp(e)}function yl(n){const e=n.toTimestamp();return new sE(e.seconds,e.nanoseconds)}function vl(n){const e=new hr(n.seconds,n.nanoseconds);return pt.fromTimestamp(e)}function zu(n,e){const t=(e.baseMutations||[]).map(c=>Kg(n.Ht,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>Kg(n.Ht,c)),o=hr.fromMillis(e.localWriteTimeMs);return new Wv(e.batchId,o,t,r)}function _l(n){const e=vl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vl(n.lastLimboFreeSnapshotVersion):pt.min();let r;var o;return void 0!==n.query.documents?(mt(1===(o=n.query).documents.length),r=Zs(zd(Yw(o.documents[0])))):r=Zs(th(n.query)),new Za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Zn.fromBase64String(n.resumeToken))}function Jv(n,e){const t=yl(e.snapshotVersion),r=yl(e.lastLimboFreeSnapshotVersion);let o;o=Pf(e.target)?eE(n.Ht,e.target):eh(n.Ht,e.target);const c=e.resumeToken.toBase64();return new Gi(e.targetId,Hd(e.target),t,c,e.sequenceNumber,r,o)}function Hf(n){const e=th({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Pw(e,e.limit,"L"):e}function Xv(n,e){return new Zv(e.largestBatchId,Kg(n.Ht,e.overlayMutation))}function fE(n,e){const t=e.path.lastSegment();return[n,Yr(e.path.popLast()),t]}class e_{getBundleMetadata(e,t){return pE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:vl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return pE(e).put({bundleId:(r=t).id,createTime:yl(Rr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return gE(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Hf(o.bundledQuery),readTime:vl(o.readTime)};var o})}saveNamedQuery(e,t){return gE(e).put({name:(r=t).name,readTime:yl(Rr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function pE(n){return Or(n,bo.store)}function gE(n){return Or(n,nh.store)}class t_{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new t_(e,t.uid||"")}getOverlay(e,t){return rh(e).get(fE(this.userId,t)).next(r=>r?Xv(this.O,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach(c=>{const h=new Zv(t,c);o.push(this.Yt(e,h))}),ge.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Yr(h.getCollectionPath())));const c=[];return o.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(rh(e).Gt(Nr.collectionPathOverlayIndex,g))}),ge.waitFor(c)}getOverlaysForCollection(e,t,r){const o=new Map,c=Yr(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return rh(e).qt(Nr.collectionPathOverlayIndex,h).next(g=>{for(const E of g){const T=Xv(this.O,E);o.set(T.getKey(),T)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const c=new Map;let h;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rh(e).Qt({index:Nr.collectionGroupOverlayIndex,range:g},(E,T,M)=>{const N=Xv(this.O,T);c.size<o||N.largestBatchId===h?(c.set(N.getKey(),N),h=N.largestBatchId):M.done()}).next(()=>c)}Yt(e,t){return rh(e).put(function(r,o,c){const[h,g,E]=fE(o,c.mutation.key);return new Nr(o,g,E,c.mutation.key.getCollectionGroup(),c.largestBatchId,Xd(r.Ht,c.mutation))}(this.O,this.userId,t))}}function rh(n){return Or(n,Nr.store)}class Qg{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(dn(e.integerValue));else if("doubleValue"in e){const r=dn(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),Mf(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(ea(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Ks(e,xw)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):Xe()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const o of Object.keys(r))this.ie(o,t),this.Zt(r[o],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const o of r)this.Zt(o,t)}ce(e,t){this.ee(t,37),ze.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function mE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function KD(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const c=mE(255&t[o]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}Qg.le=new Qg;class ZD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const o=t.codePointAt(0);this.de(240|o>>>18),this.de(128|63&o>>>12),this.de(128|63&o>>>6),this.de(128|63&o)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const o=t.codePointAt(0);this.me(240|o>>>18),this.me(128|63&o>>>12),this.me(128|63&o>>>6),this.me(128|63&o)}}this.ge()}Ie(e){const t=this.Ee(e),r=KD(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ae(e){const t=this.Ee(e),r=KD(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Jg{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class YD{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class wl{constructor(){this.Se=new ZD,this.De=new Jg(this.Se),this.Ce=new YD(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class El{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}}function n_(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:(t=QD(n.arrayValue,e.arrayValue),0!==t?t:QD(n.directionalValue,e.directionalValue)))}function QD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class yE{constructor(){this.xe=new r_}addToCollectionParentIndex(e,t){return this.xe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t,r){return ge.resolve(Qt())}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class r_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new hn(Lt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new hn(Lt.comparator)).toArray()}}class JD{constructor(e){this.user=e,this.ke=new r_,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const c={collectionId:r,parent:Yr(o)};return vE(e).put(c)}return ge.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Aw(t),""],!1,!0);return vE(e).qt(o).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(Wa(h.parent))}return r})}addFieldIndex(e,t){const r=Gf(e),o=new zi((c=t).indexId,c.collectionGroup,c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind]));var c;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Gf(e),o=qf(e),c=Xg(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return ge.resolve(Qt())}getFieldIndex(e,t){return ge.resolve(null)}Oe(e,t){const r=new wl;for(const o of e.fields.filter(h=>2!==h.kind)){const c=t.data.field(o.fieldPath);if(null==c)return null;const h=r.Ne(o.kind);Qg.le.Xt(c,h)}return r.Ve()}Me(e){const t=new wl;return Qg.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=Gf(e),o=qf(e);return(t?r.qt(zi.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(c=>{const h=[];return ge.forEach(c,g=>o.get([g.indexId,this.uid]).next(E=>{h.push(function(T,M){const N=M?new $d(M.sequenceNumber,new Ev(vl(M.readTime),new ze(Wa(M.documentKey)),M.largestBatchId)):$d.empty(),H=T.fields.map(([Q,we])=>new Of(Kr.fromServerFormat(Q),we));return new Ug(T.indexId,T.collectionGroup,H,N)}(g,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>r.indexState.sequenceNumber-o.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Gf(e),c=qf(e);return this.$e(e).next(h=>o.qt(zi.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(g=>ge.forEach(g,E=>{return c.put(new Ys(E.indexId,this.user.uid||"",h,yl((H=r).readTime),Yr(H.documentKey.path),H.largestBatchId));var H})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(o,c)=>{const h=r.get(o.collectionGroup);return(h?ge.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ge.forEach(g,E=>this.Fe(e,o,E).next(T=>{const M=this.Be(c,E);return T.isEqual(M)?ge.resolve():this.Le(e,c,T,M)}))))})}Ue(e,t,r){return Xg(e).put(new ps(r.indexId,this.uid,r.arrayValue,r.directionalValue,Yr(t.key.path)))}qe(e,t,r){return Xg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Yr(t.key.path)])}Fe(e,t,r){const o=Xg(e);let c=new hn(n_);return o.Qt({index:ps.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,Yr(t.path)])},(h,g)=>{c=c.add(new El(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}Be(e,t){let r=new hn(n_);const o=this.Oe(t,e);if(null==o)return r;const c=t.fields.find(g=>2===g.kind);if(null!=c){const h=e.data.field(c.fieldPath);if(Fg(h))for(const g of h.arrayValue.values||[])r=r.add(new El(t.indexId,e.key,this.Me(g),o))}else r=r.add(new El(t.indexId,e.key,new Uint8Array,o));return r}Le(e,t,r,o){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,g,E,T,M){const N=h.getIterator(),H=g.getIterator();let Q=cl(N),we=cl(H);for(;Q||we;){let Ve=!1,Je=!1;if(Q&&we){const Rt=E(Q,we);Rt<0?Je=!0:Rt>0&&(Ve=!0)}else null!=Q?Je=!0:Ve=!0;Ve?(T(we),we=cl(H)):Je?(M(Q),Q=cl(N)):(Q=cl(N),we=cl(H))}}(r,o,n_,h=>{c.push(this.Ue(e,t,h))},h=>{c.push(this.qe(e,t,h))}),ge.waitFor(c)}$e(e){let t=1;return qf(e).Qt({index:Ys.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,c)=>{c.done(),t=o.sequenceNumber+1}).next(()=>t)}}function vE(n){return Or(n,fl.store)}function Xg(n){return Or(n,ps.store)}function Gf(n){return Or(n,zi.store)}function qf(n){return Or(n,Ys.store)}const em={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xr(e,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ih(n,e,t){const r=n.store(fn.store),o=n.store(Qr.store),c=[],h=IDBKeyRange.only(t.batchId);let g=0;const E=r.Qt({range:h},(M,N,H)=>(g++,H.delete()));c.push(E.next(()=>{mt(1===g)}));const T=[];for(const M of t.mutations){const N=Qr.key(e,M.key.path,t.batchId);c.push(o.delete(N)),T.push(M.key)}return ge.waitFor(c).next(()=>T)}function tm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Xr.DEFAULT_COLLECTION_PERCENTILE=10,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xr.DEFAULT=new Xr(41943040,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xr.DISABLED=new Xr(-1,0,0);class nm{constructor(e,t,r,o){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=o,this.Ke={}}static Jt(e,t,r,o){mt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new nm(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).Qt({index:fn.userMutationsIndex,range:r},(o,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=sh(e),h=Wu(e);return h.add({}).next(g=>{mt("number"==typeof g);const E=new Wv(g,t,r,o),T=function(H,Q,we){const Ve=we.baseMutations.map(Rt=>Xd(H.Ht,Rt)),Je=we.mutations.map(Rt=>Xd(H.Ht,Rt));return new fn(Q,we.batchId,we.localWriteTime.toMillis(),Ve,Je)}(this.O,this.userId,E),M=[];let N=new hn((H,Q)=>Ot(H.canonicalString(),Q.canonicalString()));for(const H of o){const Q=Qr.key(this.userId,H.key.path,g);N=N.add(H.key.path.popLast()),M.push(h.put(T)),M.push(c.put(Q,Qr.PLACEHOLDER))}return N.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Ke[g]=E.keys()}),ge.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return Wu(e).get(t).next(r=>r?(mt(r.userId===this.userId),zu(this.O,r)):null)}Ge(e,t){return this.Ke[t]?ge.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Ke[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Wu(e).Qt({index:fn.userMutationsIndex,range:o},(h,g,E)=>{g.userId===this.userId&&(mt(g.batchId>=r),c=zu(this.O,g)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wu(e).Qt({index:fn.userMutationsIndex,range:t,reverse:!0},(o,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).qt(fn.userMutationsIndex,t).next(r=>r.map(o=>zu(this.O,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Qr.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return sh(e).Qt({range:o},(h,g,E)=>{const[T,M,N]=h,H=Wa(M);if(T===this.userId&&t.path.isEqual(H))return Wu(e).get(N).next(Q=>{if(!Q)throw Xe();mt(Q.userId===this.userId),c.push(zu(this.O,Q))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Ot);const o=[];return t.forEach(c=>{const h=Qr.prefixForPath(this.userId,c.path),g=IDBKeyRange.lowerBound(h),E=sh(e).Qt({range:g},(T,M,N)=>{const[H,Q,we]=T,Ve=Wa(Q);H===this.userId&&c.path.isEqual(Ve)?r=r.add(we):N.done()});o.push(E)}),ge.waitFor(o).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=Qr.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(c);let g=new hn(Ot);return sh(e).Qt({range:h},(E,T,M)=>{const[N,H,Q]=E,we=Wa(H);N===this.userId&&r.isPrefixOf(we)?we.length===o&&(g=g.add(Q)):M.done()}).next(()=>this.je(e,g))}je(e,t){const r=[],o=[];return t.forEach(c=>{o.push(Wu(e).get(c).next(h=>{if(null===h)throw Xe();mt(h.userId===this.userId),r.push(zu(this.O,h))}))}),ge.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ih(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ge.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(Qr.prefixForUser(this.userId)),o=[];return sh(e).Qt({range:r},(c,h,g)=>{if(c[0]===this.userId){const E=Wa(c[1]);o.push(E)}else g.done()}).next(()=>{mt(0===o.length)})})}containsKey(e,t){return i_(e,this.userId,t)}We(e){return rm(e).get(this.userId).next(t=>t||new qu(this.userId,-1,""))}}function i_(n,e,t){const r=Qr.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return sh(n).Qt({range:c,jt:!0},(g,E,T)=>{const[M,N,H]=g;M===e&&N===o&&(h=!0),T.done()}).next(()=>h)}function Wu(n){return Or(n,fn.store)}function sh(n){return Or(n,Qr.store)}function rm(n){return Or(n,qu.store)}class Il{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Il(0)}static Je(){return new Il(-1)}}class NT{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Il(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>pt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Xe(e,o)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oh(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return oh(e).Qt((h,g)=>{const E=_l(g);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,c.push(this.removeTargetData(e,E)))}).next(()=>ge.waitFor(c)).next(()=>o)}forEachTarget(e,t){return oh(e).Qt((r,o)=>{const c=_l(o);t(c)})}Ye(e){return _E(e).get(qi.key).next(t=>(mt(null!==t),t))}Xe(e,t){return _E(e).put(qi.key,t)}Ze(e,t){return oh(e).put(Jv(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return oh(e).Qt({range:o,index:Gi.queryTargetsIndexName},(h,g,E)=>{const T=_l(g);Ln(t,T.target)&&(c=T,E.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=gs(e);return t.forEach(h=>{const g=Yr(h.path);o.push(c.put(new Jr(r,g))),o.push(this.referenceDelegate.addReference(e,r,h))}),ge.waitFor(o)}removeMatchingKeys(e,t,r){const o=gs(e);return ge.forEach(t,c=>{const h=Yr(c.path);return ge.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=gs(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=gs(e);let c=Qt();return o.Qt({range:r,jt:!0},(h,g,E)=>{const T=Wa(h[1]),M=new ze(T);c=c.add(M)}).next(()=>c)}containsKey(e,t){const r=Yr(t.path),o=IDBKeyRange.bound([r],[Aw(r)],!1,!0);let c=0;return gs(e).Qt({index:Jr.documentTargetsIndex,jt:!0,range:o},([h,g],E,T)=>{0!==h&&(c++,T.done())}).next(()=>c>0)}Tt(e,t){return oh(e).get(t).next(r=>r?_l(r):null)}}function oh(n){return Or(n,Gi.store)}function _E(n){return Or(n,qi.store)}function gs(n){return Or(n,Jr.store)}function Ku(n){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==aE)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Zu.apply(this,arguments)}function XD([n,e],[t,r]){const o=Ot(n,t);return 0===o?Ot(e,r):o}class wE{constructor(e){this.en=e,this.buffer=new hn(XD),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){gl(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ku(o)}yield t.un(e)}))}}class OT{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Hi.A);const r=new wE(t);return this.an.forEachTarget(e,o=>r.rn(o.sequenceNumber)).next(()=>this.an.ln(e,o=>r.rn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(em)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),em):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,o,c,h,g,E,T;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(c=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(T=Date.now(),Mg()<=Mu.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(g-h)+`ms\n\tRemoved ${c} targets in `+(E-g)+`ms\n\tRemoved ${N} documents in `+(T-E)+`ms\nTotal Duration: ${T-M}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:N})))}}class EE{constructor(e,t){this.db=e,this.garbageCollector=new OT(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,o)=>t(o))}addReference(e,t,r){return s_(e,r)}removeReference(e,t,r){return s_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return s_(e,t)}wn(e,t){return function(r,o){let c=!1;return rm(r).Wt(h=>i_(r,h,o).next(g=>(g&&(c=!0),ge.resolve(!g)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this._n(e,(h,g)=>{if(g<=t){const E=this.wn(e,h).next(T=>{if(!T)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,pt.min()),gs(e).delete([0,Yr(h.path)])))});o.push(E)}}).next(()=>ge.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return s_(e,t)}_n(e,t){const r=gs(e);let o,c=Hi.A;return r.Qt({index:Jr.documentTargetsIndex},([h,g],{path:E,sequenceNumber:T})=>{0===h?(c!==Hi.A&&t(new ze(Wa(o)),c),c=T,o=E):c=Hi.A}).next(()=>{c!==Hi.A&&t(new ze(Wa(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function s_(n,e){return gs(n).put((r=n.currentSequenceNumber,new Jr(0,Yr(e.path),r)));var r}class Dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Bu(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return Ng(this.inner)}}class im{constructor(){this.changes=new Dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tb{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yu(e).put(sm(t),r)}removeEntry(e,t){const r=Yu(e),o=sm(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Yu(e).get(sm(t)).next(r=>this.gn(t,r))}yn(e,t){return Yu(e).get(sm(t)).next(r=>({document:this.gn(t,r),size:tm(r)}))}getEntries(e,t){let r=fs();return this.pn(e,t,(o,c)=>{const h=this.gn(o,c);r=r.insert(o,h)}).next(()=>r)}In(e,t){let r=fs(),o=new Un(ze.comparator);return this.pn(e,t,(c,h)=>{const g=this.gn(c,h);r=r.insert(c,g),o=o.insert(c,tm(h))}).next(()=>({documents:r,En:o}))}pn(e,t,r){if(t.isEmpty())return ge.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let h=c.getNext();return Yu(e).Qt({range:o},(g,E,T)=>{const M=ze.fromSegments(g);for(;h&&ze.comparator(h,M)<0;)r(h,null),h=c.getNext();h&&h.isEqual(M)&&(r(h,E),h=c.hasNext()?c.getNext():null),h?T.Ut(h.path.toArray()):T.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAll(e,t,r){let o=fs();const c=t.length+1,h={};if(r.isEqual(pt.min())){const g=t.toArray();h.range=IDBKeyRange.lowerBound(g)}else{const g=t.toArray(),E=Yg(r);h.range=IDBKeyRange.lowerBound([g,E],!0),h.index=Bn.collectionReadTimeIndex}return Yu(e).Qt(h,(g,E,T)=>{if(g.length!==c)return;const M=this.gn(ze.fromSegments(g),E);t.isPrefixOf(M.key.path)?o=o.insert(M.key,M):T.done()}).next(()=>o)}newChangeBuffer(e){return new nb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IE(e).get(ra.key).next(t=>(mt(!!t),t))}mn(e,t){return IE(e).put(ra.key,t)}gn(e,t){if(t){const r=dE(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(pt.min()))return r}return wn.newInvalidDocument(e)}}class nb extends im{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Dl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new hn((c,h)=>Ot(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const g=this.An.get(c);if(h.isValidDocument()){const E=hE(this.Tn.O,h);o=o.add(c.path.popLast()),r+=tm(E)-g,t.push(this.Tn.addEntry(e,c,E))}else if(r-=g,this.trackRemovals){const E=hE(this.Tn.O,h.convertToNoDocument(pt.min()));t.push(this.Tn.addEntry(e,c,E))}else t.push(this.Tn.removeEntry(e,c))}),o.forEach(c=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Tn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:o})=>(o.forEach((c,h)=>{this.An.set(c,h)}),r))}}function IE(n){return Or(n,ra.store)}function Yu(n){return Or(n,Bn.store)}function sm(n){return n.path.toArray()}class rb{constructor(e){this.O=e}kt(e,t,r,o){const c=new Zg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore(li.store),(g=e).createObjectStore(qu.store,{keyPath:qu.keyPath}),g.createObjectStore(fn.store,{keyPath:fn.keyPath,autoIncrement:!0}).createIndex(fn.userMutationsIndex,fn.userMutationsKeyPath,{unique:!0}),g.createObjectStore(Qr.store),DE(e),function(g){g.createObjectStore(Bn.store)}(e));let h=ge.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore(Jr.store),g.deleteObjectStore(Gi.store),g.deleteObjectStore(qi.store)}(e),DE(e)),h=h.next(()=>function(g){const E=g.store(qi.store),T=new qi(0,0,pt.min().toTimestamp(),0);return E.put(qi.key,T)}(c))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(g,E){return E.store(fn.store).qt().next(T=>{g.deleteObjectStore(fn.store),g.createObjectStore(fn.store,{keyPath:fn.keyPath,autoIncrement:!0}).createIndex(fn.userMutationsIndex,fn.userMutationsKeyPath,{unique:!0});const M=E.store(fn.store),N=T.map(H=>M.put(H));return ge.waitFor(N)})}(e,c))),h=h.next(()=>{!function(g){g.createObjectStore(Ka.store,{keyPath:Ka.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Rn(c))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore(ra.store)}(e),this.Pn(c)))),r<7&&o>=7&&(h=h.next(()=>this.bn(c))),r<8&&o>=8&&(h=h.next(()=>this.vn(e,c))),r<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e),function(g){const E=g.objectStore(Bn.store);E.createIndex(Bn.readTimeIndex,Bn.readTimeIndexPath,{unique:!1}),E.createIndex(Bn.collectionReadTimeIndex,Bn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.Vn(c))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore(bo.store,{keyPath:bo.keyPath})})(e),function(g){g.createObjectStore(nh.store,{keyPath:nh.keyPath})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(g){const E=g.createObjectStore(Nr.store,{keyPath:Nr.keyPath});E.createIndex(Nr.collectionPathOverlayIndex,Nr.collectionPathOverlayIndexPath,{unique:!1}),E.createIndex(Nr.collectionGroupOverlayIndex,Nr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>{!function(g){g.createObjectStore(zi.store,{keyPath:zi.keyPath,autoIncrement:!0}).createIndex(zi.collectionGroupIndex,zi.collectionGroupIndexPath,{unique:!1}),g.createObjectStore(Ys.store,{keyPath:Ys.keyPath}).createIndex(Ys.sequenceNumberIndex,Ys.sequenceNumberIndexPath,{unique:!1}),g.createObjectStore(ps.store,{keyPath:ps.keyPath}).createIndex(ps.documentKeyIndex,ps.documentKeyIndexPath,{unique:!1})}(e)})),h}Pn(e){let t=0;return e.store(Bn.store).Qt((r,o)=>{t+=tm(o)}).next(()=>{const r=new ra(t);return e.store(ra.store).put(ra.key,r)})}Rn(e){const t=e.store(qu.store),r=e.store(fn.store);return t.qt().next(o=>ge.forEach(o,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.qt(fn.userMutationsIndex,h).next(g=>ge.forEach(g,E=>{mt(E.userId===c.userId);const T=zu(this.O,E);return ih(e,c.userId,T).next(()=>{})}))}))}bn(e){const t=e.store(Jr.store),r=e.store(Bn.store);return e.store(qi.store).get(qi.key).next(o=>{const c=[];return r.Qt((h,g)=>{const E=new Lt(h),T=[0,Yr(E)];c.push(t.get(T).next(M=>M?ge.resolve():t.put(new Jr(0,Yr(E),o.highestListenSequenceNumber))))}).next(()=>ge.waitFor(c))})}vn(e,t){e.createObjectStore(fl.store,{keyPath:fl.keyPath});const r=t.store(fl.store),o=new r_,c=h=>{if(o.add(h)){const g=h.lastSegment(),E=h.popLast();return r.put({collectionId:g,parent:Yr(E)})}};return t.store(Bn.store).Qt({jt:!0},(h,g)=>{const E=new Lt(h);return c(E.popLast())}).next(()=>t.store(Qr.store).Qt({jt:!0},([h,g,E],T)=>{const M=Wa(g);return c(M.popLast())}))}Vn(e){const t=e.store(Gi.store);return t.Qt((r,o)=>{const c=_l(o),h=Jv(this.O,c);return t.put(h)})}}function DE(n){n.createObjectStore(Jr.store,{keyPath:Jr.keyPath}).createIndex(Jr.documentTargetsIndex,Jr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Gi.store,{keyPath:Gi.keyPath}).createIndex(Gi.queryTargetsIndexName,Gi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(qi.store)}const o_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class a_{constructor(e,t,r,o,c,h,g,E,T,M,N=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=c,this.window=h,this.document=g,this.Dn=T,this.Cn=M,this.schemaVersion=N,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=H=>Promise.resolve(),!a_.Vt())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EE(this,o),this.Bn=t+"main",this.O=new Yv(E),this.Ln=new To(this.Bn,this.schemaVersion,new rb(this.O)),this.Un=new NT(this.referenceDelegate,this.O),this.qn=new tb(this.O),this.Kn=new e_,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===M&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,o_);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Hi(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qu(e).put(new Ka(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(gl(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return zf(e).get(li.key).next(t=>ge.resolve(this.ts(t)))}es(e){return Qu(e).delete(this.clientId)}ns(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Or(r,Ka.store);return o.qt().next(c=>{const h=e.rs(c,18e5),g=c.filter(E=>-1===h.indexOf(E));return ge.forEach(g,E=>o.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ge.resolve(!0):zf(e).get(li.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,o_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qu(e).qt().next(r=>void 0===this.rs(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[li.store,Ka.store],t=>{const r=new lE(t,Hi.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>Qu(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return nm.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new JD(e)}getDocumentOverlayCache(e){return t_.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",c=13===(h=this.schemaVersion)?Gv:12===h?oE:11===h?Hv:void Xe();var h;let g;return this.Ln.runTransaction(e,o,c,E=>(g=new lE(E,this.Nn?this.Nn.next():Hi.A),"readwrite-primary"===t?this.Jn(g).next(T=>!!T||this.Yn(g)).next(T=>{if(!T)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new xe(de.FAILED_PRECONDITION,aE);return r(g)}).next(T=>this.Zn(g).next(()=>T)):this._s(g).next(()=>r(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}_s(e){return zf(e).get(li.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,o_)})}Zn(e){const t=new li(this.clientId,this.allowTabSynchronization,Date.now());return zf(e).put(li.key,t)}static Vt(){return To.Vt()}Xn(e){const t=zf(e);return t.get(li.key).next(r=>this.ts(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete(li.key)):ge.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,Mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zf(n){return Or(n,li.store)}function Qu(n){return Or(n,Ka.store)}function om(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bE{constructor(e,t){this.progress=e,this.ws=t}}class TE{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}Is(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Rs(e,t.path):Bg(t)?this.Ps(e,t,r):this.bs(e,t,r);var o}Rs(e,t){return this.ys(e,new ze(t)).next(r=>{let o=Fv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ps(e,t,r){const o=t.collectionGroup;let c=Fv();return this.indexManager.getCollectionParents(e,o).next(h=>ge.forEach(h,g=>{const E=(T=t,M=g.child(o),new ta(M,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,M;return this.bs(e,E,r).next(T=>{T.forEach((M,N)=>{c=c.insert(M,N)})})}).next(()=>c))}bs(e,t,r){let o;return this.qn.getAll(e,t.path,r).next(c=>(o=c,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(c=>{for(const h of c)for(const g of h.mutations){const E=g.key;let T=o.get(E);null==T&&(T=wn.newInvalidDocument(E),o=o.insert(E,T)),Rv(g,T,h.localWriteTime),T.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((c,h)=>{il(t,h)||(o=o.remove(c))}),o))}}class am{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=o}static Ss(e,t){let r=Qt(),o=Qt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new am(e,t.fromCache,r,o)}}class u_{Ds(e){this.Cs=e}As(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(pt.min())?this.Ns(e,t):this.Cs.Es(e,o).next(c=>{const h=this.xs(t,c);return(Vg(t)||ls(t))&&this.ks(t.limitType,h,o,r)?this.Ns(e,t):(Mg()<=Mu.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ff(t)),this.Cs.As(e,t,r).next(g=>(h.forEach(E=>{g=g.insert(E.key,E)}),g)))});var c}xs(e,t){let r=new hn(Fw(e));return t.forEach((o,c)=>{il(e,c)&&(r=r.add(c))}),r}ks(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ns(e,t){return Mg()<=Mu.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ff(t)),this.Cs.As(e,t,pt.min())}}class CE{constructor(e,t,r,o){this.persistence=e,this.Os=t,this.O=o,this.Ms=new Un(Ot),this.$s=new Dl(c=>Hd(c),Ln),this.Fs=pt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new TE(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function AE(n,e,t,r){return new CE(n,e,t,r)}function c_(n,e){return l_.apply(this,arguments)}function l_(){return l_=(0,_e.Z)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.gs.getAllMutationBatches(r).next(c=>(o=c,t.Ls(e),t.gs.getAllMutationBatches(r))).next(c=>{const h=[],g=[];let E=Qt();for(const T of o){h.push(T.batchId);for(const M of T.mutations)E=E.add(M.key)}for(const T of c){g.push(T.batchId);for(const M of T.mutations)E=E.add(M.key)}return t.Us.Es(r,E).next(T=>({qs:T,removedBatchIds:h,addedBatchIds:g}))})})}),l_.apply(this,arguments)}function ib(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Bs.newChangeBuffer({trackRemovals:!0});return function(h,g,E,T){const M=E.batch,N=M.keys();let H=ge.resolve();return N.forEach(Q=>{H=H.next(()=>T.getEntry(g,Q)).next(we=>{const Ve=E.docVersions.get(Q);mt(null!==Ve),we.version.compareTo(Ve)<0&&(M.applyToRemoteDocument(we,E),we.isValidDocument()&&(we.setReadTime(E.commitVersion),T.addEntry(we)))})}),H.next(()=>h.gs.removeMutationBatch(g,M))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,o))})}function SE(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function sb(n,e){const t=He(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach((T,M)=>{const N=o.get(M);if(!N)return;g.push(t.Un.removeMatchingKeys(c,T.removedDocuments,M).next(()=>t.Un.addMatchingKeys(c,T.addedDocuments,M)));let H=N.withSequenceNumber(c.currentSequenceNumber);var Q,we,Ve;e.targetMismatches.has(M)?H=H.withResumeToken(Zn.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):T.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(T.resumeToken,r)),o=o.insert(M,H),we=H,Ve=T,(0===(Q=N).resumeToken.approximateByteSize()||we.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&g.push(t.Un.updateTargetData(c,H))});let E=fs();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(ah(c,h,e.documentUpdates).next(T=>{E=T})),!r.isEqual(pt.min())){const T=t.Un.getLastRemoteSnapshotVersion(c).next(M=>t.Un.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(T)}return ge.waitFor(g).next(()=>h.apply(c)).next(()=>t.Us.Ts(c,E)).next(()=>E)}).then(c=>(t.Ms=o,c))}function ah(n,e,t){let r=Qt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=fs();return t.forEach((h,g)=>{const E=o.get(h);g.isNoDocument()&&g.version.isEqual(pt.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!E.isValidDocument()||g.version.compareTo(E.version)>0||0===g.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",g.version)}),c})}function ob(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Ju(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Un.getTargetData(r,e).next(c=>c?(o=c,ge.resolve(o)):t.Un.allocateTargetId(r).next(h=>(o=new Za(e,h,0,r.currentSequenceNumber),t.Un.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ms.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function Ti(n,e,t){return d_.apply(this,arguments)}function d_(){return d_=(0,_e.Z)(function*(n,e,t){const r=He(n),o=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!gl(h))throw h;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.$s.delete(o.target)}),d_.apply(this,arguments)}function uh(n,e,t){const r=He(n);let o=pt.min(),c=Qt();return r.persistence.runTransaction("Execute query","readonly",h=>function(g,E,T){const M=He(g),N=M.$s.get(T);return void 0!==N?ge.resolve(M.Ms.get(N)):M.Un.getTargetData(E,T)}(r,h,Zs(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(h,g.targetId).next(E=>{c=E})}).next(()=>r.Os.As(h,e,t?o:pt.min(),t?c:Qt())).next(g=>({documents:g,Ks:c})))}function ch(n,e){const t=He(n),r=He(t.Un),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Tt(c,e).next(h=>h?h.target:null))}function xE(n){const e=He(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const h=He(r);let g=fs(),E=Yg(c);const T=Yu(o),M=IDBKeyRange.lowerBound(E,!0);return T.Qt({index:Bn.readTimeIndex,range:M},(N,H)=>{const Q=dE(h.O,H);g=g.insert(Q.key,Q),E=H.readTime}).next(()=>({ws:g,readTime:Qv(E)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function h_(){return h_=(0,_e.Z)(function*(n){const e=He(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Yu(r);let c=pt.min();return o.Qt({index:Bn.readTimeIndex,reverse:!0},(h,g,E)=>{g.readTime&&(c=Qv(g.readTime)),E.done()}).next(()=>c)}(t)).then(t=>{e.Fs=t})}),h_.apply(this,arguments)}function lh(){return lh=(0,_e.Z)(function*(n,e,t,r){const o=He(n);let c=Qt(),h=fs();for(const T of t){const M=e.Gs(T.metadata.name);T.document&&(c=c.add(M));const N=e.js(T);N.setReadTime(e.Qs(T.metadata.readTime)),h=h.insert(M,N)}const g=o.Bs.newChangeBuffer({trackRemovals:!0}),E=yield Ju(o,(T=r,Zs(zd(Lt.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>ah(T,g,h).next(M=>(g.apply(T),M)).next(M=>o.Un.removeMatchingKeysForTargetId(T,E.targetId).next(()=>o.Un.addMatchingKeys(T,c,E.targetId)).next(()=>o.Us.Ts(T,M)).next(()=>M)))}),lh.apply(this,arguments)}function ub(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,_e.Z)(function*(n,e,t=Qt()){const r=yield Ju(n,Zs(Hf(e.bundledQuery))),o=He(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const h=Rr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Kn.saveNamedQuery(c,e);const g=r.withResumeToken(Zn.EMPTY_BYTE_STRING,h);return o.Ms=o.Ms.insert(g.targetId,g),o.Un.updateTargetData(c,g).next(()=>o.Un.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.Un.addMatchingKeys(c,t,r.targetId)).next(()=>o.Kn.saveNamedQuery(c,e))})}),f_.apply(this,arguments)}class ME{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ge.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Rr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:Hf(r.bundledQuery),readTime:Rr(r.readTime)}),ge.resolve();var r}}class RE{constructor(){this.overlays=new Un(ze.comparator),this.Hs=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(o=>{this.Yt(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Hs.get(r);return void 0!==o&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Hs.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const o=new Map,c=t.length+1,h=new ze(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const E=g.getNext().value,T=E.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&E.largestBatchId>r&&o.set(E.getKey(),E)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new Un((T,M)=>T-M);const h=this.overlays.getIterator();for(;h.hasNext();){const T=h.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let M=c.get(T.largestBatchId);null===M&&(M=new Map,c=c.insert(T.largestBatchId,M)),M.set(T.getKey(),T)}}const g=new Map,E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((T,M)=>g.set(M,T)),!(g.size>=o)););return ge.resolve(g)}Yt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);null!==o&&this.Hs.get(o.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new Zv(t,r));let c=this.Hs.get(t);void 0===c&&(c=new Set,this.Hs.set(t,c)),c.add(r.key)}}class Wf{constructor(){this.Js=new hn(fr.Ys),this.Xs=new hn(fr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new fr(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new fr(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new ze(new Lt([])),r=new fr(t,e),o=new fr(t,e+1),c=[];return this.Xs.forEachInRange([r,o],h=>{this.ei(h),c.push(h.key)}),c}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new ze(new Lt([])),r=new fr(t,e),o=new fr(t,e+1);let c=Qt();return this.Xs.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new fr(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return ze.comparator(e.key,t.key)||Ot(e.oi,t.oi)}static Zs(e,t){return Ot(e.oi,t.oi)||ze.comparator(e.key,t.key)}}class cb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new hn(fr.Ys)}checkEmpty(e){return ge.resolve(0===this.gs.length)}addMutationBatch(e,t,r,o){const c=this.ci;this.ci++;const h=new Wv(c,t,r,o);this.gs.push(h);for(const g of o)this.ui=this.ui.add(new fr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ge.resolve(h)}lookupMutationBatch(e,t){return ge.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.hi(t+1),c=o<0?0:o;return ge.resolve(this.gs.length>c?this.gs[c]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ge.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fr(t,0),o=new fr(t,Number.POSITIVE_INFINITY),c=[];return this.ui.forEachInRange([r,o],h=>{const g=this.ai(h.oi);c.push(g)}),ge.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Ot);return t.forEach(o=>{const c=new fr(o,0),h=new fr(o,Number.POSITIVE_INFINITY);this.ui.forEachInRange([c,h],g=>{r=r.add(g.oi)})}),ge.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;ze.isDocumentKey(c)||(c=c.child(""));const h=new fr(new ze(c),0);let g=new hn(Ot);return this.ui.forEachWhile(E=>{const T=E.key.path;return!!r.isPrefixOf(T)&&(T.length===o&&(g=g.add(E.oi)),!0)},h),ge.resolve(this.li(g))}li(e){const t=[];return e.forEach(r=>{const o=this.ai(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return ge.forEach(t.mutations,o=>{const c=new fr(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new fr(t,0),o=this.ui.firstAfterOrEqual(r);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ge.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class lb{constructor(e){this.di=e,this.docs=new Un(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,h=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=fs();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():wn.newInvalidDocument(o))}),ge.resolve(r)}getAll(e,t,r){let o=fs();const c=new ze(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:g,value:{document:E}}=h.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||E.readTime.compareTo(r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return ge.resolve(o)}_i(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PT(this)}getSize(e){return ge.resolve(this.size)}}class PT extends im{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Tn.addEntry(e,o)):this.Tn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class p_{constructor(e){this.persistence=e,this.wi=new Dl(t=>Hd(t),Ln),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.mi=0,this.gi=new Wf,this.targetCount=0,this.yi=Il.He()}forEachTarget(e,t){return this.wi.forEach((r,o)=>t(o)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),ge.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Il(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Ze(t),ge.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.wi.forEach((h,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.wi.delete(h),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ge.waitFor(c).next(()=>o)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),ge.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.gi.containsKey(t))}}class g_{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Hi(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new p_(this),this.indexManager=new yE,this.qn=new lb(r=>this.referenceDelegate.Ii(r)),this.O=new Yv(t),this.Kn=new ME(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new cb(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new NE(this.Nn.next());return this.referenceDelegate.Ei(),r(o).next(c=>this.referenceDelegate.Ti(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,t){return ge.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class NE extends qv{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Ri=new Wf,this.Pi=null}static bi(e){return new Kf(e)}get vi(){if(this.Pi)return this.Pi;throw Xe()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(o=>this.vi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.vi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.vi,r=>{const o=ze.fromPath(r);return this.Vi(e,o).next(c=>{c||t.removeEntry(o,pt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function cm(n,e){return`firestore_clients_${n}_${e}`}function OE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function m_(n,e){return`firestore_targets_${n}_${e}`}class lm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Si(e,t,r){const o=JSON.parse(r);let c,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new xe(o.error.code,o.error.message))),h?new lm(e,t,o.state,c):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new xe(r.error.code,r.error.message))),c?new Zf(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=Uv();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=Pg(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return o?new Yf(e,c):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qf{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qf(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dm{constructor(){this.activeTargetIds=Uv()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y_{constructor(e,t,r,o,c){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Un(Ot),this.started=!1,this.$i=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Fi=cm(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new dm),this.Li=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(g){return`firestore_bundle_loaded_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.ds();for(const o of t){if(o===e.xi)continue;const c=e.getItem(cm(e.persistenceKey,o));if(c){const h=Yf.Si(o,c);h&&(e.Mi=e.Mi.insert(h.clientId,h))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const o=e.Qi(r);o&&e.Wi(o)}for(const o of e.$i)e.Oi(o);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(m_(this.persistenceKey,e));if(r){const o=Zf.Si(e,r);o&&(t=o.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(m_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ji(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const o=t.er(r.key);return t.nr(o,null)}{const o=t.sr(r.key,r.newValue);if(o)return t.nr(o.clientId,o)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const o=t.ir(r.key,r.newValue);if(o)return t.rr(o)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const o=t.cr(r.key,r.newValue);if(o)return t.ur(o)}}else if(r.key===t.Ki){if(null!==r.newValue){const o=t.Qi(r.newValue);if(o)return t.Wi(o)}}else if(r.key===t.Bi){const o=function(c){let h=Hi.A;if(null!=c)try{const g=JSON.parse(c);mt("number"==typeof g),h=g}catch(g){lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue);o!==Hi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const o=new lm(this.currentUser,e,t,r),c=OE(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Di())}Ji(e){const t=OE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const o=m_(this.persistenceKey,e),c=new Zf(e,t,r);this.setItem(o,c.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return Yf.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),o=Number(r[1]);return lm.Si(new Wr(void 0!==r[2]?r[2]:null),o,t)}cr(e,t){const r=this.qi.exec(e),o=Number(r[1]);return Zf.Si(o,t)}Qi(e){return Qf.Si(e)}rr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),o=this.zi(this.Mi),c=this.zi(r),h=[],g=[];return c.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{c.has(E)||g.push(E)}),this.syncEngine.dr(h,g).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=Uv();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class v_{constructor(){this._r=new dm,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new dm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class PE{mr(e){}shutdown(){}}class kE{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const FE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class LE{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class db extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,o,c){const h=this.$r(e,t);Pe("RestConnection","Sending: ",h,r);const g={};return this.Fr(g,o,c),this.Br(e,h,g,r).then(E=>(Pe("RestConnection","Received: ",E),E),E=>{throw Cf("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}Lr(e,t,r,o,c){return this.Mr(e,t,r,o,c)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+el,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}$r(e,t){return`${this.kr}/v1/${t}:${FE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,o){return new Promise((c,h)=>{const g=new Dw;g.listenOnce(Iw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Sg.NO_ERROR:const T=g.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(T)),c(T);break;case Sg.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),h(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Sg.HTTP_ERROR:const M=g.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',M,"response text:",g.getResponseText()),M>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Q){const we=Q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(we)>=0?we:de.UNKNOWN}(N.status);h(new xe(H,N.message))}else h(new xe(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new xe(de.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);g.send(t,"POST",E,r,15)})}Ur(e,t,r){const o=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ww(),h=Ew(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new mD({})),this.Fr(g.initMessageHeaders,t,r),(0,Mt.uI)()||(0,Mt.b$)()||(0,Mt.d)()||(0,Mt.w1)()||(0,Mt.Mn)()||(0,Mt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Pe("Connection","Creating WebChannel: "+E,g);const T=c.createWebChannel(E,g);let M=!1,N=!1;const H=new LE({Ar:we=>{N?Pe("Connection","Not sending because WebChannel is closed:",we):(M||(Pe("Connection","Opening WebChannel transport."),T.open(),M=!0),Pe("Connection","WebChannel sending:",we),T.send(we))},Rr:()=>T.close()}),Q=(we,Ve,Je)=>{we.listen(Ve,Rt=>{try{Je(Rt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return Q(T,xg.EventType.OPEN,()=>{N||Pe("Connection","WebChannel transport opened.")}),Q(T,xg.EventType.CLOSE,()=>{N||(N=!0,Pe("Connection","WebChannel transport closed"),H.Cr())}),Q(T,xg.EventType.ERROR,we=>{N||(N=!0,Cf("Connection","WebChannel transport errored:",we),H.Cr(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),Q(T,xg.EventType.MESSAGE,we=>{var Ve;if(!N){const Je=we.data[0];mt(!!Je);const Rt=Je,Bt=Rt.error||(null===(Ve=Rt[0])||void 0===Ve?void 0:Ve.error);if(Bt){Pe("Connection","WebChannel received error:",Bt);const $n=Bt.status;let Pt=function(tu){const HI=nr[tu];if(void 0!==HI)return Pv(HI)}($n),xn=Bt.message;void 0===Pt&&(Pt=de.INTERNAL,xn="Unknown error status: "+$n+" with message "+Bt.message),N=!0,H.Cr(new xe(Pt,xn)),T.close()}else Pe("Connection","WebChannel received:",Je),H.Nr(Je)}}),Q(h,gD.STAT_EVENT,we=>{we.stat===dv.PROXY?Pe("Connection","Detected buffering proxy"):we.stat===dv.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Dr()},0),H}}function __(){return"undefined"!=typeof window?window:null}function hm(){return"undefined"!=typeof document?document:null}function pr(n){return new Vn(n,!0)}class Xu{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=o,this.Gr=c,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,o,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class UE{constructor(e,t,r,o,c,h,g,E){this.Sn=e,this.Xr=r,this.Zr=o,this.eo=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Xu(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,_e.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,_e.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.no===t&&this.po(r,o)},r=>{e(()=>{const o=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(o)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(o=>{r(()=>this.Io(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}uo(){var e=this;this.state=5,this.ro.Hr((0,_e.Z)(function*(){e.state=0,e.start()}))}Io(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hb extends UE{constructor(e,t,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.O=c}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function Wg(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Xe(),o=e.targetChange.targetIds||[],c=function(E,T){return E.N?(mt(void 0===T||"string"==typeof T),Zn.fromBase64String(T||"")):(mt(void 0===T||T instanceof Uint8Array),Zn.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(E){const T=void 0===E.code?de.UNKNOWN:Pv(E.code);return new xe(T,E.message||"")}(h);t=new Ww(r,o,c,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Do(n,r.document.name),c=Rr(r.document.updateTime),h=new Zr({mapValue:{fields:r.document.fields}}),g=wn.newFoundDocument(o,c,h);t=new Vv(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Do(n,r.document),c=r.readTime?Rr(r.readTime):pt.min(),h=wn.newNoDocument(o,c);t=new Vv([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Do(n,r.document);t=new Vv([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,c=new FD(r.count||0);t=new dt(r.targetId,c)}}var E;return t}(this.O,e),r=function(o){if(!("targetChange"in o))return pt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?pt.min():c.readTime?Rr(c.readTime):pt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=jf(this.O),t.addTarget=function(o,c){let h;const g=c.target;return h=Pf(g)?{documents:eE(o,g)}:{query:eh(o,g)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=Bv(o,c.resumeToken):c.snapshotVersion.compareTo(pt.min())>0&&(h.readTime=qg(o,c.snapshotVersion.toTimestamp())),h}(this.O,e);const r=function jD(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=jf(this.O),t.removeTarget=e,this.fo(t)}}class kT extends UE{constructor(e,t,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.O=c,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function Xw(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let c=Rr(r.updateTime?r.updateTime:o);return c.isEqual(pt.min())&&(c=Rr(o)),new OD(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.Vo(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=jf(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xd(this.O,r))};this.fo(t)}}class Jf extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=o,this.Co=!1}No(){if(this.Co)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.eo.Mr(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(de.UNKNOWN,o.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.eo.Lr(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(de.UNKNOWN,o.toString())})}terminate(){this.Co=!0}}class fb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(lr(t),this.Oo=!1):Pe("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class w_{constructor(e,t,r,o,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=c,this.jo.mr(g=>{r.enqueueAndForget((0,_e.Z)(function*(){var E;Ya(h)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,_e.Z)(function*(T){const M=He(T);M.Ko.add(4),yield dh(M),M.Qo.set("Unknown"),M.Ko.delete(4),yield Xf(M)}),function(T){return E.apply(this,arguments)})(h))}))}),this.Qo=new fb(r,o)}}function Xf(n){return fm.apply(this,arguments)}function fm(){return fm=(0,_e.Z)(function*(n){if(Ya(n))for(const e of n.Go)yield e(!0)}),fm.apply(this,arguments)}function dh(n){return E_.apply(this,arguments)}function E_(){return E_=(0,_e.Z)(function*(n){for(const e of n.Go)yield e(!1)}),E_.apply(this,arguments)}function hh(n,e){const t=He(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),VE(t)?tp(t):rp(t).co()&&pm(t,e))}function fh(n,e){const t=He(n),r=rp(t);t.qo.delete(e),r.co()&&ep(t,e),0===t.qo.size&&(r.co()?r.ho():Ya(t)&&t.Qo.set("Unknown"))}function pm(n,e){n.Wo.Z(e.targetId),rp(n).Ao(e)}function ep(n,e){n.Wo.Z(e),rp(n).Ro(e)}function tp(n){n.Wo=new UD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),rp(n).start(),n.Qo.Mo()}function VE(n){return Ya(n)&&!rp(n).oo()&&n.qo.size>0}function Ya(n){return 0===He(n).Ko.size}function BE(n){n.Wo=void 0}function jE(n){return ph.apply(this,arguments)}function ph(){return ph=(0,_e.Z)(function*(n){n.qo.forEach((e,t)=>{pm(n,e)})}),ph.apply(this,arguments)}function $E(n,e){return I_.apply(this,arguments)}function I_(){return I_=(0,_e.Z)(function*(n,e){BE(n),VE(n)?(n.Qo.Bo(e),tp(n)):n.Qo.set("Unknown")}),I_.apply(this,arguments)}function D_(n,e,t){return np.apply(this,arguments)}function np(){return np=(0,_e.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Ww&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,c){const h=c.cause;for(const g of c.targetIds)o.qo.has(g)&&(yield o.remoteSyncer.rejectListen(g,h),o.qo.delete(g),o.Wo.removeTarget(g))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield b_(n,r)}else if(e instanceof Vv?n.Wo.ct(e):e instanceof dt?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(pt.min()))try{const r=yield SE(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const h=o.Wo.yt(c);return h.targetChanges.forEach((g,E)=>{if(g.resumeToken.approximateByteSize()>0){const T=o.qo.get(E);T&&o.qo.set(E,T.withResumeToken(g.resumeToken,c))}}),h.targetMismatches.forEach(g=>{const E=o.qo.get(g);if(!E)return;o.qo.set(g,E.withResumeToken(Zn.EMPTY_BYTE_STRING,E.snapshotVersion)),ep(o,g);const T=new Za(E.target,g,1,E.sequenceNumber);pm(o,T)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield b_(n,r)}var r}),np.apply(this,arguments)}function b_(n,e,t){return T_.apply(this,arguments)}function T_(){return T_=(0,_e.Z)(function*(n,e,t){if(!gl(e))throw e;n.Ko.add(1),yield dh(n),n.Qo.set("Offline"),t||(t=()=>SE(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Xf(n)}))}),T_.apply(this,arguments)}function HE(n,e){return e().catch(t=>b_(n,t,e))}function bl(n){return gm.apply(this,arguments)}function gm(){return gm=(0,_e.Z)(function*(n){const e=He(n),t=Tl(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;pb(e);)try{const o=yield ob(e.localStore,r);if(null===o){0===e.Uo.length&&t.ho();break}r=o.batchId,GE(e,o)}catch(o){yield b_(e,o)}C_(e)&&qE(e)}),gm.apply(this,arguments)}function pb(n){return Ya(n)&&n.Uo.length<10}function GE(n,e){n.Uo.push(e);const t=Tl(n);t.co()&&t.bo&&t.vo(e.mutations)}function C_(n){return Ya(n)&&!Tl(n).oo()&&n.Uo.length>0}function qE(n){Tl(n).start()}function gb(n){return mm.apply(this,arguments)}function mm(){return mm=(0,_e.Z)(function*(n){Tl(n).Do()}),mm.apply(this,arguments)}function mb(n){return ym.apply(this,arguments)}function ym(){return ym=(0,_e.Z)(function*(n){const e=Tl(n);for(const t of n.Uo)e.vo(t.mutations)}),ym.apply(this,arguments)}function zE(n,e,t){return vm.apply(this,arguments)}function vm(){return vm=(0,_e.Z)(function*(n,e,t){const r=n.Uo.shift(),o=Kv.from(r,e,t);yield HE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield bl(n)}),vm.apply(this,arguments)}function WE(n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,_e.Z)(function*(n,e){var t;e&&Tl(n).bo&&(yield(t=(0,_e.Z)(function*(r,o){if(Ov(c=o.code)&&c!==de.ABORTED){const h=r.Uo.shift();Tl(r).ao(),yield HE(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield bl(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),C_(n)&&qE(n)}),A_.apply(this,arguments)}function KE(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,_e.Z)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ya(t);t.Ko.add(3),yield dh(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Xf(t)}),ZE.apply(this,arguments)}function _m(n,e){return YE.apply(this,arguments)}function YE(){return YE=(0,_e.Z)(function*(n,e){const t=He(n);e?(t.Ko.delete(2),yield Xf(t)):e||(t.Ko.add(2),yield dh(t),t.Qo.set("Unknown"))}),YE.apply(this,arguments)}function rp(n){return n.zo||(n.zo=function(e,t,r){const o=He(e);return o.No(),new hb(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:jE.bind(null,n),vr:$E.bind(null,n),To:D_.bind(null,n)}),n.Go.push(function(){var e=(0,_e.Z)(function*(t){t?(n.zo.ao(),VE(n)?tp(n):n.Qo.set("Unknown")):(yield n.zo.stop(),BE(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Tl(n){return n.Ho||(n.Ho=function(e,t,r){const o=He(e);return o.No(),new kT(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:gb.bind(null,n),vr:WE.bind(null,n),So:mb.bind(null,n),Vo:zE.bind(null,n)}),n.Go.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Ho.ao(),yield bl(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class QE{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,c){const h=Date.now()+r,g=new QE(e,t,h,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(n,e){if(lr("AsyncQueue",`${e}: ${n}`),gl(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class sp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Fv(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new sp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yb{constructor(){this.Jo=new Un(ze.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):Xe():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class op{constructor(e,t,r,o,c,h,g,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new op(e,t,sp.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class wm{constructor(){this.Xo=void 0,this.listeners=[]}}class FT{constructor(){this.queries=new Dl(e=>kw(e),kf),this.onlineState="Unknown",this.Zo=new Set}}function Em(n,e){return ap.apply(this,arguments)}function ap(){return ap=(0,_e.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new wm),o)try{c.Xo=yield t.onListen(r)}catch(h){const g=ip(h,`Initialization of query '${Ff(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,c),c.listeners.push(e),e.tc(t.onlineState),c.Xo&&e.ec(c.Xo)&&bm(t)}),ap.apply(this,arguments)}function Im(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,_e.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Dm.apply(this,arguments)}function LT(n,e){const t=He(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const g of h.listeners)g.ec(o)&&(r=!0);h.Xo=o}}r&&bm(t)}function S_(n,e,t){const r=He(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function bm(n){n.Zo.forEach(e=>{e.next()})}class Tm{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new op(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class JE{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class vb{constructor(e){this.O=e}Gs(e){return Do(this.O,e)}js(e){return e.metadata.exists?Jw(this.O,e.document,!1):wn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Rr(e)}}class XE{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=eI(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new vb(this.O);for(const o of e)if(o.metadata.queries){const c=r.Gs(o.metadata.name);for(const h of o.metadata.queries){const g=(t.get(h)||Qt()).add(c);t.set(h,g)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function um(n,e,t,r){return lh.apply(this,arguments)}(e.localStore,new vb(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const o of e.queries)yield ub(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new bE(Object.assign({},e.progress),t)})()}}function eI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Cm{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class _b{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=Qt(),this.mutatedKeys=Qt(),this.mc=Fw(e),this.gc=new sp(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new yb,o=t?t.gc:this.gc;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const E=Vg(this.query)&&o.size===this.query.limit?o.last():null,T=ls(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const H=o.get(M),Q=il(this.query,N)?N:null,we=!!H&&this.mutatedKeys.has(H.key),Ve=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Je=!1;H&&Q?H.data.isEqual(Q.data)?we!==Ve&&(r.track({type:3,doc:Q}),Je=!0):this.Tc(H,Q)||(r.track({type:2,doc:Q}),Je=!0,(E&&this.mc(Q,E)>0||T&&this.mc(Q,T)<0)&&(g=!0)):!H&&Q?(r.track({type:0,doc:Q}),Je=!0):H&&!Q&&(r.track({type:1,doc:H}),Je=!0,(E||T)&&(g=!0)),Je&&(Q?(h=h.add(Q),c=Ve?c.add(M):c.delete(M)):(h=h.delete(M),c=c.delete(M)))}),Vg(this.query)||ls(this.query))for(;h.size>this.query.limit;){const M=Vg(this.query)?h.last():h.first();h=h.delete(M.key),c=c.delete(M.key),r.track({type:1,doc:M})}return{gc:h,Ec:r,ks:g,mutatedKeys:c}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const c=e.Ec.Yo();c.sort((T,M)=>function(N,H){const Q=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return Q(N)-Q(H)}(T.type,M.type)||this.mc(T.doc,M.doc)),this.Ac(r);const h=t?this.Rc():[],g=0===this.wc.size&&this.current?1:0,E=g!==this._c;return this._c=g,0!==c.length||E?{snapshot:new op(this.query,e.gc,o,c,e.mutatedKeys,0===g,E,!1),Pc:h}:{Pc:h}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new yb,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=Qt(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new tI(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new Cm(r))}),t}vc(e){this.dc=e.Ks,this.wc=Qt();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return op.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class UT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VT{constructor(e){this.key=e,this.Sc=!1}}class wb{constructor(e,t,r,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Dc={},this.Cc=new Dl(g=>kw(g),kf),this.Nc=new Map,this.xc=new Set,this.kc=new Un(ze.comparator),this.Oc=new Map,this.Mc=new Wf,this.$c={},this.Fc=new Map,this.Bc=Il.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function Eb(n,e){return x_.apply(this,arguments)}function x_(){return x_=(0,_e.Z)(function*(n,e){const t=q_(n);let r,o;const c=t.Cc.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.Vc();else{const h=yield Ju(t.localStore,Zs(e));t.isPrimaryClient&&hh(t.remoteStore,h);const g=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield nI(t,e,r,"current"===g)}return o}),x_.apply(this,arguments)}function nI(n,e,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,_e.Z)(function*(n,e,t,r){n.Uc=(M,N,H)=>{return(Q=(0,_e.Z)(function*(we,Ve,Je,Rt){let Bt=Ve.view.Ic(Je);Bt.ks&&(Bt=yield uh(we.localStore,Ve.query,!1).then(({documents:xn})=>Ve.view.Ic(xn,Bt)));const $n=Rt&&Rt.targetChanges.get(Ve.targetId),Pt=Ve.view.applyChanges(Bt,we.isPrimaryClient,$n);return U_(we,Ve.targetId,Pt.Pc),Pt.snapshot}),function(we,Ve,Je,Rt){return Q.apply(this,arguments)})(n,M,N,H);var Q};const o=yield uh(n.localStore,e,!0),c=new _b(e,o.Ks),h=c.Ic(o.documents),g=Yd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=c.applyChanges(h,n.isPrimaryClient,g);U_(n,t,E.Pc);const T=new UT(e,t,c);return n.Cc.set(e,T),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),E.snapshot}),M_.apply(this,arguments)}function R_(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,_e.Z)(function*(n,e){const t=He(n),r=t.Cc.get(e),o=t.Nc.get(r.targetId);if(o.length>1)return t.Nc.set(r.targetId,o.filter(c=>!kf(c,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ti(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fh(t.remoteStore,r.targetId),gh(t,r.targetId)}).catch(Ku))):(gh(t,r.targetId),yield Ti(t.localStore,r.targetId,!0))}),N_.apply(this,arguments)}function O_(){return O_=(0,_e.Z)(function*(n,e,t){const r=z_(n);try{const o=yield function(c,h){const g=He(c),E=hr.now(),T=h.reduce((N,H)=>N.add(H.key),Qt());let M;return g.persistence.runTransaction("Locally write mutations","readwrite",N=>g.Us.Es(N,T).next(H=>{M=H;const Q=[];for(const we of h){const Ve=kD(we,M.get(we.key));null!=Ve&&Q.push(new ul(we.key,Ve,wv(Ve.value.mapValue),tr.exists(!0)))}return g.gs.addMutationBatch(N,E,Q,h)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,g){let E=c.$c[c.currentUser.toKey()];E||(E=new Un(Ot)),E=E.insert(h,g),c.$c[c.currentUser.toKey()]=E}(r,o.batchId,t),yield Qa(r,o.changes),yield bl(r.remoteStore)}catch(o){const c=ip(o,"Failed to persist write");t.reject(c)}}),O_.apply(this,arguments)}function Am(n,e){return P_.apply(this,arguments)}function P_(){return P_=(0,_e.Z)(function*(n,e){const t=He(n);try{const r=yield sb(t.localStore,e);e.targetChanges.forEach((o,c)=>{const h=t.Oc.get(c);h&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Sc=!0:o.modifiedDocuments.size>0?mt(h.Sc):o.removedDocuments.size>0&&(mt(h.Sc),h.Sc=!1))}),yield Qa(t,r,e)}catch(r){yield Ku(r)}}),P_.apply(this,arguments)}function rI(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Cc.forEach((c,h)=>{const g=h.view.tc(e);g.snapshot&&o.push(g.snapshot)}),function(c,h){const g=He(c);g.onlineState=h;let E=!1;g.queries.forEach((T,M)=>{for(const N of M.listeners)N.tc(h)&&(E=!0)}),E&&bm(g)}(r.eventManager,e),o.length&&r.Dc.To(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k_(n,e,t){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,_e.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Oc.get(e),c=o&&o.key;if(c){let h=new Un(ze.comparator);h=h.insert(c,wn.newNoDocument(c,pt.min()));const g=Qt().add(c),E=new Zd(pt.min(),new Map,new hn(Ot),h,g);yield Am(r,E),r.kc=r.kc.remove(c),r.Oc.delete(e),V_(r)}else yield Ti(r.localStore,e,!1).then(()=>gh(r,e,t)).catch(Ku)}),Sm.apply(this,arguments)}function iI(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,_e.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const o=yield ib(t.localStore,e);ms(t,r,null),up(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qa(t,o)}catch(o){yield Ku(o)}}),F_.apply(this,arguments)}function sI(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,_e.Z)(function*(n,e,t){const r=He(n);try{const o=yield function(c,h){const g=He(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let T;return g.gs.lookupMutationBatch(E,h).next(M=>(mt(null!==M),T=M.keys(),g.gs.removeMutationBatch(E,M))).next(()=>g.gs.performConsistencyCheck(E)).next(()=>g.Us.Es(E,T))})}(r.localStore,e);ms(r,e,t),up(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qa(r,o)}catch(o){yield Ku(o)}}),xm.apply(this,arguments)}function L_(){return L_=(0,_e.Z)(function*(n,e){const t=He(n);Ya(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=He(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>h.gs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Fc.get(r)||[];o.push(e),t.Fc.set(r,o)}catch(r){const o=ip(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),L_.apply(this,arguments)}function up(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function ms(n,e,t){const r=He(n);let o=r.$c[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.$c[r.currentUser.toKey()]=o}}function gh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||Db(n,r)})}function Db(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(fh(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),V_(n))}function U_(n,e,t){for(const r of t)r instanceof Cm?(n.Mc.addReference(r.key,e),oI(n,r)):r instanceof tI?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||Db(n,r.key)):Xe()}function oI(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.xc.add(r),V_(n))}function V_(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new ze(Lt.fromString(e)),r=n.Bc.next();n.Oc.set(r,new VT(t)),n.kc=n.kc.insert(t,r),hh(n.remoteStore,new Za(Zs(zd(t.path)),r,2,Hi.A))}}function Qa(n,e,t){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,_e.Z)(function*(n,e,t){const r=He(n),o=[],c=[],h=[];var g;r.Cc.isEmpty()||(r.Cc.forEach((g,E)=>{h.push(r.Uc(E,e,t).then(T=>{if(T){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,T.fromCache?"not-current":"current"),o.push(T);const M=am.Ss(E.targetId,T);c.push(M)}}))}),yield Promise.all(h),r.Dc.To(o),yield(g=(0,_e.Z)(function*(E,T){const M=He(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ge.forEach(T,H=>ge.forEach(H.vs,Q=>M.persistence.referenceDelegate.addReference(N,H.targetId,Q)).next(()=>ge.forEach(H.Vs,Q=>M.persistence.referenceDelegate.removeReference(N,H.targetId,Q)))))}catch(N){if(!gl(N))throw N;Pe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of T){const H=N.targetId;if(!N.fromCache){const Q=M.Ms.get(H),Ve=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);M.Ms=M.Ms.insert(H,Ve)}}}),function(E,T){return g.apply(this,arguments)})(r.localStore,c))}),Mm.apply(this,arguments)}function bb(n,e){return aI.apply(this,arguments)}function aI(){return aI=(0,_e.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield c_(t.localStore,e);t.currentUser=e,(o=t).Fc.forEach(h=>{h.forEach(g=>{g.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qa(t,r.qs)}var o}),aI.apply(this,arguments)}function uI(n,e){const t=He(n),r=t.Oc.get(e);if(r&&r.Sc)return Qt().add(r.key);{let o=Qt();const c=t.Nc.get(e);if(!c)return o;for(const h of c){const g=t.Cc.get(h);o=o.unionWith(g.view.yc)}return o}}function cI(n,e){return B_.apply(this,arguments)}function B_(){return B_=(0,_e.Z)(function*(n,e){const t=He(n),r=yield uh(t.localStore,e.query,!0),o=e.view.vc(r);return t.isPrimaryClient&&U_(t,e.targetId,o.Pc),o}),B_.apply(this,arguments)}function Tb(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,_e.Z)(function*(n){const e=He(n);return xE(e.localStore).then(t=>Qa(e,t))}),Rm.apply(this,arguments)}function j_(n,e,t,r){return cp.apply(this,arguments)}function cp(){return cp=(0,_e.Z)(function*(n,e,t,r){const o=He(n),c=yield function(h,g){const E=He(h),T=He(E.gs);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>T.Ge(M,g).next(N=>N?E.Us.Es(M,N):ge.resolve(null)))}(o.localStore,e);var g;null!==c?("pending"===t?yield bl(o.remoteStore):"acknowledged"===t||"rejected"===t?(ms(o,e,r||null),up(o,e),g=e,He(He(o.localStore).gs).Qe(g)):Xe(),yield Qa(o,c)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),cp.apply(this,arguments)}function $_(){return $_=(0,_e.Z)(function*(n,e){const t=He(n);if(q_(t),z_(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield H_(t,r.toArray());t.Lc=!0,yield _m(t.remoteStore,!0);for(const c of o)hh(t.remoteStore,c)}else if(!1===e&&!1!==t.Lc){const r=[];let o=Promise.resolve();t.Nc.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(gh(t,h),Ti(t.localStore,h,!0))),fh(t.remoteStore,h)}),yield o,yield H_(t,r),function(c){const h=He(c);h.Oc.forEach((g,E)=>{fh(h.remoteStore,E)}),h.Mc.ii(),h.Oc=new Map,h.kc=new Un(ze.comparator)}(t),t.Lc=!1,yield _m(t.remoteStore,!1)}}),$_.apply(this,arguments)}function H_(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,_e.Z)(function*(n,e,t){const r=He(n),o=[],c=[];for(const h of e){let g;const E=r.Nc.get(h);if(E&&0!==E.length){g=yield Ju(r.localStore,Zs(E[0]));for(const T of E){const M=r.Cc.get(T),N=yield cI(r,M);N.snapshot&&c.push(N.snapshot)}}else{const T=yield ch(r.localStore,h);g=yield Ju(r.localStore,T),yield nI(r,dI(T),h,!1)}o.push(g)}return r.Dc.To(c),o}),Nm.apply(this,arguments)}function dI(n){return Io(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Cb(n){const e=He(n);return He(He(e.localStore).persistence).ds()}function BT(n,e,t,r){return hI.apply(this,arguments)}function hI(){return hI=(0,_e.Z)(function*(n,e,t,r){const o=He(n);if(o.Lc)Pe("SyncEngine","Ignoring unexpected query state notification.");else if(o.Nc.has(e))switch(t){case"current":case"not-current":{const c=yield xE(o.localStore),h=Zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qa(o,c,h);break}case"rejected":yield Ti(o.localStore,e,!0),gh(o,e,r);break;default:Xe()}}),hI.apply(this,arguments)}function fI(n,e,t){return G_.apply(this,arguments)}function G_(){return G_=(0,_e.Z)(function*(n,e,t){const r=q_(n);if(r.Lc){for(const o of e){if(r.Nc.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const c=yield ch(r.localStore,o),h=yield Ju(r.localStore,c);yield nI(r,dI(c),h.targetId,!1),hh(r.remoteStore,h)}for(const o of t)r.Nc.has(o)&&(yield Ti(r.localStore,o,!1).then(()=>{fh(r.remoteStore,o),gh(r,o)}).catch(Ku))}}),G_.apply(this,arguments)}function q_(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Am.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k_.bind(null,e),e.Dc.To=LT.bind(null,e.eventManager),e.Dc.qc=S_.bind(null,e.eventManager),e}function z_(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class Ab{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.O=pr(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return AE(this.persistence,new u_,e.initialUser,this.O)}jc(e){return new g_(Kf.bi,this.O)}Gc(e){return new v_}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sb extends Ab{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield function ab(n){return h_.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield z_(r.zc.syncEngine),yield bl(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return AE(this.persistence,new u_,e.initialUser,this.O)}Qc(e){return new eb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xr.withCacheSize(this.cacheSizeBytes):Xr.DEFAULT;return new a_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,__(),hm(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new v_}}class $T extends Sb{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.zc.syncEngine;r.sharedClientState instanceof y_&&(r.sharedClientState.syncEngine={hr:j_.bind(null,o),lr:BT.bind(null,o),dr:fI.bind(null,o),ds:Cb.bind(null,o),ar:Tb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var c=(0,_e.Z)(function*(h){yield function lI(n,e){return $_.apply(this,arguments)}(r.zc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Gc(e){const t=__();if(!y_.Vt(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pI{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>rI(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=bb.bind(null,r.syncEngine),yield _m(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FT}createDatastore(e){const t=pr(e.databaseInfo.databaseId),r=new db(e.databaseInfo);return new Jf(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=g=>rI(this.syncEngine,g,0),h=kE.Vt()?new kE:new PE,new w_(t,r,o,c,h);var t,r,o,c,h}createSyncEngine(e,t){return function(r,o,c,h,g,E,T){const M=new wb(r,o,c,h,g,E);return T&&(M.Lc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=He(t);Pe("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield dh(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gI(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Cl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xb{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new dr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),o=Number(r);isNaN(o)&&e.eu(`length string (${r}) is not valid number`);const c=yield e.nu(o);return new JE(JSON.parse(c),t.length+o)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,_e.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Mb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(c,h){const g=He(c),E=jf(g.O)+"/documents",T={documents:h.map(Q=>Qd(g.O,Q))},M=yield g.Lr("BatchGetDocuments",E,T),N=new Map;M.forEach(Q=>{const we=function BD(n,e){return"found"in e?function(t,r){mt(!!r.found);const o=Do(t,r.found.name),c=Rr(r.found.updateTime),h=new Zr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(o,c,h)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const o=Do(t,r.missing),c=Rr(r.readTime);return wn.newNoDocument(o,c)}(n,e):Xe()}(g.O,Q);N.set(we.key.toString(),we)});const H=[];return h.forEach(Q=>{const we=N.get(Q.toString());mt(!!we),H.push(we)}),H}),function(c,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=ze.fromPath(o);e.mutations.push(new Nv(c,e.precondition(c)))}),yield(r=(0,_e.Z)(function*(o,c){const h=He(o),g=jf(h.O)+"/documents",E={writes:c.map(T=>Xd(h.O,T))};yield h.Mr("Commit",g,E)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pt.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mI{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.ru=5,this.ro=new Xu(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,_e.Z)(function*(){const t=new Mb(e.datastore),r=e.cu(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.uu(c)}))}).catch(o=>{e.uu(o)})}))}cu(e){try{const t=this.updateFunction(e);return!$u(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ov(t)}return!1}}class Al{constructor(e,t,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Wr.UNAUTHENTICATED,this.clientId=Cw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(g){Pe("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ip(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function W_(n,e){return lp.apply(this,arguments)}function lp(){return lp=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(c){r.isEqual(c)||(yield c_(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),lp.apply(this,arguments)}function Om(n,e){return K_.apply(this,arguments)}function K_(){return K_=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dp(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>KE(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,c)=>KE(e.remoteStore,c)),n.onlineComponents=e}),K_.apply(this,arguments)}function dp(n){return hp.apply(this,arguments)}function hp(){return hp=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield W_(n,new Ab)),n.offlineComponents}),hp.apply(this,arguments)}function Sl(n){return yI.apply(this,arguments)}function yI(){return yI=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield Om(n,new pI)),n.onlineComponents}),yI.apply(this,arguments)}function Rb(n){return dp(n).then(e=>e.persistence)}function vI(n){return dp(n).then(e=>e.localStore)}function Nb(n){return Sl(n).then(e=>e.remoteStore)}function Pm(n){return Sl(n).then(e=>e.syncEngine)}function mh(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,_e.Z)(function*(n){const e=yield Sl(n),t=e.eventManager;return t.onListen=Eb.bind(null,e.syncEngine),t.onUnlisten=R_.bind(null,e.syncEngine),t}),Z_.apply(this,arguments)}function Y_(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,c,h,g,E){const T=new Cl({next:N=>{c.enqueueAndForget(()=>Im(o,M));const H=N.docs.has(h);!H&&N.fromCache?E.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&g&&"server"===g.source?E.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),M=new Tm(zd(h.path),T,{includeMetadataChanges:!0,uc:!0});return Em(o,M)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}function EI(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,c,h,g,E){const T=new Cl({next:N=>{c.enqueueAndForget(()=>Im(o,M)),N.fromCache&&"server"===g.source?E.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),M=new Tm(h,T,{includeMetadataChanges:!0,uc:!0});return Em(o,M)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}const J_=new Map;function fp(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DI(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bI(n){if(!ze.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fb(n){if(ze.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Ut(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=X_(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TI(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,DI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CI({}),this._settingsFrozen=!1,e instanceof qa?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _D;switch(t.type){case"gapi":const r=t.client;return mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ED(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=J_.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),J_.delete(e),t.terminate())}(this),Promise.resolve()}}class En{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class Ja extends Ci{constructor(e,t,r){super(e,t,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ze(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function AI(n,e,...t){if(n=(0,Mt.m9)(n),fp("collection","path",e),n instanceof km){const r=Lt.fromString(e,...t);return Fb(r),new Ja(n,null,r)}{if(!(n instanceof En||n instanceof Ja))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return Fb(r),new Ja(n.firestore,null,r)}}function e0(n,e,...t){if(n=(0,Mt.m9)(n),1===arguments.length&&(e=Cw.R()),fp("doc","path",e),n instanceof km){const r=Lt.fromString(e,...t);return bI(r),new En(n,null,new ze(r))}{if(!(n instanceof En||n instanceof Ja))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return bI(r),new En(n.firestore,n instanceof Ja?n.converter:null,new ze(r))}}function Lb(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),(n instanceof En||n instanceof Ja)&&(e instanceof En||e instanceof Ja)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ub(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),n instanceof Ci&&e instanceof Ci&&n.firestore===e.firestore&&kf(n._query,e._query)&&n.converter===e.converter}class i{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Xu(this,"async_queue_retry"),this.yu=()=>{const t=hm();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=hm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=hm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new dr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,_e.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!gl(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,lr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const o=QE.createAndSchedule(this,e,t,r,c=>this.Tu(c));return this.du.push(o),o}pu(){this._u&&Xe()}verifyOperationInProgress(){}Au(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function s(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class a{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class l extends km{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new i,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||I(this),this._firestoreClient.terminate()}}function w(n){return n._firestoreClient||I(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function I(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gv(n._databaseId,c,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var c,g;n._firestoreClient=new Al(n._authCredentials,n._appCheckCredentials,n._queue,r)}function k(n,e,t){const r=new dr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield W_(n,t),yield Om(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===de.FAILED_PRECONDITION||c.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function ut(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _t{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Zn.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ys{constructor(e){this._methodName=e}}class yh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const t0=/^__.*__$/;class n0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ul(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lf(e,this.data,t,this.fieldTransforms)}}class Fm{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ul(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class vh{constructor(e,t,r,o,c,h){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=o,void 0===c&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new vh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.Nu(e),o}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.vu(),o}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return xI(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Lm(this.Vu)&&t0.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class r0{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||pr(e)}Fu(e,t,r,o=!1){return new vh({Vu:e,methodName:t,$u:r,path:Kr.emptyPath(),Cu:!1,Mu:o},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Xa(n){const e=n._freezeSettings(),t=pr(n._databaseId);return new r0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _h(n,e,t,r,o,c={}){const h=n.Fu(c.merge||c.mergeFields?2:0,e,t,o);$b("Data must be an object, but it was:",h,r);const g=KT(r,h);let E,T;if(c.merge)E=new Xo(h.fieldMask),T=h.fieldTransforms;else if(c.mergeFields){const M=[];for(const N of c.mergeFields){const H=Hb(e,N,t);if(!h.contains(H))throw new xe(de.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);YT(M,H)||M.push(H)}E=new Xo(M),T=h.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,T=h.fieldTransforms;return new n0(new Zr(g),E,T)}class s0 extends ys{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function zT(n,e,t){return new vh({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Vb extends ys{_toFieldTransform(e){return new Wd(e.path,new ol)}isEqual(e){return e instanceof Vb}}class aA extends ys{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=zT(this,e,!0),r=this.Bu.map(c=>pp(c,t)),o=new na(r);return new Wd(e.path,o)}isEqual(e){return this===e}}class uA extends ys{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=zT(this,e,!0),r=this.Bu.map(c=>pp(c,t)),o=new Gu(r);return new Wd(e.path,o)}isEqual(e){return this===e}}class cA extends ys{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new al(e.O,Tv(e.O,this.Lu));return new Wd(e.path,t)}isEqual(e){return this===e}}function Bb(n,e,t,r){const o=n.Fu(1,e,t);$b("Data must be an object, but it was:",o,r);const c=[],h=Zr.empty();Bu(r,(E,T)=>{const M=SI(e,E,t);T=(0,Mt.m9)(T);const N=o.xu(M);if(T instanceof s0)c.push(M);else{const H=pp(T,N);null!=H&&(c.push(M),h.set(M,H))}});const g=new Xo(c);return new Fm(h,g,o.fieldTransforms)}function jb(n,e,t,r,o,c){const h=n.Fu(1,e,t),g=[Hb(e,r,t)],E=[o];if(c.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<c.length;H+=2)g.push(Hb(e,c[H])),E.push(c[H+1]);const T=[],M=Zr.empty();for(let H=g.length-1;H>=0;--H)if(!YT(T,g[H])){const Q=g[H];let we=E[H];we=(0,Mt.m9)(we);const Ve=h.xu(Q);if(we instanceof s0)T.push(Q);else{const Je=pp(we,Ve);null!=Je&&(T.push(Q),M.set(Q,Je))}}const N=new Xo(T);return new Fm(M,N,h.fieldTransforms)}function WT(n,e,t,r=!1){return pp(t,n.Fu(r?4:3,e))}function pp(n,e){if(ZT(n=(0,Mt.m9)(n)))return $b("Unsupported field value:",e,n),KT(n,e);if(n instanceof ys)return function(t,r){if(!Lm(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const h of t){let g=pp(h,r.ku(c));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tv(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=hr.fromDate(t);return{timestampValue:qg(r.O,o)}}if(t instanceof hr){const o=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qg(r.O,o)}}if(t instanceof yh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jn)return{bytesValue:Bv(r.O,t._byteString)};if(t instanceof En){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Ou(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${X_(t)}`)}(n,e)}function KT(n,e){const t={};return Ng(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bu(n,(r,o)=>{const c=pp(o,e.Du(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function ZT(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof yh||n instanceof jn||n instanceof En||n instanceof ys)}function $b(n,e,t){if(!ZT(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=X_(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Hb(n,e,t){if((e=(0,Mt.m9)(e))instanceof _t)return e._internalPath;if("string"==typeof e)return SI(n,e);throw xI("Field path arguments must be of type string or ",n,!1,void 0,t)}const lA=new RegExp("[~\\*/\\[\\]]");function SI(n,e,t){if(e.search(lA)>=0)throw xI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _t(...e.split("."))._internalPath}catch(r){throw xI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xI(n,e,t,r,o){const c=r&&!r.isEmpty(),h=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new xe(de.INVALID_ARGUMENT,g+n+E)}function YT(n,e){return n.some(t=>t.isEqual(e))}class o0{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dA extends o0{data(){return super.data()}}function MI(n,e){return"string"==typeof e?SI(n,e):e instanceof _t?e._internalPath:e._delegate._internalPath}class gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xl extends o0{constructor(e,t,r,o,c,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends xl{data(e={}){return super.data(e)}}class wh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new gp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new gp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new gp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const g=new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new gp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,T=-1;return 0!==h.type&&(E=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),T=c.indexOf(h.doc.key)),{type:hA(h.type),doc:g,oldIndex:E,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function QT(n,e){return n instanceof xl&&e instanceof xl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wh&&e instanceof wh&&n._firestore===e._firestore&&Ub(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function JT(n){if(ls(n)&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function Eh(n,...e){for(const t of e)n=t._apply(n);return n}class fA extends u0{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Xa(e.firestore),r=function(o,c,h,g,E,T,M){let N;if(E.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){iC(M,T);const Q=[];for(const we of M)Q.push(rC(g,o,we));N={arrayValue:{values:Q}}}else N=rC(g,o,M)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||iC(M,T),N=WT(h,"where",M,"in"===T||"not-in"===T);const H=bi.create(E,T,N);return function(Q,we){if(we.S()){const Je=hs(Q);if(null!==Je&&!Je.isEqual(we.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Je.toString()}' and '${we.field.toString()}'`);const Rt=ds(Q);null!==Rt&&sC(0,we.field,Rt)}const Ve=function(Je,Rt){for(const Bt of Je.filters)if(Rt.indexOf(Bt.op)>=0)return Bt.op;return null}(Q,function(Je){switch(Je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(we.op));if(null!==Ve)throw new xe(de.INVALID_ARGUMENT,Ve===we.op?`Invalid query. You cannot use more than one '${we.op.toString()}' filter.`:`Invalid query. You cannot use '${we.op.toString()}' filters with '${Ve.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Ci(e.firestore,e.converter,function(o,c){const h=o.filters.concat([c]);return new ta(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class gA extends u0{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new qd(o,c);return function(g,E){if(null===ds(g)){const T=hs(g);null!==T&&sC(0,T,E.field)}}(r,h),h}(e._query,this.Uu,this.Gu);return new Ci(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new ta(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class XT extends u0{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Ci(e.firestore,e.converter,Pw(e._query,this.ju,this.Qu))}}class eC extends u0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=nC(e,this.type,this.Wu,this.zu);return new Ci(e.firestore,e.converter,(o=t,new ta((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class tC extends u0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=nC(e,this.type,this.Wu,this.zu);return new Ci(e.firestore,e.converter,(o=t,new ta((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function nC(n,e,t,r){if(t[0]=(0,Mt.m9)(t[0]),t[0]instanceof o0)return function(o,c,h,g,E){if(!g)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const T=[];for(const M of rl(o))if(M.field.isKeyField())T.push(kg(c,g.key));else{const N=g.data.field(M.field);if(Sf(N))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=M.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}T.push(N)}return new nl(T,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Xa(n.firestore);return function(c,h,g,E,T,M){const N=c.explicitOrderBy;if(T.length>N.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Q=0;Q<T.length;Q++){const we=T[Q];if(N[Q].field.isKeyField()){if("string"!=typeof we)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof we}`);if(!Bg(c)&&-1!==we.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${we}' contains a slash.`);const Ve=c.path.child(Lt.fromString(we));if(!ze.isDocumentKey(Ve))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Je=new ze(Ve);H.push(kg(h,Je))}else{const Ve=WT(g,E,we);H.push(Ve)}}return new nl(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function rC(n,e,t){if("string"==typeof(t=(0,Mt.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bg(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!ze.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kg(n,new ze(r))}if(t instanceof En)return kg(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X_(t)}.`)}function iC(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sC(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gb{convertValue(e,t="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Bu(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new yh(dn(e.latitude),dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bD(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xf(e));default:return null}}convertTimestamp(e){const t=ju(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);mt(iE(r));const o=new qa(r.get(1),r.get(3)),c=new ze(r.popFirst(5));return o.isEqual(t)||lr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function RI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DA extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}class oC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xa(e)}set(e,t,r){this._verifyNotCommitted();const o=Ih(e,this._firestore),c=RI(o.converter,t,r),h=_h(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,tr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Ih(e,this._firestore);let h;return h="string"==typeof(t=(0,Mt.m9)(t))||t instanceof _t?jb(this._dataReader,"WriteBatch.update",c._key,t,r,o):Bb(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ih(e,this._firestore);return this._mutations=this._mutations.concat(new Uf(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,e){if((n=(0,Mt.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mp extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function aC(n,e,t){n=Ut(n,En);const r=Ut(n.firestore,l),o=RI(n.converter,e,t);return Um(r,[_h(Xa(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,tr.none())])}function uC(n,e,t,...r){n=Ut(n,En);const o=Ut(n.firestore,l),c=Xa(o);let h;return h="string"==typeof(e=(0,Mt.m9)(e))||e instanceof _t?jb(c,"updateDoc",n._key,e,t,r):Bb(c,"updateDoc",n._key,e),Um(o,[h.toMutation(n._key,tr.exists(!0))])}function cC(n,...e){var t,r,o;n=(0,Mt.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||s(e[h])||(c=e[h],h++);const g={includeMetadataChanges:c.includeMetadataChanges};if(s(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,T,M;if(n instanceof En)T=Ut(n.firestore,l),M=zd(n._key.path),E={next:N=>{e[h]&&e[h](qb(T,n,N))},error:e[h+1],complete:e[h+2]};else{const N=Ut(n,Ci);T=Ut(N.firestore,l),M=N._query;const H=new mp(T);E={next:Q=>{e[h]&&e[h](new wh(T,H,N,Q))},error:e[h+1],complete:e[h+2]},JT(n._query)}return function(N,H,Q,we){const Ve=new Cl(we),Je=new Tm(H,Ve,Q);return N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Em(yield mh(N),Je)})),()=>{Ve.Jc(),N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Im(yield mh(N),Je)}))}}(w(T),M,g,E)}function Um(n,e){return function(t,r){const o=new dr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Co(n,e,t){return O_.apply(this,arguments)}(yield Pm(t),r,o)})),o.promise}(w(n),e)}function qb(n,e,t){const r=t.docs.get(e._key),o=new mp(n);return new xl(n,o,e._key,r,new gp(t.hasPendingWrites,t.fromCache),e.converter)}class OA extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xa(e)}get(e){const t=Ih(e,this._firestore),r=new DA(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const c=o[0];if(c.isFoundDocument())return new o0(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new o0(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=Ih(e,this._firestore),c=RI(o.converter,t,r),h=_h(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const c=Ih(e,this._firestore);let h;return h="string"==typeof(t=(0,Mt.m9)(t))||t instanceof _t?jb(this._dataReader,"Transaction.update",c._key,t,r,o):Bb(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=Ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ih(e,this._firestore),r=new mp(this._firestore);return super.get(e).then(o=>new xl(this._firestore,r,t._key,o._document,new gp(!1,!1),t.converter))}}function zb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function dC(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function hC(){if(!function Sw(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){el=Uc.SDK_VERSION,(0,Uc._registerComponent)(new nf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new l(o,new wD(t.getProvider("auth-internal")),new Rg(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,Uc.registerVersion)(bw,"3.4.5",n),(0,Uc.registerVersion)(bw,"3.4.5","esm2017")}();class c0{constructor(e){this._delegate=e}static fromBase64String(e){return hC(),new c0(jn.fromBase64String(e))}static fromUint8Array(e){return dC(),new c0(jn.fromUint8Array(e))}toBase64(){return hC(),this._delegate.toBase64()}toUint8Array(){return dC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wb(n){return function $A(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class HA{enableIndexedDbPersistence(e,t){return function A(n,e){ut(n=Ut(n,l));const t=w(n),r=n._freezeSettings(),o=new pI;return k(t,o,new Sb(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function S(n){ut(n=Ut(n,l));const e=w(n),t=n._freezeSettings(),r=new pI;return k(e,r,new $T(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function V(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!To.Vt())return Promise.resolve();const o=r+"main";yield To.delete(o)}),function(r){return t.apply(this,arguments)})(om(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function GT(n,e,t,r={}){var o;const c=(n=Ut(n,km))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Cf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=Wr.MOCK_USER;else{h=(0,Mt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Wr(E)}n._authCredentials=new Vd(new vD(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function ye(n){return function Ob(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield Rb(n),t=yield Nb(n);return e.setNetworkEnabled(!0),function(r){const o=He(r);return o.Ko.delete(0),Xf(o)}(t)}))}(w(n=Ut(n,l)))}(this._delegate)}disableNetwork(){return function ke(n){return function Pb(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield Rb(n),t=yield Nb(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const c=He(o);c.Ko.add(0),yield dh(c),c.Qo.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(w(n=Ut(n,l)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function K(n){return function(e){const t=new dr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function Ib(n,e){return L_.apply(this,arguments)}(yield Pm(e),t)})),t.promise}(w(n=Ut(n,l)))}(this._delegate)}onSnapshotsInSync(e){return function NA(n,e){return function kb(n,e){const t=new Cl(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield mh(n),o=t,He(r).Zo.add(o),void o.next();var r,o})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield mh(n),o=t,void He(r).Zo.delete(o);var r,o}))}}(w(n=Ut(n,l)),s(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vm(this,AI(this._delegate,e))}catch(t){throw vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ia(this,e0(this._delegate,e))}catch(t){throw vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function qT(n,e){if(n=Ut(n,km),fp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ci(n,null,(t=e,new ta(Lt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function PA(n,e){return function II(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,Sl(o).then(c=>c.datastore));var o;new mI(n.asyncQueue,r,e,t).run()})),t.promise}(w(n=Ut(n,l)),t=>e(new OA(n,t)))}(this._delegate,t=>e(new pC(this,t)))}batch(){return w(this._delegate),new gC(new oC(this._delegate,e=>Um(this._delegate,e)))}loadBundle(e){return function Ke(n,e){const t=w(n=Ut(n,l)),r=new a;return function Q_(n,e,t,r){const o=function(c,h){let g;return g="string"==typeof c?(new TextEncoder).encode(c):c,E=function(E,T){if(E instanceof Uint8Array)return gI(E,T);if(E instanceof ArrayBuffer)return gI(new Uint8Array(E),T);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new xb(E,h);var E}(t,pr(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function jT(n,e,t){const r=He(n);var o;(o=(0,_e.Z)(function*(c,h,g){try{const E=yield h.getMetadata();if(yield function(H,Q){const we=He(H),Ve=Rr(Q.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",Je=>we.Kn.getBundleMetadata(Je,Q.id)).then(Je=>!!Je&&Je.createTime.compareTo(Ve)>=0)}(c.localStore,E))return yield h.close(),void g._completeWith((H=E,{taskState:"Success",documentsLoaded:H.totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}));g._updateProgress(eI(E));const T=new XE(E,c.localStore,h.O);let M=yield h.Kc();for(;M;){const H=yield T.lc(M);H&&g._updateProgress(H),M=yield h.Kc()}const N=yield T.complete();yield Qa(c,N.ws,void 0),yield function(H,Q){const we=He(H);return we.persistence.runTransaction("Save bundle","readwrite",Ve=>we.Kn.saveBundleMetadata(Ve,Q))}(c.localStore,E),g._completeWith(N.progress)}catch(E){Cf("SyncEngine",`Loading bundle failed with ${E}`),g._failWith(E)}var H}),function(c,h,g){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Pm(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Te(n,e){return function HT(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=He(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Kn.getNamedQuery(c,r))}(yield vI(n),e)}))}(w(n=Ut(n,l)),e).then(t=>t?new Ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class NI extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new c0(new jn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ia.forKey(t,this.firestore,null)}}class pC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}get(e){const t=vp(e);return this._delegate.get(t).then(r=>new l0(this._firestore,new xl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=vp(e);return r?(zb("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=vp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}}class gC{constructor(e){this._delegate=e}set(e,t,r){const o=vp(e);return r?(zb("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=vp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new yp(e,new NI(e),t),o.set(t,c)),c}}yp.INSTANCES=new WeakMap;class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ia(t,new En(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new ia(t,new En(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vm(this.firestore,AI(this._delegate,e))}catch(t){throw vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.m9)(e))instanceof En&&Lb(this._delegate,e)}set(e,t){t=zb("DocumentReference.set",t);try{return t?aC(this._delegate,e,t):aC(this._delegate,e)}catch(r){throw vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uC(this._delegate,e):uC(this._delegate,e,t,...r)}catch(o){throw vs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function MA(n){return Um(Ut(n.firestore,l),[new Uf(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=mC(e),r=yC(e,o=>new l0(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return cC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function TA(n){n=Ut(n,En);const e=Ut(n.firestore,l),t=w(e),r=new mp(e);return function _I(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,c,h){try{const g=yield function(E,T){const M=He(E);return M.persistence.runTransaction("read document","readonly",N=>M.Us.ys(N,T))}(o,c);g.isFoundDocument()?h.resolve(g):g.isNoDocument()?h.resolve(null):h.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const E=ip(g,`Failed to get document '${c} from cache`);h.reject(E)}}),function(o,c,h){return r.apply(this,arguments)})(yield vI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new xl(e,r,n._key,o,new gp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function CA(n){n=Ut(n,En);const e=Ut(n.firestore,l);return Y_(w(e),n._key,{source:"server"}).then(t=>qb(e,n,t))}(this._delegate):function bA(n){n=Ut(n,En);const e=Ut(n.firestore,l);return Y_(w(e),n._key).then(t=>qb(e,n,t))}(this._delegate),t.then(r=>new l0(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function vs(n,e,t){return n.message=n.message.replace(e,t),n}function mC(n){for(const e of n)if("object"==typeof e&&!Wb(e))return e;return{}}function yC(n,e){var t,r;let o;return o=Wb(n[0])?n[0]:Wb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class l0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return QT(this._delegate,e._delegate)}}class d0 extends l0{data(e){const t=this._delegate.data(e);return function xT(n,e){n||Xe()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}where(e,t,r){try{return new _s(this.firestore,Eh(this._delegate,function pA(n,e,t){const r=e,o=MI("where",n);return new fA(o,r,t)}(e,t,r)))}catch(o){throw vs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,Eh(this._delegate,function mA(n,e="asc"){const t=e,r=MI("orderBy",n);return new gA(r,t)}(e,t)))}catch(r){throw vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,Eh(this._delegate,function yA(n){return TI("limit",n),new XT("limit",n,"F")}(e)))}catch(t){throw vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,Eh(this._delegate,function vA(n){return TI("limitToLast",n),new XT("limitToLast",n,"L")}(e)))}catch(t){throw vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,Eh(this._delegate,function _A(...n){return new eC("startAt",n,!0)}(...e)))}catch(t){throw vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,Eh(this._delegate,function wA(...n){return new eC("startAfter",n,!1)}(...e)))}catch(t){throw vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,Eh(this._delegate,function EA(...n){return new tC("endBefore",n,!1)}(...e)))}catch(t){throw vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,Eh(this._delegate,function IA(...n){return new tC("endAt",n,!0)}(...e)))}catch(t){throw vs(t,"endAt()","Query.endAt()")}}isEqual(e){return Ub(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function SA(n){n=Ut(n,Ci);const e=Ut(n.firestore,l),t=w(e),r=new mp(e);return function wI(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,c,h){try{const g=yield uh(o,c,!0),E=new _b(c,g.Ks),T=E.Ic(g.documents),M=E.applyChanges(T,!1);h.resolve(M.snapshot)}catch(g){const E=ip(g,`Failed to execute query '${c} against cache`);h.reject(E)}}),function(o,c,h){return r.apply(this,arguments)})(yield vI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new wh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function xA(n){n=Ut(n,Ci);const e=Ut(n.firestore,l),t=w(e),r=new mp(e);return EI(t,n._query,{source:"server"}).then(o=>new wh(e,r,n,o))}(this._delegate):function AA(n){n=Ut(n,Ci);const e=Ut(n.firestore,l),t=w(e),r=new mp(e);return JT(n._query),EI(t,n._query).then(o=>new wh(e,r,n,o))}(this._delegate),t.then(r=>new Kb(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mC(e),r=yC(e,o=>new Kb(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return cC(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}class qA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new d0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new d0(this._firestore,r))})}isEqual(e){return QT(this._delegate,e._delegate)}}class Vm extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ia(this.firestore,e):null}doc(e){try{return new ia(this.firestore,void 0===e?e0(this._delegate):e0(this._delegate,e))}catch(t){throw vs(t,"doc()","CollectionReference.doc()")}}add(e){return function RA(n,e){const t=Ut(n.firestore,l),r=e0(n),o=RI(n.converter,e);return Um(t,[_h(Xa(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ia(this.firestore,t))}isEqual(e){return Lb(this._delegate,e._delegate)}withConverter(e){return new Vm(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function vp(n){return Ut(n,En)}class Zb{constructor(...e){this._delegate=new _t(...e)}static documentId(){return new Zb(Kr.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.m9)(e))instanceof _t&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function FA(){return new Vb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function kA(){return new s0("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function LA(...n){return new aA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function UA(...n){return new uA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function VA(n){return new cA("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zA={Firestore:fC,GeoPoint:yh,Timestamp:hr,Blob:c0,Transaction:pC,WriteBatch:gC,DocumentReference:ia,DocumentSnapshot:l0,Query:_s,QueryDocumentSnapshot:d0,QuerySnapshot:Kb,CollectionReference:Vm,FieldPath:Zb,FieldValue:_p,setLogLevel:function GA(n){!function yD(n){Vu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function KA(n){(function WA(n,e){n.INTERNAL.registerComponent(new nf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},zA)))})(n,(e,t)=>new fC(e,t,new HA)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(vT.Z);var ZA=P(6451),OI=P(5363),YA=P(6063);class QA extends Oi.x{constructor(e=1/0,t=1/0,r=YA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:c,_windowTime:h}=this;t||(r.push(e),!o&&r.push(c.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,c=o.slice();for(let h=0;h<c.length&&!e.closed;h+=r?1:2)e.next(c[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,c=(o?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!o){const h=t.now();let g=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)g=E;g&&r.splice(0,g+1)}}}var JA=P(3099);function vC(n,e,t){var r,o;let c,h=!1;return n&&"object"==typeof n?(c=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,h=!!n.refCount,t=n.scheduler):c=null!=n?n:1/0,(0,JA.B)({connector:()=>new QA(c,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}function _C(n,e){return(0,uo.m)(e)?yn(()=>n,e):yn(()=>n)}var Yb=P(9468);P(5867);const EC=new Map,rS={activated:!1,tokenObservers:[]},iS={initialized:!1,enabled:!1};function di(n){return EC.get(n)||rS}function eu(n,e){EC.set(n,e)}function kI(){return iS}class cS{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Mt.BH,yield function lS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ws=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DC(n){if(!di(n).activated)throw ws.create("use-before-activation",{appName:n.name})}function eT(n,e){return tT.apply(this,arguments)}function tT(){return tT=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let h,g;try{h=yield fetch(n,c)}catch(N){throw ws.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw ws.create("fetch-status-error",{httpStatus:h.status});try{g=yield h.json()}catch(N){throw ws.create("fetch-parse-error",{originalErrorMessage:N.message})}const E=g.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const T=1e3*Number(E[1]),M=Date.now();return{token:g.attestationToken,expireTimeMillis:M+T,issuedAtTimeMillis:M}}),tT.apply(this,arguments)}function gS(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const h0="firebase-app-check-store";let UI=null;function TC(){return UI||(UI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ws.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(h0,{keyPath:"compositeKey"})}}catch(t){e(ws.create("storage-open",{originalErrorMessage:t.message}))}}),UI)}function nT(){return nT=(0,_e.Z)(function*(n,e){const r=(yield TC()).transaction(h0,"readwrite"),c=r.objectStore(h0).put({compositeKey:n,value:e});return new Promise((h,g)=>{c.onsuccess=E=>{h()},r.onerror=E=>{var T;g(ws.create("storage-set",{originalErrorMessage:null===(T=E.target.error)||void 0===T?void 0:T.message}))}})}),nT.apply(this,arguments)}const f0=new Mu.Yd("@firebase/app-check");function xC(n,e){return(0,Mt.hl)()?function _S(n,e){return function CC(n,e){return nT.apply(this,arguments)}(function SC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{f0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MC(){return kI().enabled}function RC(){return oT.apply(this,arguments)}function oT(){return oT=(0,_e.Z)(function*(){const n=kI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),oT.apply(this,arguments)}const TS={error:"UNKNOWN_ERROR"};function CS(n){return Mt.US.encodeString(JSON.stringify(n),!1)}function VI(n){return aT.apply(this,arguments)}function aT(){return aT=(0,_e.Z)(function*(n,e=!1){const t=n.app;DC(t);const r=di(t);let c,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&BI(E)&&(o=E)}if(!e&&o&&BI(o))return{token:o.token};let g,h=!1;if(MC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eT(gS(t,yield RC()),n.platformLoggerProvider).then(T=>(r.exchangeTokenPromise=void 0,T)),h=!0);const E=yield r.exchangeTokenPromise;return yield xC(t,E),eu(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?f0.warn(E.message):f0.error(E),c=E}return o?(g={token:o.token},eu(t,Object.assign(Object.assign({},r),{token:o})),yield xC(t,o)):g=SS(c),h&&OC(t,g),g}),aT.apply(this,arguments)}function cT(n,e){const t=di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function NC(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function AS(n){const{app:e}=n;return new cS((0,_e.Z)(function*(){let r;if(r=di(e).token?yield VI(n,!0):yield VI(n),r.error)throw r.error}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function OC(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function BI(n){return n.expireTimeMillis-Date.now()>0}function SS(n){return{token:CS(TS),error:n}}class xS{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)cT(this.app,t.next);return Promise.resolve()}}const jC="app-check-internal";!function HS(){(0,Uc._registerComponent)(new nf.wA("app-check",n=>function MS(n,e){return new xS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jC).initialize()})),(0,Uc._registerComponent)(new nf.wA(jC,n=>function RS(n){return{getToken:e=>VI(n,e),addTokenListener:e=>function uT(n,e,t,r){const{app:o}=n,c=di(o),h={next:t,error:r,type:e};if(eu(o,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&BI(c.token)){const g=c.token;Promise.resolve().then(()=>{t({token:g.token}),NC(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>NC(n))}(n,"INTERNAL",e),removeTokenListener:e=>cT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Uc.registerVersion)("@firebase/app-check","0.5.3")}();class fT{constructor(){return(0,zr.vb)("app-check")}}"undefined"!=typeof window&&window;var KS=P(127);const HC=new _.OlP("angularfire2.auth.use-emulator"),GC=new _.OlP("angularfire2.auth.settings"),qC=new _.OlP("angularfire2.auth.tenant-id"),zC=new _.OlP("angularfire2.auth.langugage-code"),WC=new _.OlP("angularfire2.auth.use-device-language"),KC=new _.OlP("angularfire.auth.persistence"),ZC=(n,e,t,r,o,c,h,g)=>(0,as.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,c&&E.useDeviceLanguage(),h)for(const[T,M]of Object.entries(h))E.settings[T]=M;return g&&E.setPersistence(g),E},[t,r,o,c,h,g]);let YC=(()=>{class n{constructor(t,r,o,c,h,g,E,T,M,N,H,Q){const we=new Oi.x,Ve=nt(void 0).pipe((0,OI.Q)(h.outsideAngular),yn(()=>c.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,3059)))),(0,Dt.U)(()=>(0,as.on)(t,c,r)),(0,Dt.U)(Je=>ZC(Je,c,g,T,M,N,E,H)),vC({bufferSize:1,refCount:!1}));if(or(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Ve.pipe(fo()).subscribe();const Rt=Ve.pipe(yn(Pt=>Pt.getRedirectResult().then(xn=>xn,()=>null)),zr.iC,vC({bufferSize:1,refCount:!1})),Bt=Ve.pipe(yn(Pt=>new Er.y(xn=>({unsubscribe:c.runOutsideAngular(()=>Pt.onAuthStateChanged(tu=>xn.next(tu),tu=>xn.error(tu),()=>xn.complete()))})))),$n=Ve.pipe(yn(Pt=>new Er.y(xn=>({unsubscribe:c.runOutsideAngular(()=>Pt.onIdTokenChanged(tu=>xn.next(tu),tu=>xn.error(tu),()=>xn.complete()))}))));this.authState=Rt.pipe(_C(Bt),(0,Yb.R)(h.outsideAngular),(0,OI.Q)(h.insideAngular)),this.user=Rt.pipe(_C($n),(0,Yb.R)(h.outsideAngular),(0,OI.Q)(h.insideAngular)),this.idToken=this.user.pipe(yn(Pt=>Pt?(0,nn.D)(Pt.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(yn(Pt=>Pt?(0,nn.D)(Pt.getIdTokenResult()):nt(null))),this.credential=(0,ZA.T)(Rt,we,this.authState.pipe(Pi(Pt=>!Pt))).pipe((0,Dt.U)(Pt=>(null==Pt?void 0:Pt.user)?Pt:null),(0,Yb.R)(h.outsideAngular),(0,OI.Q)(h.insideAngular))}return(0,as.pX)(this,Ve,c,{spy:{apply:(Je,Rt,Bt)=>{(Je.startsWith("signIn")||Je.startsWith("createUser"))&&Bt.then($n=>we.next($n))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(as.Dh),_.LFG(as.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(zr.HU),_.LFG(HC,8),_.LFG(GC,8),_.LFG(qC,8),_.LFG(zC,8),_.LFG(WC,8),_.LFG(KC,8),_.LFG(fT,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function QC(n,e){return function YS(n,e=S0.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function gT(n,e){return QC(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function $I(n,e){return gT(n,e).pipe(gi(void 0),Dy(),(0,Dt.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,g)=>{const E=o.find(M=>M.doc.ref.isEqual(h.ref)),T=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&T&&JSON.stringify(T.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:h}})}),c}))}function JC(n,e,t){return $I(n,t).pipe(Us((r,o)=>function JS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function XS(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),function x0(n,e=Bo.y){return n=null!=n?n:by,(0,mn.e)((t,r)=>{let o,c=!0;t.subscribe((0,Cn.x)(r,h=>{const g=e(h);(c||!n(o,g))&&(c=!1,o=g,r.next(h))}))})}(),(0,Dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function mT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function XC(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class eA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=$I(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(gi(void 0),Dy(),Pi(([r,o])=>o.length>0||!r),(0,Dt.U)(([r,o])=>o),zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Us((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XC(e);return JC(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zr.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(zr.iC)}add(e){return this.ref.add(e)}doc(e){return new tA(this.ref.doc(e),this.afs)}}class tA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=iA(r,t);return new eA(o,c,this.afs)}snapshotChanges(){return function QS(n,e){return QC(n,e).pipe(gi(void 0),Dy(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(zr.iC)}}class ex{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$I(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pi(t=>t.length>0),zr.iC):$I(this.query,this.afs.schedulers.outsideAngular).pipe(zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Us((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XC(e);return JC(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return gT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),zr.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(zr.iC)}}const nA=new _.OlP("angularfire2.enableFirestorePersistence"),rA=new _.OlP("angularfire2.firestore.persistenceSettings"),tx=new _.OlP("angularfire2.firestore.settings"),nx=new _.OlP("angularfire2.firestore.use-emulator");function iA(n,e=(t=>t)){return{query:e(n),ref:n}}let sA=(()=>{class n{constructor(t,r,o,c,h,g,E,T,M,N,H,Q,we,Ve,Je,Rt,Bt){this.schedulers=E;const $n=(0,as.on)(t,g,r),Pt=M;N&&ZC($n,g,H,we,Ve,Je,Q,Rt),[this.firestore,this.persistenceEnabled$]=(0,as.cc)(`${$n.name}.firestore`,"AngularFirestore",$n.name,()=>{const xn=g.runOutsideAngular(()=>$n.firestore());if(c&&xn.settings(c),Pt&&xn.useEmulator(...Pt),o&&!or(h)){const tu=()=>{try{return(0,nn.D)(xn.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(HI){return"undefined"!=typeof console&&console.warn(HI),nt(!1)}};return[xn,g.runOutsideAngular(tu)]}return[xn,nt(!1)]},[c,Pt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=iA(o,r),g=this.schedulers.ngZone.run(()=>c);return new eA(g,h,this)}collectionGroup(t,r){const o=r||(h=>h),c=this.firestore.collectionGroup(t);return new ex(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new tA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(as.Dh),_.LFG(as.xv,8),_.LFG(nA,8),_.LFG(tx,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(zr.HU),_.LFG(rA,8),_.LFG(nx,8),_.LFG(YC,8),_.LFG(HC,8),_.LFG(GC,8),_.LFG(qC,8),_.LFG(zC,8),_.LFG(WC,8),_.LFG(KC,8),_.LFG(fT,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rx=(()=>{class n{constructor(){KS.Z.registerVersion("angularfire",zr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nA,useValue:!0},{provide:rA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[sA]}),n})(),ix=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-main-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,r){1&t&&(_.TgZ(0,"nav",0)(1,"div",1)(2,"span",2),_._uU(3,"MIND Research Group"),_.qZA()()())},styles:[""]}),n})();function sx(n,e){if(1&n&&(_.TgZ(0,"li",1),_._uU(1),_.qZA()),2&n){const t=e.$implicit;_.xp6(1),_.hij(" ",t.name," ")}}const ox=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:(()=>{class n{constructor(t){this.items=t.collection("items").valueChanges()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(sA))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-main-body"]],decls:6,vars:3,consts:[["class","text",4,"ngFor","ngForOf"],[1,"text"]],template:function(t,r){1&t&&(_._UZ(0,"app-main-header"),_.TgZ(1,"p"),_._uU(2,"main-body works!"),_.qZA(),_.TgZ(3,"ul"),_.YNc(4,sx,2,1,"li",0),_.ALo(5,"async"),_.qZA()),2&t&&(_.xp6(4),_.Q6J("ngForOf",_.lcZ(5,1,r.items)))},directives:[ix,Dn],pipes:[ec],styles:[""]}),n})()}];let ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[I0.forRoot(ox)],I0]}),n})(),ux=(()=>{class n{constructor(){this.title="project-MIND-web"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[Ac],styles:[""]}),n})(),cx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[As]]}),n})();const oA_firebase={apiKey:"AIzaSyCLL7LYqYgz90EF-qyQJ3_3ok3aq5gVU8o",authDomain:"proyecto-prueba-mind.firebaseapp.com",projectId:"proyecto-prueba-mind",storageBucket:"proyecto-prueba-mind.appspot.com",messagingSenderId:"568761835177",appId:"1:568761835177:web:d244eda04d8adb3fff13b8",measurementId:"G-JRY9W6E6SF"};let lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[ux]}),n.\u0275inj=_.cJS({providers:[],imports:[[uc,ax,cx,as.hO.initializeApp(oA_firebase),rx]]}),n})();(0,_.G48)(),zl().bootstrapModule(lx).catch(n=>console.error(n))},5867:(et,Ce,P)=>{"use strict";P.d(Ce,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=P(9681);(0,_.registerVersion)("firebase","9.6.7","app")},127:(et,Ce,P)=>{"use strict";P.d(Ce,{Z:()=>_.Z});var _=P(3942);_.Z.registerVersion("firebase","9.6.7","app-compat")},3059:(et,Ce,P)=>{"use strict";P.r(Ce);var _=P(5861),Y=P(3942),O=P(2090),fe=P(9681),X=P(655),he=P(1877),re=P(4859);const Me=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},q=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new he.Yd("@firebase/auth");function Re(m,...d){Se.logLevel<=he.in.ERROR&&Se.error(`Auth (${fe.SDK_VERSION}): ${m}`,...d)}function ie(m,...d){throw Be(m,...d)}function pe(m,...d){return Be(m,...d)}function ve(m,d,p){const v=Object.assign(Object.assign({},Fe()),{[d]:p});return new O.LL("auth","Firebase",v).create(d,{appName:m.name})}function je(m,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&ie(m,"argument-error"),ve(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(m,...d){if("string"!=typeof m){const p=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(p,...v)}return q.create(m,...d)}function ee(m,d,...p){if(!m)throw Be(d,...p)}function W(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Re(d),new Error(d)}function ne(m,d){m||W(d)}const me=new Map;function se(m){ne(m instanceof Function,"Expected a class definition");let d=me.get(m);return d?(ne(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,me.set(m,d),d)}function ft(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Ft(){return"http:"===In()||"https:"===In()}function In(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Mn{constructor(d,p){this.shortDelay=d,this.longDelay=p,ne(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function tt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ft()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(m,d){ne(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class rr{static initialize(d,p,v){this.fetchImpl=d,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ai=new Mn(3e4,6e4);function $t(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function At(m,d,p,v){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,_.Z)(function*(m,d,p,v,C={}){return Yn(m,C,(0,_.Z)(function*(){let R={},G={};v&&("GET"===d?G=v:R={body:JSON.stringify(v)});const ae=(0,O.xO)(Object.assign({key:m.config.apiKey},G)).slice(1),Le=yield m._getAdditionalHeaders();return Le["Content-Type"]="application/json",m.languageCode&&(Le["X-Firebase-Locale"]=m.languageCode),rr.fetch()(Is(m,m.config.apiHost,p,ae),Object.assign({method:d,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Yn(m,d,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,_.Z)(function*(m,d,p){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},jt),d);try{const C=new ei(m),R=yield Promise.race([p(),C.promise]);C.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw xi(m,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ae=R.ok?G.errorMessage:G.error.message,[Le,Qe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw xi(m,"credential-already-in-use",G);if("EMAIL_EXISTS"===Le)throw xi(m,"email-already-in-use",G);const ht=v[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw ve(m,ht,Qe);ie(m,ht)}}catch(C){if(C instanceof O.ZR)throw C;ie(m,"network-request-failed")}})).apply(this,arguments)}function gr(m,d,p,v){return Si.apply(this,arguments)}function Si(){return(Si=(0,_.Z)(function*(m,d,p,v,C={}){const R=yield At(m,d,p,v,C);return"mfaPendingCredential"in R&&ie(m,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Is(m,d,p,v){const C=`${d}${p}?${v}`;return m.config.emulator?qt(m.config,C):`${m.config.apiScheme}://${C}`}class ei{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(pe(this.auth,"network-request-failed")),Ai.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xi(m,d,p){const v={appName:m.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const C=pe(m,d,v);return C.customData._tokenResponse=p,C}function Pr(){return(Pr=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Rn(m,d){return pn.apply(this,arguments)}function pn(){return(pn=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Qs(m,d){return lt.apply(this,arguments)}function lt(){return(lt=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ze(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function ir(){return(ir=(0,_.Z)(function*(m,d=!1){const p=(0,O.m9)(m),v=yield p.getIdToken(d),C=Ye(v);ee(C&&C.exp&&C.auth_time&&C.iat,p.auth,"internal-error");const R="object"==typeof C.firebase?C.firebase:void 0,G=null==R?void 0:R.sign_in_provider;return{claims:C,token:v,authTime:Ze(Tt(C.auth_time)),issuedAtTime:Ze(Tt(C.iat)),expirationTime:Ze(Tt(C.exp)),signInProvider:G||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Tt(m){return 1e3*Number(m)}function Ye(m){const[d,p,v]=m.split(".");if(void 0===d||void 0===p||void 0===v)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,O.tV)(p);return C?JSON.parse(C):(Re("Failed to decode base64 JWT payload"),null)}catch(C){return Re("Caught error parsing JWT payload as JSON",C),null}}function hi(m,d){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,_.Z)(function*(m,d,p=!1){if(p)return d;try{return yield d}catch(v){throw v instanceof O.ZR&&Nt(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function Nt({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class sa{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const C=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,_.Z)(function*(){yield p.iteration()}),v)}iteration(){var d=this;return(0,_.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class kr{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ze(this.lastLoginAt),this.creationTime=Ze(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ti(m){return L.apply(this,arguments)}function L(){return(L=(0,_.Z)(function*(m){var d;const p=m.auth,v=yield m.getIdToken(),C=yield hi(m,Qs(p,{idToken:v}));ee(null==C?void 0:C.users.length,p,"internal-error");const R=C.users[0];m._notifyReloadListener(R);const G=(null===(d=R.providerUserInfo)||void 0===d?void 0:d.length)?J(R.providerUserInfo):[],ae=Ie(m.providerData,G),ht=!!m.isAnonymous&&!(m.email&&R.passwordHash||(null==ae?void 0:ae.length)),rt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new kr(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(m,rt)})).apply(this,arguments)}function $(){return($=(0,_.Z)(function*(m){const d=(0,O.m9)(m);yield ti(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ie(m,d){return[...m.filter(v=>!d.some(C=>C.providerId===v.providerId)),...d]}function J(m){return m.map(d=>{var{providerId:p}=d,v=(0,X._T)(d,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ct(){return(ct=(0,_.Z)(function*(m,d){const p=yield Yn(m,{},(0,_.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:C,apiKey:R}=m.config,G=Is(m,C,"/v1/token",`key=${R}`),ae=yield m._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",rr.fetch()(G,{method:"POST",headers:ae,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ee(d.idToken,"internal-error"),ee(void 0!==d.idToken,"internal-error"),ee(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function st(m){const d=Ye(m);return ee(d,"internal-error"),ee(void 0!==d.exp,"internal-error"),ee(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var v=this;return(0,_.Z)(function*(){return ee(!v.accessToken||v.refreshToken,d,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var v=this;return(0,_.Z)(function*(){const{accessToken:C,refreshToken:R,expiresIn:G}=yield function qe(m,d){return ct.apply(this,arguments)}(d,p);v.updateTokensAndExpiration(C,R,Number(G))})()}updateTokensAndExpiration(d,p,v){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,p){const{refreshToken:v,accessToken:C,expirationTime:R}=p,G=new zt;return v&&(ee("string"==typeof v,"internal-error",{appName:d}),G.refreshToken=v),C&&(ee("string"==typeof C,"internal-error",{appName:d}),G.accessToken=C),R&&(ee("number"==typeof R,"internal-error",{appName:d}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return W("not implemented")}}function Zt(m,d){ee("string"==typeof m||void 0===m,"internal-error",{appName:d})}class en{constructor(d){var{uid:p,auth:v,stsTokenManager:C}=d,R=(0,X._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new kr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,_.Z)(function*(){const v=yield hi(p,p.stsTokenManager.getToken(p.auth,d));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(d){return function Xt(m){return ir.apply(this,arguments)}(this,d)}reload(){return function j(m){return $.apply(this,arguments)}(this)}_assign(d){this!==d&&(ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new en(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var v=this;return(0,_.Z)(function*(){let C=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),C=!0),p&&(yield ti(v)),yield v.auth._persistUserIfCurrent(v),C&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,_.Z)(function*(){const p=yield d.getIdToken();return yield hi(d,function at(m,d){return Pr.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var v,C,R,G,ae,Le,Qe,ht;const rt=null!==(v=p.displayName)&&void 0!==v?v:void 0,rn=null!==(C=p.email)&&void 0!==C?C:void 0,Vi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Fc=null!==(G=p.photoURL)&&void 0!==G?G:void 0,pd=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,Va=null!==(Le=p._redirectEventId)&&void 0!==Le?Le:void 0,gd=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,py=null!==(ht=p.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:Zo,emailVerified:md,isAnonymous:ef,providerData:yd,stsTokenManager:vd}=p;ee(Zo&&vd,d,"internal-error");const gy=zt.fromJSON(this.name,vd);ee("string"==typeof Zo,d,"internal-error"),Zt(rt,d.name),Zt(rn,d.name),ee("boolean"==typeof md,d,"internal-error"),ee("boolean"==typeof ef,d,"internal-error"),Zt(Vi,d.name),Zt(Fc,d.name),Zt(pd,d.name),Zt(Va,d.name),Zt(gd,d.name),Zt(py,d.name);const qr=new en({uid:Zo,auth:d,email:rn,emailVerified:md,displayName:rt,isAnonymous:ef,photoURL:Fc,phoneNumber:Vi,tenantId:pd,stsTokenManager:gy,createdAt:gd,lastLoginAt:py});return yd&&Array.isArray(yd)&&(qr.providerData=yd.map(my=>Object.assign({},my))),Va&&(qr._redirectEventId=Va),qr}static _fromIdTokenResponse(d,p,v=!1){return(0,_.Z)(function*(){const C=new zt;C.updateFromServerResponse(p);const R=new en({uid:p.localId,auth:d,stsTokenManager:C,isAnonymous:v});return yield ti(R),R})()}}const It=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(p,v){var C=this;return(0,_.Z)(function*(){C.storage[p]=v})()}_get(p){var v=this;return(0,_.Z)(function*(){const C=v.storage[p];return void 0===C?null:C})()}_remove(p){var v=this;return(0,_.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return m.type="NONE",m})();function Nn(m,d,p){return`firebase:${m}:${d}:${p}`}class mr{constructor(d,p,v){this.persistence=d,this.auth=p,this.userKey=v;const{config:C,name:R}=this.auth;this.fullUserKey=Nn(this.userKey,C.apiKey,R),this.fullPersistenceKey=Nn("persistence",C.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,_.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?en._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,_.Z)(function*(){if(p.persistence===d)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,v="authUser"){return(0,_.Z)(function*(){if(!p.length)return new mr(se(It),d,v);const C=(yield Promise.all(p.map(function(){var Qe=(0,_.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=C[0]||se(It);const G=Nn(v,d.config.apiKey,d.name);let ae=null;for(const Qe of p)try{const ht=yield Qe._get(G);if(ht){const rt=en._fromJSON(d,ht);Qe!==R&&(ae=rt),R=Qe;break}}catch(ht){}const Le=C.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ae&&(yield R._set(G,ae.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,_.Z)(function*(ht){if(ht!==R)try{yield ht._remove(G)}catch(rt){}});return function(ht){return Qe.apply(this,arguments)}}())),new mr(R,d,v)):new mr(R,d,v)})()}}function nu(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(On(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(oa(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Zi(d))return"Blackberry";if(Pn(d))return"Webos";if(ru(d))return"Safari";if((d.includes("chrome/")||aa(d))&&!d.includes("edge/"))return"Chrome";if(yr(d))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function oa(m=(0,O.z$)()){return/firefox\//i.test(m)}function ru(m=(0,O.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function aa(m=(0,O.z$)()){return/crios\//i.test(m)}function On(m=(0,O.z$)()){return/iemobile/i.test(m)}function yr(m=(0,O.z$)()){return/android/i.test(m)}function Zi(m=(0,O.z$)()){return/blackberry/i.test(m)}function Pn(m=(0,O.z$)()){return/webos/i.test(m)}function Lr(m=(0,O.z$)()){return/iphone|ipad|ipod/i.test(m)}function Ds(m=(0,O.z$)()){return Lr(m)||yr(m)||Pn(m)||Zi(m)||/windows phone/i.test(m)||On(m)}function Ao(m,d=[]){let p;switch(m){case"Browser":p=nu((0,O.z$)());break;case"Worker":p=`${nu((0,O.z$)())}-${m}`;break;default:p=m}const v=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${fe.SDK_VERSION}/${v}`}class Ur{constructor(d,p){this.app=d,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Et(this),this.idTokenSubscription=new Et(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(d,p){var v=this;return p&&(this._popupRedirectResolver=se(p)),this._initializationPromise=this.queue((0,_.Z)(function*(){var C,R;if(!v._deleted&&(v.persistenceManager=yield mr.create(v,d),!v._deleted)){if(null===(C=v._popupRedirectResolver)||void 0===C?void 0:C._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,_.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p)}})()}initializeCurrentUser(d){var p=this;return(0,_.Z)(function*(){var v;let C=yield p.assertedPersistence.getCurrentUser();if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==C?void 0:C._redirectEventId,ae=yield p.tryRedirectSignIn(d);(!R||R===G)&&(null==ae?void 0:ae.user)&&(C=ae.user)}return C?C._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===C._redirectEventId?p.directlySetCurrentUser(C):p.reloadAndSetCurrentUserOrClear(C)):p.reloadAndSetCurrentUserOrClear(C):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var p=this;return(0,_.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(C){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,_.Z)(function*(){try{yield ti(d)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,_.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,_.Z)(function*(){const v=d?(0,O.m9)(d):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(d){var p=this;return(0,_.Z)(function*(){if(!p._deleted)return d&&ee(p.tenantId===d.tenantId,p,"tenant-id-mismatch"),p.queue((0,_.Z)(function*(){yield p.directlySetCurrentUser(d),p.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,_.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var p=this;return this.queue((0,_.Z)(function*(){yield p.assertedPersistence.setPersistence(se(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new O.LL("auth","Firebase",d())}onAuthStateChanged(d,p,v){return this.registerStateListener(this.authStateSubscription,d,p,v)}onIdTokenChanged(d,p,v){return this.registerStateListener(this.idTokenSubscription,d,p,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var v=this;return(0,_.Z)(function*(){const C=yield v.getOrInitRedirectPersistenceManager(p);return null===d?C.removeCurrentUser():C.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,_.Z)(function*(){if(!p.redirectPersistenceManager){const v=d&&se(d)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield mr.create(p,[se(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,_.Z)(function*(){var v,C;return p._isInitialized&&(yield p.queue((0,_.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===d?p._currentUser:(null===(C=p.redirectUser)||void 0===C?void 0:C._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,_.Z)(function*(){if(d===p.currentUser)return p.queue((0,_.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,v,C){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?d.addObserver(p,v,C):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,_.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ao(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,_.Z)(function*(){const p={"X-Client-Version":d.clientVersion};return d.app.options.appId&&(p["X-Firebase-gmpid"]=d.app.options.appId),p})()}}function Oe(m){return(0,O.m9)(m)}class Et{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function gn(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class Vt{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return W("not implemented")}_getIdTokenResponse(d){return W("not implemented")}_linkToIdToken(d,p){return W("not implemented")}_getReauthenticationResolver(d){return W("not implemented")}}function Xs(m,d){return on.apply(this,arguments)}function on(){return(on=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:resetPassword",$t(m,d))})).apply(this,arguments)}function yt(m,d){return So.apply(this,arguments)}function So(){return(So=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function xo(m,d){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",$t(m,d))})).apply(this,arguments)}function Dn(){return(Dn=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithPassword",$t(m,d))})).apply(this,arguments)}function bs(m,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:sendOobCode",$t(m,d))})).apply(this,arguments)}function Vr(m,d){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(m,d){return bs(m,d)})).apply(this,arguments)}function Rl(m,d){return to.apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(m,d){return bs(m,d)})).apply(this,arguments)}function fi(m,d){return ni.apply(this,arguments)}function ni(){return(ni=(0,_.Z)(function*(m,d){return bs(m,d)})).apply(this,arguments)}function Nl(m,d){return iu.apply(this,arguments)}function iu(){return(iu=(0,_.Z)(function*(m,d){return bs(m,d)})).apply(this,arguments)}function ri(){return(ri=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithEmailLink",$t(m,d))})).apply(this,arguments)}function Ol(){return(Ol=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithEmailLink",$t(m,d))})).apply(this,arguments)}class su extends Vt{constructor(d,p,v,C=null){super("password",v),this._email=d,this._password=p,this._tenantId=C}static _fromEmailAndPassword(d,p){return new su(d,p,"password")}static _fromEmailAndCode(d,p,v=null){return new su(d,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,_.Z)(function*(){switch(p.signInMethod){case"password":return function Ro(m,d){return Dn.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ts(m,d){return ri.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:ie(d,"internal-error")}})()}_linkToIdToken(d,p){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return yt(d,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Dh(m,d){return Ol.apply(this,arguments)}(d,{idToken:p,email:v._email,oobCode:v._password});default:ie(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function bn(m,d){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithIdp",$t(m,d))})).apply(this,arguments)}class Ji extends Vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ji(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:C}=p,R=(0,X._T)(p,["providerId","signInMethod"]);if(!v||!C)return null;const G=new Ji(v,C);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(d){return bn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,bn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,bn(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,O.xO)(p)}return d}}function Ep(m,d){return ec.apply(this,arguments)}function ec(){return(ec=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:sendVerificationCode",$t(m,d))})).apply(this,arguments)}function ca(){return(ca=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithPhoneNumber",$t(m,d))})).apply(this,arguments)}function kl(){return(kl=(0,_.Z)(function*(m,d){const p=yield gr(m,"POST","/v1/accounts:signInWithPhoneNumber",$t(m,d));if(p.temporaryProof)throw xi(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Dp={USER_NOT_FOUND:"user-not-found"};function Fl(){return(Fl=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithPhoneNumber",$t(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Dp)})).apply(this,arguments)}class Oo extends Vt{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Oo({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Oo({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Ip(m,d){return ca.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function No(m,d){return kl.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function bp(m,d){return Fl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:v,verificationCode:C}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:v,code:C}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:v,phoneNumber:C,temporaryProof:R}=d;return v||p||C||R?new Oo({verificationId:p,verificationCode:v,phoneNumber:C,temporaryProof:R}):null}}class Xi{constructor(d){var p,v,C,R,G,ae;const Le=(0,O.zd)((0,O.pd)(d)),Qe=null!==(p=Le.apiKey)&&void 0!==p?p:null,ht=null!==(v=Le.oobCode)&&void 0!==v?v:null,rt=function Tp(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Le.mode)&&void 0!==C?C:null);ee(Qe&&ht&&rt,"argument-error"),this.apiKey=Qe,this.operation=rt,this.code=ht,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Le.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ae=Le.tenantId)&&void 0!==ae?ae:null}static parseLink(d){const p=function bh(m){const d=(0,O.zd)((0,O.pd)(m)).link,p=d?(0,O.zd)((0,O.pd)(d)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(m)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||d||m}(d);try{return new Xi(p)}catch(v){return null}}}let la=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,v){return su._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const C=Xi.parseLink(v);return ee(C,"argument-error"),su._fromEmailAndCode(p,C.code,C.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Cs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ii extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class no extends ii{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),Ji._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ee(d.idToken||d.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return no.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return no.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:C,pendingToken:R,nonce:G,providerId:ae}=d;if(!v&&!C&&!p&&!R||!ae)return null;try{return new no(ae)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch(Le){return null}}}let Po=(()=>{class m extends ii{constructor(){super("facebook.com")}static credential(p){return Ji._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),ko=(()=>{class m extends ii{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Ji._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:C}=p;if(!v&&!C)return null;try{return m.credential(v,C)}catch(R){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ll=(()=>{class m extends ii{constructor(){super("github.com")}static credential(p){return Ji._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class As extends Vt{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return bn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,bn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,bn(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:C,pendingToken:R}=p;return v&&C&&R&&v===C?new As(v,R):null}static _create(d,p){return new As(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends Cs{constructor(d){ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return es.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return es.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=As.fromJSON(d);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:v}=d;if(!p||!v)return null;try{return As._create(v,p)}catch(C){return null}}}let si=(()=>{class m extends ii{constructor(){super("twitter.com")}static credential(p,v){return Ji._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:C}=p;if(!v||!C)return null;try{return m.credential(v,C)}catch(R){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Vl(m,d){return sr.apply(this,arguments)}function sr(){return(sr=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signUp",$t(m,d))})).apply(this,arguments)}class or{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,v,C=!1){return(0,_.Z)(function*(){const R=yield en._fromIdTokenResponse(d,v,C),G=Bl(v);return new or({user:R,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(d,p,v){return(0,_.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const C=Bl(v);return new or({user:d,providerId:C,_tokenResponse:v,operationType:p})})()}}function Bl(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ou(){return(ou=(0,_.Z)(function*(m){var d;const p=Oe(m);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new or({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Vl(p,{returnSecureToken:!0}),C=yield or._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(C.user),C})).apply(this,arguments)}class au extends O.ZR{constructor(d,p,v,C){var R;super(p.code,p.message),this.operationType=v,this.user=C,Object.setPrototypeOf(this,au.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,p,v,C){return new au(d,p,v,C)}}function uu(m,d,p,v){return("reauthenticate"===d?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?au._fromErrorAndOperation(m,R,d,v):R})}function tc(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function nc(){return(nc=(0,_.Z)(function*(m,d){const p=(0,O.m9)(m);yield Ss(!0,p,d);const{providerUserInfo:v}=yield Rn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),C=tc(v||[]);return p.providerData=p.providerData.filter(R=>C.has(R.providerId)),C.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Kt(m,d){return da.apply(this,arguments)}function da(){return(da=(0,_.Z)(function*(m,d,p=!1){const v=yield hi(m,d._linkToIdToken(m.auth,yield m.getIdToken()),p);return or._forOperation(m,"link",v)})).apply(this,arguments)}function Ss(m,d,p){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.Z)(function*(m,d,p){yield ti(d);const C=!1===m?"provider-already-linked":"no-such-provider";ee(tc(d.providerData).has(p)===m,d.auth,C)})).apply(this,arguments)}function cu(m,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,_.Z)(function*(m,d,p=!1){const{auth:v}=m,C="reauthenticate";try{const R=yield hi(m,uu(v,C,d,m),p);ee(R.idToken,v,"internal-error");const G=Ye(R.idToken);ee(G,v,"internal-error");const{sub:ae}=G;return ee(m.uid===ae,v,"user-mismatch"),or._forOperation(m,C,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&ie(v,"user-mismatch"),R}})).apply(this,arguments)}function ro(m,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,_.Z)(function*(m,d,p=!1){const v="signIn",C=yield uu(m,v,d),R=yield or._fromIdTokenResponse(m,v,C);return p||(yield m._updateCurrentUser(R.user)),R})).apply(this,arguments)}function lu(m,d){return an.apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(m,d){return ro(Oe(m),d)})).apply(this,arguments)}function ns(m,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(m,d){const p=(0,O.m9)(m);return yield Ss(!1,p,d.providerId),Kt(p,d)})).apply(this,arguments)}function Fo(m,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(m,d){return cu((0,O.m9)(m),d)})).apply(this,arguments)}function rc(m,d){return Br.apply(this,arguments)}function Br(){return(Br=(0,_.Z)(function*(m,d){return gr(m,"POST","/v1/accounts:signInWithCustomToken",$t(m,d))})).apply(this,arguments)}function Ms(){return(Ms=(0,_.Z)(function*(m,d){const p=Oe(m),v=yield rc(p,{token:d,returnSecureToken:!0}),C=yield or._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(C.user),C})).apply(this,arguments)}class ot{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?fa._fromServerResponse(d,p):ie(d,"internal-error")}}class fa extends ot{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new fa(p)}}function pa(m,d,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function ga(){return(ga=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m),C={requestType:"PASSWORD_RESET",email:d};p&&pa(v,C,p),yield Rl(v,C)})).apply(this,arguments)}function ma(){return(ma=(0,_.Z)(function*(m,d,p){yield Xs((0,O.m9)(m),{oobCode:d,newPassword:p})})).apply(this,arguments)}function De(){return(De=(0,_.Z)(function*(m,d){yield xo((0,O.m9)(m),{oobCode:d})})).apply(this,arguments)}function Ct(m,d){return du.apply(this,arguments)}function du(){return(du=(0,_.Z)(function*(m,d){const p=(0,O.m9)(m),v=yield Xs(p,{oobCode:d}),C=v.requestType;switch(ee(C,p,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=ot._fromServerResponse(Oe(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:C}})).apply(this,arguments)}function Rs(){return(Rs=(0,_.Z)(function*(m,d){const{data:p}=yield Ct((0,O.m9)(m),d);return p.email})).apply(this,arguments)}function _r(){return(_r=(0,_.Z)(function*(m,d,p){const v=Oe(m),C=yield Vl(v,{returnSecureToken:!0,email:d,password:p}),R=yield or._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hl(){return(Hl=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m),C={requestType:"EMAIL_SIGNIN",email:d};ee(p.handleCodeInApp,v,"argument-error"),p&&pa(v,C,p),yield fi(v,C)})).apply(this,arguments)}function Lo(){return(Lo=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m),C=la.credentialWithLink(d,p||ft());return ee(C._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),lu(v,C)})).apply(this,arguments)}function kn(m,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:createAuthUri",$t(m,d))})).apply(this,arguments)}function Ri(){return(Ri=(0,_.Z)(function*(m,d){const v={identifier:d,continueUri:Ft()?ft():"http://localhost"},{signinMethods:C}=yield kn((0,O.m9)(m),v);return C||[]})).apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(m,d){const p=(0,O.m9)(m),C={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&pa(p.auth,C,d);const{email:R}=yield Vr(p.auth,C);R!==m.email&&(yield m.reload())})).apply(this,arguments)}function wa(){return(wa=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};p&&pa(v.auth,R,p);const{email:G}=yield Nl(v.auth,R);G!==m.email&&(yield m.reload())})).apply(this,arguments)}function zl(m,d){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ea(){return(Ea=(0,_.Z)(function*(m,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const v=(0,O.m9)(m),R={idToken:yield v.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},G=yield hi(v,zl(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ae=v.providerData.find(({providerId:Le})=>"password"===Le);ae&&(ae.displayName=v.displayName,ae.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function hu(m,d,p){return so.apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(m,d,p){const{auth:v}=m,R={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(R.email=d),p&&(R.password=p);const G=yield hi(m,yt(v,R));yield m._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class oo{constructor(d,p,v={}){this.isNewUser=d,this.providerId=p,this.profile=v}}class Wl extends oo{constructor(d,p,v,C){super(d,p,v),this.username=C}}class Ch extends oo{constructor(d,p){super(d,"facebook.com",p)}}class Uo extends Wl{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ni extends oo{constructor(d,p){super(d,"google.com",p)}}class Ah extends Wl{constructor(d,p,v){super(d,"twitter.com",p,v)}}function qn(m){const{user:d,_tokenResponse:p}=m;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function lc(m){var d,p;if(!m)return null;const{providerId:v}=m,C=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},R=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const G=null===(p=null===(d=Ye(m.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new oo(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Ch(R,C);case"github.com":return new Uo(R,C);case"google.com":return new Ni(R,C);case"twitter.com":return new Ah(R,C,m.screenName||null);case"custom":case"anonymous":return new oo(R,null);default:return new oo(R,v,C)}}(p)}class ss{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new ss("enroll",d)}static _fromMfaPendingCredential(d){return new ss("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,v;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ss._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return ss._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Ia{constructor(d,p,v){this.session=d,this.hints=p,this.signInResolver=v}static _fromError(d,p){const v=Oe(d),C=p.customData._serverResponse,R=(C.mfaInfo||[]).map(ae=>ot._fromServerResponse(v,ae));ee(C.mfaPendingCredential,v,"internal-error");const G=ss._fromMfaPendingCredential(C.mfaPendingCredential);return new Ia(G,R,function(){var ae=(0,_.Z)(function*(Le){const Qe=yield Le._process(v,G);delete C.mfaInfo,delete C.mfaPendingCredential;const ht=Object.assign(Object.assign({},C),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const rt=yield or._fromIdTokenResponse(v,p.operationType,ht);return yield v._updateCurrentUser(rt.user),rt;case"reauthenticate":return ee(p.user,v,"internal-error"),or._forOperation(p.user,p.operationType,ht);default:ie(v,"internal-error")}});return function(Le){return ae.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,_.Z)(function*(){return p.signInResolver(d)})()}}function fu(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:start",$t(m,d))}class os{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>ot._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new os(d)}getSession(){var d=this;return(0,_.Z)(function*(){return ss._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var v=this;return(0,_.Z)(function*(){const C=d,R=yield v.getSession(),G=yield hi(v.user,C._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(d){var p=this;return(0,_.Z)(function*(){const v="string"==typeof d?d:d.uid,C=yield p.user.getIdToken(),R=yield hi(p.user,function xh(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(m,d))}(p.user.auth,{idToken:C,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const Vo=new WeakMap,Da="__sak";class ba{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const nn=(()=>{class m extends ba{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pu(){const m=(0,O.z$)();return ru(m)||Lr(m)}()&&function Qn(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Ds(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const C=this.storage.getItem(v),R=this.localCache[v];C!==R&&p(v,R,C)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ae,Le,Qe)=>{this.notifyListeners(ae,Qe)});const C=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(C);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(C,p.newValue):this.storage.removeItem(C);else if(this.localCache[C]===p.newValue&&!v)return}const R=()=>{const ae=this.storage.getItem(C);!v&&this.localCache[C]===ae||this.notifyListeners(C,ae)},G=this.storage.getItem(C);!function ua(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const C=this.listeners[p];if(C)for(const R of Array.from(C))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var C=()=>super._set,R=this;return(0,_.Z)(function*(){yield C().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,C=this;return(0,_.Z)(function*(){const R=yield v().call(C,p);return C.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,C=this;return(0,_.Z)(function*(){yield v().call(C,p),delete C.localCache[p]})()}}return m.type="LOCAL",m})(),nt=(()=>{class m extends ba{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return m.type="SESSION",m})();let wr=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const C=new m(p);return this.receivers.push(C),C}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,_.Z)(function*(){const C=p,{eventId:R,eventType:G,data:ae}=C.data,Le=v.handlersMap[G];if(!(null==Le?void 0:Le.size))return;C.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Qe=Array.from(Le).map(function(){var rt=(0,_.Z)(function*(rn){return rn(C.origin,ae)});return function(rn){return rt.apply(this,arguments)}}()),ht=yield function Oi(m){return Promise.all(m.map(function(){var d=(0,_.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return d.apply(this,arguments)}}()))}(Qe);C.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:ht})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Er(m="",d=10){let p="";for(let v=0;v<d;v++)p+=Math.floor(10*Math.random());return m+p}class Zl{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,v=50){var C=this;return(0,_.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ae;return new Promise((Le,Qe)=>{const ht=Er("",20);R.port1.start();const rt=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ae={messageChannel:R,onMessage(rn){const Vi=rn;if(Vi.data.eventId===ht)switch(Vi.data.status){case"ack":clearTimeout(rt),G=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Le(Vi.data.response);break;default:clearTimeout(rt),clearTimeout(G),Qe(new Error("invalid_response"))}}},C.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),C.target.postMessage({eventType:d,eventId:ht,data:p},[R.port2])}).finally(()=>{ae&&C.removeMessageHandler(ae)})})()}}function tn(){return window}function Ns(){return void 0!==tn().WorkerGlobalScope&&"function"==typeof tn().importScripts}function ao(){return(ao=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const pc="firebaseLocalStorageDb",gu="firebaseLocalStorage",Os="fbase_key";class Cn{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ps(m,d){return m.transaction([gu],d?"readwrite":"readonly").objectStore(gu)}function Ir(){const m=indexedDB.open(pc,1);return new Promise((d,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(gu,{keyPath:Os})}catch(C){p(C)}}),m.addEventListener("success",(0,_.Z)(function*(){const v=m.result;v.objectStoreNames.contains(gu)?d(v):(v.close(),yield function mu(){const m=indexedDB.deleteDatabase(pc);return new Cn(m).toPromise()}(),d(yield Ir()))}))})}function yu(m,d,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,_.Z)(function*(m,d,p){const v=Ps(m,!0).put({[Os]:d,value:p});return new Cn(v).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(m,d){const p=Ps(m,!1).get(d),v=yield new Cn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function co(m,d){const p=Ps(m,!0).delete(d);return new Cn(p).toPromise()}const oi=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,_.Z)(function*(){return p.db||(p.db=yield Ir()),p.db})()}_withRetries(p){var v=this;return(0,_.Z)(function*(){let C=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(C++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,_.Z)(function*(){return Ns()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,_.Z)(function*(){p.receiver=wr._getInstance(function Dt(){return Ns()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,_.Z)(function*(C,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(C,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,_.Z)(function*(C,R){return["keyChanged"]});return function(C,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,_.Z)(function*(){var v,C;if(p.activeServiceWorker=yield function Ta(){return ao.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Zl(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(C=R[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,_.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Bo(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ir();return yield yu(p,Da,"1"),yield co(p,Da),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,_.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var C=this;return(0,_.Z)(function*(){return C._withPendingWrite((0,_.Z)(function*(){return yield C._withRetries(R=>yu(R,p,v)),C.localCache[p]=v,C.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,_.Z)(function*(){const C=yield v._withRetries(R=>function ks(m,d){return Ca.apply(this,arguments)}(R,p));return v.localCache[p]=C,C})()}_remove(p){var v=this;return(0,_.Z)(function*(){return v._withPendingWrite((0,_.Z)(function*(){return yield v._withRetries(C=>co(C,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,_.Z)(function*(){const v=yield p._withRetries(G=>{const ae=Ps(G,!1).getAll();return new Cn(ae).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const C=[],R=new Set;for(const{fbase_key:G,value:ae}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ae)&&(p.notifyListeners(G,ae),C.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),C.push(G));return C})()}notifyListeners(p,v){this.localCache[p]=v;const C=this.listeners[p];if(C)for(const R of Array.from(C))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Yl(m,d){return At(m,"POST","/v2/accounts/mfaSignIn:start",$t(m,d))}function mn(){return(mn=(0,_.Z)(function*(m){return(yield At(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wu(m){return new Promise((d,p)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=d,v.onerror=C=>{const R=pe("internal-error");R.customData=C,p(R)},v.type="text/javascript",v.charset="UTF-8",function _u(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(v)})}function yn(m){return`__${m}${Math.floor(1e6*Math.random())}`}const us=1e12;class Us{constructor(d){this.auth=d,this.counter=us,this._widgets=new Map}render(d,p){const v=this.counter;return this._widgets.set(v,new Pi(d,this.auth.name,p||{})),this.counter++,v}reset(d){var p;const v=d||us;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(d){var p;return(null===(p=this._widgets.get(d||us))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,_.Z)(function*(){var v;return null===(v=p._widgets.get(d||us))||void 0===v||v.execute(),""})()}}class Pi{constructor(d,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof d?document.getElementById(d):d;ee(C,"argument-error",{appName:p}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jr(m){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wn=yn("rcb"),ho=new Mn(3e4,6e4);class Nh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tn().grecaptcha}load(d,p=""){return ee(function $m(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(tn().grecaptcha):new Promise((v,C)=>{const R=tn().setTimeout(()=>{C(pe(d,"network-request-failed"))},ho.get());tn()[Wn]=()=>{tn().clearTimeout(R),delete tn()[Wn];const ae=tn().grecaptcha;if(!ae)return void C(pe(d,"internal-error"));const Le=ae.render;ae.render=(Qe,ht)=>{const rt=Le(Qe,ht);return this.counter++,rt},this.hostLanguage=p,v(ae)},wu(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Wn,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),C(pe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!tn().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mp{load(d){return(0,_.Z)(function*(){return new Us(d)})()}clearedOneInstance(){}}const Oh="recaptcha",fo={theme:"light",type:"image"};class $r{constructor(d,p=Object.assign({},fo),v){this.parameters=p,this.type=Oh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof d?document.getElementById(d):d;ee(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mp:new Nh,this.validateStartingState()}verify(){var d=this;return(0,_.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=ae=>{!ae||(d.tokenChangeListeners.delete(G),R(ae))};d.tokenChangeListeners.add(G),d.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof d)d(p);else if("string"==typeof d){const v=tn()[d];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,_.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,_.Z)(function*(){ee(Ft()&&!Ns(),d.auth,"internal-error"),yield function Rp(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Aa(m){return mn.apply(this,arguments)}(d.auth);ee(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ar{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Oo._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Yt(){return(Yt=(0,_.Z)(function*(m,d,p){const v=Oe(m),C=yield ur(v,d,(0,O.m9)(p));return new ar(C,R=>lu(v,R))})).apply(this,arguments)}function po(){return(po=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m);yield Ss(!1,v,"phone");const C=yield ur(v.auth,d,(0,O.m9)(p));return new ar(C,R=>ns(v,R))})).apply(this,arguments)}function mc(){return(mc=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m),C=yield ur(v.auth,d,(0,O.m9)(p));return new ar(C,R=>Fo(v,R))})).apply(this,arguments)}function ur(m,d,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.Z)(function*(m,d,p){var v;const C=yield p.verify();try{let R;if(ee("string"==typeof C,m,"argument-error"),ee(p.type===Oh,m,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const G=R.session;if("phoneNumber"in R)return ee("enroll"===G.type,m,"internal-error"),(yield fu(m,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,m,"internal-error");const ae=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ee(ae,m,"missing-multi-factor-info"),(yield Yl(m,{mfaPendingCredential:G.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Ep(m,{phoneNumber:R.phoneNumber,recaptchaToken:C});return G}}finally{p._reset()}})).apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(m,d){yield Kt((0,O.m9)(m),d)})).apply(this,arguments)}let ui=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=Oe(p)}verifyPhoneNumber(p,v){return ur(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Oo._fromVerification(p,v)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:C}=p;return v&&C?Oo._fromTokenResponse(v,C):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function ki(m,d){return d?se(d):(ee(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Sa extends Vt{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return bn(d,this._buildIdpRequest())}_linkToIdToken(d,p){return bn(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return bn(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function yc(m){return ro(m.auth,new Sa(m),m.bypassAuthState)}function Xl(m){const{auth:d,user:p}=m;return ee(p,d,"internal-error"),cu(p,new Sa(m),m.bypassAuthState)}function vc(m){return gt.apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(m){const{auth:d,user:p}=m;return ee(p,d,"internal-error"),Kt(p,new Sa(m),m.bypassAuthState)})).apply(this,arguments)}class Hr{constructor(d,p,v,C,R=!1){this.auth=d,this.resolver=v,this.user=C,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,_.Z)(function*(v,C){d.pendingPromise={resolve:v,reject:C};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(v,C){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,_.Z)(function*(){const{urlResponse:v,sessionId:C,postBody:R,tenantId:G,error:ae,type:Le}=d;if(ae)return void p.reject(ae);const Qe={auth:p.auth,requestUri:v,sessionId:C,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Le)(Qe))}catch(ht){p.reject(ht)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return yc;case"linkViaPopup":case"linkViaRedirect":return vc;case"reauthViaPopup":case"reauthViaRedirect":return Xl;default:ie(this.auth,"internal-error")}}resolve(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mo=new Mn(2e3,1e4);function Iu(){return(Iu=(0,_.Z)(function*(m,d,p){const v=Oe(m);je(m,d,Cs);const C=ki(v,p);return new Du(v,"signInViaPopup",d,C).executeNotNull()})).apply(this,arguments)}function Vs(){return(Vs=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m);je(v.auth,d,Cs);const C=ki(v.auth,p);return new Du(v.auth,"reauthViaPopup",d,C,v).executeNotNull()})).apply(this,arguments)}function ci(){return(ci=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m);je(v.auth,d,Cs);const C=ki(v.auth,p);return new Du(v.auth,"linkViaPopup",d,C,v).executeNotNull()})).apply(this,arguments)}let Du=(()=>{class m extends Hr{constructor(p,v,C,R,G){super(p,v,R,G),this.provider=C,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,_.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,_.Z)(function*(){ne(1===p.filter.length,"Popup operations only handle one event");const v=Er();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(C=>{p.reject(C)}),p.resolver._isIframeWebStorageSupported(p.auth,C=>{C||p.reject(pe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,C;this.pollId=(null===(C=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===C?void 0:C.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,mo.get())};p()}}return m.currentPopupAction=null,m})();const $o=new Map;class js extends Hr{constructor(d,p,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,_.Z)(function*(){let v=$o.get(p.auth._key());if(!v){try{const R=(yield function An(m,d){return Fi.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;v=()=>Promise.resolve(R)}catch(C){v=()=>Promise.reject(C)}$o.set(p.auth._key(),v)}return p.bypassAuthState||$o.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,v=this;return(0,_.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(v,d);if("unknown"!==d.type){if(d.eventId){const C=yield v.auth._redirectUserForId(d.eventId);if(C)return v.user=C,p().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Fi(){return(Fi=(0,_.Z)(function*(m,d){const p=D(d),v=nd(m);if(!(yield v._isAvailable()))return!1;const C="true"===(yield v._get(p));return yield v._remove(p),C})).apply(this,arguments)}function $s(m,d){return xa.apply(this,arguments)}function xa(){return(xa=(0,_.Z)(function*(m,d){return nd(m)._set(D(d),"true")})).apply(this,arguments)}function nd(m){return se(m._redirectPersistence)}function D(m){return Nn("pendingRedirect",m.config.apiKey,m.name)}function F(){return(F=(0,_.Z)(function*(m,d,p){const v=Oe(m);je(m,d,Cs);const C=ki(v,p);return yield $s(C,v),C._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function Ae(){return(Ae=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m);je(v.auth,d,Cs);const C=ki(v.auth,p);yield $s(C,v.auth);const R=yield Ra(v);return C._openRedirect(v.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(m,d,p){const v=(0,O.m9)(m);je(v.auth,d,Cs);const C=ki(v.auth,p);yield Ss(!1,v,d.providerId),yield $s(C,v.auth);const R=yield Ra(v);return C._openRedirect(v.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function Sn(){return(Sn=(0,_.Z)(function*(m,d){return yield Oe(m)._initializationPromise,Jn(m,d,!1)})).apply(this,arguments)}function Jn(m,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.Z)(function*(m,d,p=!1){const v=Oe(m),C=ki(v,d),G=yield new js(v,C,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,d)),G})).apply(this,arguments)}function Ra(m){return mi.apply(this,arguments)}function mi(){return(mi=(0,_.Z)(function*(m){const d=Er(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class Li{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(p=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function rd(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _c(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var v;if(d.error&&!_c(d)){const C=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(pe(this.auth,C))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const v=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dr(d))}saveEventToCache(d){this.cachedEventUids.add(Dr(d)),this.lastProcessedEventTime=Date.now()}}function Dr(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function _c({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Na(m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(m,d={}){return At(m,"GET","/v1/projects",d)})).apply(this,arguments)}const Ph=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gm=/^https?/;function Ho(){return(Ho=(0,_.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield Na(m);for(const p of d)try{if(Go(p))return}catch(v){}ie(m,"unauthorized-domain")})).apply(this,arguments)}function Go(m){const d=ft(),{protocol:p,hostname:v}=new URL(d);if(m.startsWith("chrome-extension://")){const G=new URL(m);return""===G.hostname&&""===v?"chrome-extension:"===p&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!Gm.test(p))return!1;if(Ph.test(m))return v===m;const C=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(v)}const zm=new Mn(3e4,6e4);function Wm(){const m=tn().___jsl;if(null==m?void 0:m.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let id=null;function m0(m){return id=id||function Np(m){return new Promise((d,p)=>{var v,C,R;function G(){Wm(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Wm(),p(pe(m,"network-request-failed"))},timeout:zm.get()})}if(null===(C=null===(v=tn().gapi)||void 0===v?void 0:v.iframes)||void 0===C?void 0:C.Iframe)d(gapi.iframes.getContext());else{if(!(null===(R=tn().gapi)||void 0===R?void 0:R.load)){const ae=yn("iframefcb");return tn()[ae]=()=>{gapi.load?G():p(pe(m,"network-request-failed"))},wu(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Le=>p(Le))}G()}}).catch(d=>{throw id=null,d})}(m),id}const Op=new Mn(5e3,15e3),Ui={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pa(m){const d=m.config;ee(d.authDomain,m,"auth-domain-config-required");const p=d.emulator?qt(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:m.name,v:fe.SDK_VERSION},C=qo.get(m.config.apiHost);C&&(v.eid=C);const R=m._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Lh(){return Lh=(0,_.Z)(function*(m){const d=yield m0(m),p=tn().gapi;return ee(p,m,"internal-error"),d.open({where:document.body,url:Pa(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ui,dontclear:!0},v=>new Promise(function(){var C=(0,_.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const ae=pe(m,"network-request-failed"),Le=tn().setTimeout(()=>{G(ae)},Op.get());function Qe(){tn().clearTimeout(Le),R(v)}v.ping(Qe).then(Qe,()=>{G(ae)})});return function(R,G){return C.apply(this,arguments)}}()))}),Lh.apply(this,arguments)}const wc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function ka(m,d,p,v,C,R){ee(m.config.authDomain,m,"auth-domain-config-required"),ee(m.config.apiKey,m,"invalid-api-key");const G={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:v,v:fe.SDK_VERSION,eventId:C};if(d instanceof Cs){d.setDefaultLanguage(m.languageCode),G.providerId=d.providerId||"",(0,O.xb)(d.getCustomParameters())||(G.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Le,Qe]of Object.entries(R||{}))G[Le]=Qe}if(d instanceof ii){const Le=d.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(G.scopes=Le.join(","))}m.tenantId&&(G.tid=m.tenantId);const ae=G;for(const Le of Object.keys(ae))void 0===ae[Le]&&delete ae[Le];return`${function Zm({config:m}){return m.emulator?qt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,O.xO)(ae).slice(1)}`}const Hs="webStorageSupport";class od extends class sd{constructor(d){this.factorId=d}_process(d,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,v);case"signin":return this._finalizeSignIn(d,p.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new od(d)}_finalizeEnroll(d,p,v){return function zn(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:finalize",$t(m,d))}(d,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function lo(m,d){return At(m,"POST","/v2/accounts/mfaSignIn:finalize",$t(m,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ym=(()=>{class m{constructor(){}static assertion(p){return od._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var kp="@firebase/auth";class ad{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,_.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(v=>{var C;d((null===(C=v)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zo(){return window}function Wo(){return(Wo=(0,_.Z)(function*(m,d,p){var v;const{BuildInfo:C}=zo();ne(d.sessionId,"AuthEvent did not contain a session ID");const R=yield Vp(d.sessionId),G={};return Lr()?G.ibi=C.packageName:yr()?G.apn=C.packageName:ie(m,"operation-not-supported-in-this-environment"),C.displayName&&(G.appDisplayName=C.displayName),G.sessionId=R,ka(m,p,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function yi(){return(yi=(0,_.Z)(function*(m){const{BuildInfo:d}=zo(),p={};Lr()?p.iosBundleId=d.packageName:yr()?p.androidPackageName=d.packageName:ie(m,"operation-not-supported-in-this-environment"),yield Na(m,p)})).apply(this,arguments)}function ud(){return(ud=(0,_.Z)(function*(m,d,p){const{cordova:v}=zo();let C=()=>{};try{yield new Promise((R,G)=>{let ae=null;function Le(){var rt;R();const rn=null===(rt=v.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof rn&&rn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Qe(){ae||(ae=window.setTimeout(()=>{G(pe(m,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}d.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),yr()&&document.addEventListener("visibilitychange",ht,!1),C=()=>{d.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",ht,!1),ae&&window.clearTimeout(ae)}})}finally{C()}})).apply(this,arguments)}function Vp(m){return yo.apply(this,arguments)}function yo(){return(yo=(0,_.Z)(function*(m){const d=v0(m),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function v0(m){if(ne(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),p=new Uint8Array(d);for(let v=0;v<m.length;v++)p[v]=m.charCodeAt(v);return p}!function Xm(m){(0,fe._registerComponent)(new re.wA("auth",(d,{options:p})=>{const v=d.getProvider("app").getImmediate(),{apiKey:C,authDomain:R}=v.options;return(G=>{ee(C&&!C.includes(":"),"invalid-api-key",{appName:G.name}),ee(!(null==R?void 0:R.includes(":")),"argument-error",{appName:G.name});const ae={apiKey:C,authDomain:R,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ao(m)},Le=new Ur(G,ae);return function le(m,d){const p=(null==d?void 0:d.persistence)||[],v=(Array.isArray(p)?p:[p]).map(se);(null==d?void 0:d.errorMap)&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(Le,p),Le})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,v)=>{d.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new re.wA("auth-internal",d=>{const p=Oe(d.getProvider("auth").getImmediate());return new ad(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(kp,"0.19.9",function Jm(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,fe.registerVersion)(kp,"0.19.9","esm2017")}("Browser");class Gh extends Li{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,_.Z)(function*(){yield d.initPromise})()}}function ty(m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,_.Z)(function*(m){const d=yield Fa()._get(Ac(m));return d&&(yield Fa()._remove(Ac(m))),d})).apply(this,arguments)}function ny(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*d.length);m.push(d.charAt(v))}return m.join("")}function Fa(){return se(nn)}function Ac(m){return Nn("authEvent",m.config.apiKey,m.name)}function xc(m){if(!(null==m?void 0:m.includes("?")))return{};const[d,...p]=m.split("?");return(0,O.zd)(p.join("?"))}function vi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function dd(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function $p(m=(0,O.z$)()){return!("file:"!==dd()&&"ionic:"!==dd()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fn(){try{const m=self.localStorage,d=Er();if(m)return m.setItem(d,"1"),m.removeItem(d),!function Tu(m=(0,O.z$)()){return function Wh(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function oy(m=(0,O.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,O.hl)()}catch(m){return Cu()&&(0,O.hl)()}return!1}function Cu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function La(){return(function iy(){return"http:"===dd()||"https:"===dd()}()||(0,O.ru)()||$p())&&!function sy(){return(0,O.b$)()||(0,O.UG)()}()&&Fn()&&!Cu()}function hd(){return $p()&&"undefined"!=typeof document}function Ua(){return(Ua=(0,_.Z)(function*(){return!!hd()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const _i={LOCAL:"local",NONE:"none",SESSION:"session"},Rc=ee,Nc="persistence";function Oc(m){return Au.apply(this,arguments)}function Au(){return(Au=(0,_.Z)(function*(m){yield m._initializationPromise;const d=Gp(),p=Nn(Nc,m.config.apiKey,m.name);d&&d.setItem(p,m._getPersistence())})).apply(this,arguments)}function Gp(){var m;try{return(null===(m=function Kh(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(d){return null}}const fd=ee;class Gs{constructor(){this.browserResolver=se(class bc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nt,this._completeRedirectFn=Jn}_openPopup(d,p,v,C){var R=this;return(0,_.Z)(function*(){var G;ne(null===(G=R.eventManagers[d._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ae=ka(d,p,v,ft(),C);return function Bh(m,d,p,v=500,C=600){const R=Math.max((window.screen.availHeight-C)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ae="";const Le=Object.assign(Object.assign({},wc),{width:v.toString(),height:C.toString(),top:R,left:G}),Qe=(0,O.z$)().toLowerCase();p&&(ae=aa(Qe)?"_blank":p),oa(Qe)&&(d=d||"http://localhost",Le.scrollbars="yes");const ht=Object.entries(Le).reduce((rn,[Vi,Fc])=>`${rn}${Vi}=${Fc},`,"");if(function Js(m=(0,O.z$)()){var d;return Lr(m)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Qe)&&"_self"!==ae)return function jh(m,d){const p=document.createElement("a");p.href=m,p.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(d||"",ae),new Dc(null);const rt=window.open(d||"",ae,ht);ee(rt,m,"popup-blocked");try{rt.focus()}catch(rn){}return new Dc(rt)}(d,ae,Er())})()}_openRedirect(d,p,v,C){var R=this;return(0,_.Z)(function*(){return yield R._originValidation(d),function fc(m){tn().location.href=m}(ka(d,p,v,ft(),C)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:C,promise:R}=this.eventManagers[p];return C?Promise.resolve(C):(ne(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(d);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(d){var p=this;return(0,_.Z)(function*(){const v=yield function Pp(m){return Lh.apply(this,arguments)}(d),C=new Li(d);return v.register("authEvent",R=>(ee(null==R?void 0:R.authEvent,d,"invalid-auth-event"),{status:C.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:C},p.iframes[d._key()]=v,C})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Hs,{type:Hs},C=>{var R;const G=null===(R=null==C?void 0:C[0])||void 0===R?void 0:R[Hs];void 0!==G&&p(!!G),ie(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function qm(m){return Ho.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ds()||ru()||Lr()}}),this.cordovaResolver=se(class ry{constructor(){this._redirectPersistence=nt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jn}_initialize(d){var p=this;return(0,_.Z)(function*(){const v=d._key();let C=p.eventManagers.get(v);return C||(C=new Gh(d),p.eventManagers.set(v,C),p.attachCallbackListeners(d,C)),C})()}_openPopup(d){ie(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,v,C){var R=this;return(0,_.Z)(function*(){!function Up(m){var d,p,v,C,R,G,ae,Le,Qe,ht;const rt=zo();ee("function"==typeof(null===(d=null==rt?void 0:rt.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(p=null==rt?void 0:rt.BuildInfo)||void 0===p?void 0:p.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(R=null===(C=null===(v=null==rt?void 0:rt.cordova)||void 0===v?void 0:v.plugins)||void 0===C?void 0:C.browsertab)||void 0===R?void 0:R.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Le=null===(ae=null===(G=null==rt?void 0:rt.cordova)||void 0===G?void 0:G.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Le?void 0:Le.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ht=null===(Qe=null==rt?void 0:rt.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===ht?void 0:ht.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const G=yield R._initialize(d);yield G.initialized(),G.resetRedirect(),function Ma(){$o.clear()}(),yield R._originValidation(d);const ae=function qh(m,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:ny(),postBody:null,tenantId:m.tenantId,error:pe(m,"no-auth-event")}}(d,v,C);yield function _0(m,d){return Fa()._set(Ac(m),d)}(d,ae);const Le=yield function ey(m,d,p){return Wo.apply(this,arguments)}(d,ae,p),Qe=yield function bu(m){const{cordova:d}=zo();return new Promise(p=>{d.plugins.browsertab.isAvailable(v=>{let C=null;v?d.plugins.browsertab.openUrl(m):C=d.InAppBrowser.open(m,function Ml(m=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(C)})})}(Le);return function Lp(m,d,p){return ud.apply(this,arguments)}(d,G,Qe)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Fp(m){return yi.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:v,handleOpenURL:C,BuildInfo:R}=zo(),G=setTimeout((0,_.Z)(function*(){yield ty(d),p.onEvent(vi())}),500),ae=function(){var ht=(0,_.Z)(function*(rt){clearTimeout(G);const rn=yield ty(d);let Vi=null;rn&&(null==rt?void 0:rt.url)&&(Vi=function Cc(m,d){var p,v;const C=function Sc(m){const d=xc(m),p=d.link?decodeURIComponent(d.link):void 0,v=xc(p).link,C=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return xc(C).link||C||v||p||m}(d);if(C.includes("/__/auth/callback")){const R=xc(C),G=R.firebaseError?function Bp(m){try{return JSON.parse(m)}catch(d){return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Le=ae?pe(ae):null;return Le?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:C,postBody:null}}return null}(rn,rt.url)),p.onEvent(Vi||vi())});return function(rn){return ht.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ae);const Le=C,Qe=`${R.packageName.toLowerCase()}://`;zo().handleOpenURL=function(){var ht=(0,_.Z)(function*(rt){if(rt.toLowerCase().startsWith(Qe)&&ae({url:rt}),"function"==typeof Le)try{Le(rt)}catch(rn){console.error(rn)}});return function(rt){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=nt,this._completeRedirectFn=Jn}_initialize(d){var p=this;return(0,_.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,v,C){var R=this;return(0,_.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(d,p,v,C)})()}_openRedirect(d,p,v,C){var R=this;return(0,_.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(d,p,v,C)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return hd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,_.Z)(function*(){if(d.underlyingResolver)return;const p=yield function br(){return Ua.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Su(m){return m.unwrap()}function Zh(m){return qp(m)}function qp(m){const{_tokenResponse:d}=m instanceof O.ZR?m.customData:m;if(!d)return null;if(!(m instanceof O.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return ui.credentialFromResult(m);const p=d.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ko;break;case"facebook.com":v=Po;break;case"github.com":v=Ll;break;case"twitter.com":v=si;break;default:const{oauthIdToken:C,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ae,nonce:Le}=d;return R||G||C||ae?ae?p.startsWith("saml.")?As._create(p,ae):Ji._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:C,accessToken:R}):new no(p).credential({idToken:C,accessToken:R,rawNonce:Le}):null}return m instanceof O.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function cr(m,d){return d.catch(p=>{throw p instanceof O.ZR&&function Pc(m,d){var p;const v=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new cy(m,function hc(m,d){var p;const v=(0,O.m9)(m),C=d;return ee(d.customData.operationType,v,"argument-error"),ee(null===(p=C.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Ia._fromError(v,C)}(m,d));else if(v){const C=qp(d),R=d;C&&(R.credential=C,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(m,p),p}).then(p=>{const C=p.user;return{operationType:p.operationType,credential:Zh(p),additionalUserInfo:qn(p),user:_o.getOrCreate(C)}})}function Yh(m,d){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,_.Z)(function*(m,d){const p=yield d;return{verificationId:p.verificationId,confirm:v=>cr(m,p.confirm(v))}})).apply(this,arguments)}class cy{constructor(d,p){this.resolver=p,this.auth=function uy(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return cr(Su(this.auth),this.resolver.resolveSignIn(d))}}class _o{constructor(d){this._delegate=d,this.multiFactor=function Sp(m){const d=(0,O.m9)(m);return Vo.has(d)||Vo.set(d,os._fromUser(d)),Vo.get(d)}(d)}static getOrCreate(d){return _o.USER_MAP.has(d)||_o.USER_MAP.set(d,new _o(d)),_o.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,_.Z)(function*(){return cr(p.auth,ns(p._delegate,d))})()}linkWithPhoneNumber(d,p){var v=this;return(0,_.Z)(function*(){return Yh(v.auth,function Eu(m,d,p){return po.apply(this,arguments)}(v._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,_.Z)(function*(){return cr(p.auth,function td(m,d,p){return ci.apply(this,arguments)}(p._delegate,d,Gs))})()}linkWithRedirect(d){var p=this;return(0,_.Z)(function*(){return yield Oc(Oe(p.auth)),function Ee(m,d,p){return function Ge(m,d,p){return St.apply(this,arguments)}(m,d,p)}(p._delegate,d,Gs)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,_.Z)(function*(){return cr(p.auth,Fo(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Yh(this.auth,function Hm(m,d,p){return mc.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return cr(this.auth,function ed(m,d,p){return Vs.apply(this,arguments)}(this._delegate,d,Gs))}reauthenticateWithRedirect(d){var p=this;return(0,_.Z)(function*(){return yield Oc(Oe(p.auth)),function z(m,d,p){return function te(m,d,p){return Ae.apply(this,arguments)}(m,d,p)}(p._delegate,d,Gs)})()}sendEmailVerification(d){return function rs(m,d){return _a.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,_.Z)(function*(){return yield function ts(m,d){return nc.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function cc(m,d){return hu((0,O.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function Ap(m,d){return hu((0,O.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Jl(m,d){return go.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function uc(m,d){return Ea.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function ql(m,d,p){return wa.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_o.USER_MAP=new WeakMap;const kc=ee;let Jh=(()=>{class m{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=p.options;kc(C,"invalid-api-key",{appName:p.name}),kc(C,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Gs:void 0;this._delegate=v.initialize({options:{persistence:Wp(C,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_o.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Wt(m,d,p){const v=Oe(m);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const C=!!(null==p?void 0:p.disableWarnings),R=vr(d),{host:G,port:ae}=function Yi(m){const d=vr(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(v);if(C){const R=C[1];return{host:R,port:gn(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:gn(G)}}}(d);v.config.emulator={url:`${R}//${G}${null===ae?"":`:${ae}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Qi(){function m(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,v)}applyActionCode(p){return function Th(m,d){return De.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ct(this._delegate,p)}confirmPasswordReset(p,v){return function ic(m,d,p){return ma.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var C=this;return(0,_.Z)(function*(){return cr(C._delegate,function ya(m,d,p){return _r.apply(this,arguments)}(C._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ac(m,d){return Ri.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Gl(m,d){const p=Xi.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,_.Z)(function*(){kc(La(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function xt(m,d){return Sn.apply(this,arguments)}(p._delegate,Gs);return v?cr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function jp(m,d){Oe(m)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,v,C){const{next:R,error:G,complete:ae}=zp(p,v,C);return this._delegate.onAuthStateChanged(R,G,ae)}onIdTokenChanged(p,v,C){const{next:R,error:G,complete:ae}=zp(p,v,C);return this._delegate.onIdTokenChanged(R,G,ae)}sendSignInLinkToEmail(p,v){return function oc(m,d,p){return Hl.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function $l(m,d,p){return ga.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,_.Z)(function*(){let C;switch(function ay(m,d){Rc(Object.values(_i).includes(d),m,"invalid-persistence-type"),(0,O.b$)()?Rc(d!==_i.SESSION,m,"unsupported-persistence-type"):(0,O.UG)()?Rc(d===_i.NONE,m,"unsupported-persistence-type"):Cu()?Rc(d===_i.NONE||d===_i.LOCAL&&(0,O.hl)(),m,"unsupported-persistence-type"):Rc(d===_i.NONE||Fn(),m,"unsupported-persistence-type")}(v._delegate,p),p){case _i.SESSION:C=nt;break;case _i.LOCAL:C=(yield se(oi)._isAvailable())?oi:nn;break;case _i.NONE:C=It;break;default:return ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return cr(this._delegate,function jl(m){return ou.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return cr(this._delegate,lu(this._delegate,p))}signInWithCustomToken(p){return cr(this._delegate,function xs(m,d){return Ms.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return cr(this._delegate,function sc(m,d,p){return lu((0,O.m9)(m),la.credential(d,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return cr(this._delegate,function va(m,d,p){return Lo.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Yh(this._delegate,function Ql(m,d,p){return Yt.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,_.Z)(function*(){return kc(La(),v._delegate,"operation-not-supported-in-this-environment"),cr(v._delegate,function jo(m,d,p){return Iu.apply(this,arguments)}(v._delegate,p,Gs))})()}signInWithRedirect(p){var v=this;return(0,_.Z)(function*(){return kc(La(),v._delegate,"operation-not-supported-in-this-environment"),yield Oc(v._delegate),function b(m,d,p){return function x(m,d,p){return F.apply(this,arguments)}(m,d,p)}(v._delegate,p,Gs)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function un(m,d){return Rs.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=_i,m})();function zp(m,d,p){let v=m;"function"!=typeof m&&({next:v,error:d,complete:p}=m);const C=v;return{next:G=>C(G&&_o.getOrCreate(G)),error:d,complete:p}}function Wp(m,d){const p=function Hp(m,d){const p=Gp();if(!p)return[];const v=Nn(Nc,m,d);switch(p.getItem(v)){case _i.NONE:return[It];case _i.LOCAL:return[oi,nt];case _i.SESSION:return[nt];default:return[]}}(m,d);if("undefined"!=typeof self&&!p.includes(oi)&&p.push(oi),"undefined"!=typeof window)for(const v of[nn,nt])p.includes(v)||p.push(v);return p.includes(It)||p.push(It),p}class Xh{constructor(){this.providerId="phone",this._delegate=new ui(Su(Y.Z.auth()))}static credential(d,p){return ui.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Xh.PHONE_SIGN_IN_METHOD=ui.PHONE_SIGN_IN_METHOD,Xh.PROVIDER_ID=ui.PROVIDER_ID;const ly=ee;class dy{constructor(d,p,v=Y.Z.app()){var C;ly(null===(C=v.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new $r(d,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fy(m){m.INTERNAL.registerComponent(new re.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new Jh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:la,FacebookAuthProvider:Po,GithubAuthProvider:Ll,GoogleAuthProvider:ko,OAuthProvider:no,SAMLAuthProvider:es,PhoneAuthProvider:Xh,PhoneMultiFactorGenerator:Ym,RecaptchaVerifier:dy,TwitterAuthProvider:si,Auth:Jh,AuthCredential:Vt,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.9")}(Y.Z)},2940:function(et,Ce){!function(P){"use strict";function _(q){return Array.prototype.slice.call(q)}function Y(q){return new Promise(function(oe,Se){q.onsuccess=function(){oe(q.result)},q.onerror=function(){Se(q.error)}})}function O(q,oe,Se){var Re,ie=new Promise(function(pe,ve){Y(Re=q[oe].apply(q,Se)).then(pe,ve)});return ie.request=Re,ie}function fe(q,oe,Se){var Re=O(q,oe,Se);return Re.then(function(ie){if(ie)return new B(ie,Re.request)})}function X(q,oe,Se){Se.forEach(function(Re){Object.defineProperty(q.prototype,Re,{get:function(){return this[oe][Re]},set:function(ie){this[oe][Re]=ie}})})}function he(q,oe,Se,Re){Re.forEach(function(ie){ie in Se.prototype&&(q.prototype[ie]=function(){return O(this[oe],ie,arguments)})})}function re(q,oe,Se,Re){Re.forEach(function(ie){ie in Se.prototype&&(q.prototype[ie]=function(){return this[oe][ie].apply(this[oe],arguments)})})}function ue(q,oe,Se,Re){Re.forEach(function(ie){ie in Se.prototype&&(q.prototype[ie]=function(){return fe(this[oe],ie,arguments)})})}function ce(q){this._index=q}function B(q,oe){this._cursor=q,this._request=oe}function U(q){this._store=q}function Z(q){this._tx=q,this.complete=new Promise(function(oe,Se){q.oncomplete=function(){oe()},q.onerror=function(){Se(q.error)},q.onabort=function(){Se(q.error)}})}function Ue(q,oe,Se){this._db=q,this.oldVersion=oe,this.transaction=new Z(Se)}function be(q){this._db=q}X(ce,"_index",["name","keyPath","multiEntry","unique"]),he(ce,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(ce,"_index",IDBIndex,["openCursor","openKeyCursor"]),X(B,"_cursor",["direction","key","primaryKey","value"]),he(B,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(q){q in IDBCursor.prototype&&(B.prototype[q]=function(){var oe=this,Se=arguments;return Promise.resolve().then(function(){return oe._cursor[q].apply(oe._cursor,Se),Y(oe._request).then(function(Re){if(Re)return new B(Re,oe._request)})})})}),U.prototype.createIndex=function(){return new ce(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new ce(this._store.index.apply(this._store,arguments))},X(U,"_store",["name","keyPath","indexNames","autoIncrement"]),he(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(U,"_store",IDBObjectStore,["deleteIndex"]),Z.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},X(Z,"_tx",["objectStoreNames","mode"]),re(Z,"_tx",IDBTransaction,["abort"]),Ue.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},X(Ue,"_db",["name","version","objectStoreNames"]),re(Ue,"_db",IDBDatabase,["deleteObjectStore","close"]),be.prototype.transaction=function(){return new Z(this._db.transaction.apply(this._db,arguments))},X(be,"_db",["name","version","objectStoreNames"]),re(be,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(q){[U,ce].forEach(function(oe){q in oe.prototype&&(oe.prototype[q.replace("open","iterate")]=function(){var Se=_(arguments),Re=Se[Se.length-1],ie=this._store||this._index,pe=ie[q].apply(ie,Se.slice(0,-1));pe.onsuccess=function(){Re(pe.result)}})})}),[ce,U].forEach(function(q){q.prototype.getAll||(q.prototype.getAll=function(oe,Se){var Re=this,ie=[];return new Promise(function(pe){Re.iterateCursor(oe,function(ve){ve?(ie.push(ve.value),void 0===Se||ie.length!=Se?ve.continue():pe(ie)):pe(ie)})})})}),P.openDb=function Me(q,oe,Se){var Re=O(indexedDB,"open",[q,oe]),ie=Re.request;return ie&&(ie.onupgradeneeded=function(pe){Se&&Se(new Ue(ie.result,pe.oldVersion,ie.transaction))}),Re.then(function(pe){return new be(pe)})},P.deleteDb=function Fe(q){return O(indexedDB,"deleteDatabase",[q])},Object.defineProperty(P,"__esModule",{value:!0})}(Ce)},8306:(et,Ce,P)=>{"use strict";P.d(Ce,{y:()=>B});var _=P(2961),Y=P(727),O=P(8822),fe=P(4671);var re=P(2416),ue=P(576),ce=P(2806);let B=(()=>{class be{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const q=new be;return q.source=this,q.operator=Fe,q}subscribe(Fe,q,oe){const Se=function Ue(be){return be&&be instanceof _.Lv||function Z(be){return be&&(0,ue.m)(be.next)&&(0,ue.m)(be.error)&&(0,ue.m)(be.complete)}(be)&&(0,Y.Nn)(be)}(Fe)?Fe:new _.Hp(Fe,q,oe);return(0,ce.x)(()=>{const{operator:Re,source:ie}=this;Se.add(Re?Re.call(Se,ie):ie?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(q){Fe.error(q)}}forEach(Fe,q){return new(q=U(q))((oe,Se)=>{const Re=new _.Hp({next:ie=>{try{Fe(ie)}catch(pe){Se(pe),Re.unsubscribe()}},error:Se,complete:oe});this.subscribe(Re)})}_subscribe(Fe){var q;return null===(q=this.source)||void 0===q?void 0:q.subscribe(Fe)}[O.L](){return this}pipe(...Fe){return function he(be){return 0===be.length?fe.y:1===be.length?be[0]:function(Fe){return be.reduce((q,oe)=>oe(q),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=U(Fe))((q,oe)=>{let Se;this.subscribe(Re=>Se=Re,Re=>oe(Re),()=>q(Se))})}}return be.create=Me=>new be(Me),be})();function U(be){var Me;return null!==(Me=null!=be?be:re.v.Promise)&&void 0!==Me?Me:Promise}},7579:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>re});var _=P(8306),Y=P(727);const fe=(0,P(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=P(8737),he=P(2806);let re=(()=>{class ce extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Z=new ue(this,this);return Z.operator=U,Z}_throwIfClosed(){if(this.closed)throw new fe}next(U){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Z=this.observers.slice();for(const Ue of Z)Ue.next(U)}})}error(U){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Z}=this;for(;Z.length;)Z.shift().error(U)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Z,isStopped:Ue,observers:be}=this;return Z||Ue?Y.Lc:(be.push(U),new Y.w0(()=>(0,X.P)(be,U)))}_checkFinalizedStatuses(U){const{hasError:Z,thrownError:Ue,isStopped:be}=this;Z?U.error(Ue):be&&U.complete()}asObservable(){const U=new _.y;return U.source=this,U}}return ce.create=(B,U)=>new ue(B,U),ce})();class ue extends re{constructor(B,U){super(),this.destination=B,this.source=U}next(B){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Z||Z.call(U,B)}error(B){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Z||Z.call(U,B)}complete(){var B,U;null===(U=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===U||U.call(B)}_subscribe(B){var U,Z;return null!==(Z=null===(U=this.source)||void 0===U?void 0:U.subscribe(B))&&void 0!==Z?Z:Y.Lc}}},2961:(et,Ce,P)=>{"use strict";P.d(Ce,{Hp:()=>Fe,Lv:()=>Z});var _=P(576),Y=P(727),O=P(2416),fe=P(7849);function X(){}const he=ce("C",void 0,void 0);function ce(ie,pe,ve){return{kind:ie,value:pe,error:ve}}var B=P(3410),U=P(2806);class Z extends Y.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,Y.Nn)(pe)&&pe.add(this)):this.destination=Re}static create(pe,ve,je){return new Fe(pe,ve,je)}next(pe){this.isStopped?Se(function ue(ie){return ce("N",ie,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?Se(function re(ie){return ce("E",void 0,ie)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?Se(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function be(ie,pe){return Ue.call(ie,pe)}class Me{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:ve}=this;if(ve.next)try{ve.next(pe)}catch(je){q(je)}}error(pe){const{partialObserver:ve}=this;if(ve.error)try{ve.error(pe)}catch(je){q(je)}else q(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(ve){q(ve)}}}class Fe extends Z{constructor(pe,ve,je){let Be;if(super(),(0,_.m)(pe)||!pe)Be={next:null!=pe?pe:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(pe),ee.unsubscribe=()=>this.unsubscribe(),Be={next:pe.next&&be(pe.next,ee),error:pe.error&&be(pe.error,ee),complete:pe.complete&&be(pe.complete,ee)}):Be=pe}this.destination=new Me(Be)}}function q(ie){O.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(ie):(0,fe.h)(ie)}function Se(ie,pe){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(ie,pe))}const Re={closed:!0,next:X,error:function oe(ie){throw ie},complete:X}},727:(et,Ce,P)=>{"use strict";P.d(Ce,{Lc:()=>he,w0:()=>X,Nn:()=>re});var _=P(576);const O=(0,P(3888).d)(ce=>function(U){ce(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Z,Ue)=>`${Ue+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var fe=P(8737);class X{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const be of U)be.remove(this);else U.remove(this);const{initialTeardown:Z}=this;if((0,_.m)(Z))try{Z()}catch(be){B=be instanceof O?be.errors:[be]}const{_teardowns:Ue}=this;if(Ue){this._teardowns=null;for(const be of Ue)try{ue(be)}catch(Me){B=null!=B?B:[],Me instanceof O?B=[...B,...Me.errors]:B.push(Me)}}if(B)throw new O(B)}}add(B){var U;if(B&&B!==this)if(this.closed)ue(B);else{if(B instanceof X){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._teardowns=null!==(U=this._teardowns)&&void 0!==U?U:[]).push(B)}}_hasParent(B){const{_parentage:U}=this;return U===B||Array.isArray(U)&&U.includes(B)}_addParent(B){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(B),U):U?[U,B]:B}_removeParent(B){const{_parentage:U}=this;U===B?this._parentage=null:Array.isArray(U)&&(0,fe.P)(U,B)}remove(B){const{_teardowns:U}=this;U&&(0,fe.P)(U,B),B instanceof X&&B._removeParent(this)}}X.EMPTY=(()=>{const ce=new X;return ce.closed=!0,ce})();const he=X.EMPTY;function re(ce){return ce instanceof X||ce&&"closed"in ce&&(0,_.m)(ce.remove)&&(0,_.m)(ce.add)&&(0,_.m)(ce.unsubscribe)}function ue(ce){(0,_.m)(ce)?ce():ce.unsubscribe()}},2416:(et,Ce,P)=>{"use strict";P.d(Ce,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,Ce,P)=>{"use strict";P.d(Ce,{E:()=>Y});const Y=new(P(8306).y)(X=>X.complete())},8996:(et,Ce,P)=>{"use strict";P.d(Ce,{D:()=>pe});var _=P(8421),Y=P(5363),O=P(9468),he=P(8306),ue=P(2202),ce=P(576),B=P(9672);function Z(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new he.y(Be=>{(0,B.f)(Be,je,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(Be,je,()=>{ee.next().then(W=>{W.done?Be.complete():Be.next(W.value)})},0,!0)})})}var Ue=P(3670),be=P(8239),Me=P(1144),Fe=P(6495),q=P(2206),oe=P(4532),Se=P(3260);function pe(ve,je){return je?function ie(ve,je){if(null!=ve){if((0,Ue.c)(ve))return function fe(ve,je){return(0,_.Xf)(ve).pipe((0,O.R)(je),(0,Y.Q)(je))}(ve,je);if((0,Me.z)(ve))return function re(ve,je){return new he.y(Be=>{let ee=0;return je.schedule(function(){ee===ve.length?Be.complete():(Be.next(ve[ee++]),Be.closed||this.schedule())})})}(ve,je);if((0,be.t)(ve))return function X(ve,je){return(0,_.Xf)(ve).pipe((0,O.R)(je),(0,Y.Q)(je))}(ve,je);if((0,q.D)(ve))return Z(ve,je);if((0,Fe.T)(ve))return function U(ve,je){return new he.y(Be=>{let ee;return(0,B.f)(Be,je,()=>{ee=ve[ue.h](),(0,B.f)(Be,je,()=>{let W,ne;try{({value:W,done:ne}=ee.next())}catch(me){return void Be.error(me)}ne?Be.complete():Be.next(W)},0,!0)}),()=>(0,ce.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,je);if((0,Se.L)(ve))return function Re(ve,je){return Z((0,Se.Q)(ve),je)}(ve,je)}throw(0,oe.z)(ve)}(ve,je):(0,_.Xf)(ve)}},8421:(et,Ce,P)=>{"use strict";P.d(Ce,{Xf:()=>Ue});var _=P(655),Y=P(1144),O=P(8239),fe=P(8306),X=P(3670),he=P(2206),re=P(4532),ue=P(6495),ce=P(3260),B=P(576),U=P(7849),Z=P(8822);function Ue(ie){if(ie instanceof fe.y)return ie;if(null!=ie){if((0,X.c)(ie))return function be(ie){return new fe.y(pe=>{const ve=ie[Z.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,Y.z)(ie))return function Me(ie){return new fe.y(pe=>{for(let ve=0;ve<ie.length&&!pe.closed;ve++)pe.next(ie[ve]);pe.complete()})}(ie);if((0,O.t)(ie))return function Fe(ie){return new fe.y(pe=>{ie.then(ve=>{pe.closed||(pe.next(ve),pe.complete())},ve=>pe.error(ve)).then(null,U.h)})}(ie);if((0,he.D)(ie))return oe(ie);if((0,ue.T)(ie))return function q(ie){return new fe.y(pe=>{for(const ve of ie)if(pe.next(ve),pe.closed)return;pe.complete()})}(ie);if((0,ce.L)(ie))return function Se(ie){return oe((0,ce.Q)(ie))}(ie)}throw(0,re.z)(ie)}function oe(ie){return new fe.y(pe=>{(function Re(ie,pe){var ve,je,Be,ee;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ve=(0,_.KL)(ie);!(je=yield ve.next()).done;)if(pe.next(je.value),pe.closed)return}catch(W){Be={error:W}}finally{try{je&&!je.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(Be)throw Be.error}}pe.complete()})})(ie,pe).catch(ve=>pe.error(ve))})}},6451:(et,Ce,P)=>{"use strict";P.d(Ce,{T:()=>he});var _=P(8189),Y=P(8421),O=P(515),fe=P(7669),X=P(8996);function he(...re){const ue=(0,fe.yG)(re),ce=(0,fe._6)(re,1/0),B=re;return B.length?1===B.length?(0,Y.Xf)(B[0]):(0,_.J)(ce)((0,X.D)(B,ue)):O.E}},5403:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>Y});var _=P(2961);function Y(fe,X,he,re,ue){return new O(fe,X,he,re,ue)}class O extends _.Lv{constructor(X,he,re,ue,ce,B){super(X),this.onFinalize=ce,this.shouldUnsubscribe=B,this._next=he?function(U){try{he(U)}catch(Z){X.error(Z)}}:super._next,this._error=ue?function(U){try{ue(U)}catch(Z){X.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(U){X.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(et,Ce,P)=>{"use strict";P.d(Ce,{U:()=>O});var _=P(4482),Y=P(5403);function O(fe,X){return(0,_.e)((he,re)=>{let ue=0;he.subscribe((0,Y.x)(re,ce=>{re.next(fe.call(X,ce,ue++))}))})}},8189:(et,Ce,P)=>{"use strict";P.d(Ce,{J:()=>O});var _=P(5577),Y=P(4671);function O(fe=1/0){return(0,_.z)(Y.y,fe)}},5577:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>ue});var _=P(4004),Y=P(8421),O=P(4482),fe=P(9672),X=P(5403),re=P(576);function ue(ce,B,U=1/0){return(0,re.m)(B)?ue((Z,Ue)=>(0,_.U)((be,Me)=>B(Z,be,Ue,Me))((0,Y.Xf)(ce(Z,Ue))),U):("number"==typeof B&&(U=B),(0,O.e)((Z,Ue)=>function he(ce,B,U,Z,Ue,be,Me,Fe){const q=[];let oe=0,Se=0,Re=!1;const ie=()=>{Re&&!q.length&&!oe&&B.complete()},pe=je=>oe<Z?ve(je):q.push(je),ve=je=>{be&&B.next(je),oe++;let Be=!1;(0,Y.Xf)(U(je,Se++)).subscribe((0,X.x)(B,ee=>{null==Ue||Ue(ee),be?pe(ee):B.next(ee)},()=>{Be=!0},void 0,()=>{if(Be)try{for(oe--;q.length&&oe<Z;){const ee=q.shift();Me?(0,fe.f)(B,Me,()=>ve(ee)):ve(ee)}ie()}catch(ee){B.error(ee)}}))};return ce.subscribe((0,X.x)(B,pe,()=>{Re=!0,ie()})),()=>{null==Fe||Fe()}}(Z,Ue,ce,U)))}},5363:(et,Ce,P)=>{"use strict";P.d(Ce,{Q:()=>fe});var _=P(9672),Y=P(4482),O=P(5403);function fe(X,he=0){return(0,Y.e)((re,ue)=>{re.subscribe((0,O.x)(ue,ce=>(0,_.f)(ue,X,()=>ue.next(ce),he),()=>(0,_.f)(ue,X,()=>ue.complete(),he),ce=>(0,_.f)(ue,X,()=>ue.error(ce),he)))})}},3099:(et,Ce,P)=>{"use strict";P.d(Ce,{B:()=>he});var _=P(8996),Y=P(5698),O=P(7579),fe=P(2961),X=P(4482);function he(ue={}){const{connector:ce=(()=>new O.x),resetOnError:B=!0,resetOnComplete:U=!0,resetOnRefCountZero:Z=!0}=ue;return Ue=>{let be=null,Me=null,Fe=null,q=0,oe=!1,Se=!1;const Re=()=>{null==Me||Me.unsubscribe(),Me=null},ie=()=>{Re(),be=Fe=null,oe=Se=!1},pe=()=>{const ve=be;ie(),null==ve||ve.unsubscribe()};return(0,X.e)((ve,je)=>{q++,!Se&&!oe&&Re();const Be=Fe=null!=Fe?Fe:ce();je.add(()=>{q--,0===q&&!Se&&!oe&&(Me=re(pe,Z))}),Be.subscribe(je),be||(be=new fe.Hp({next:ee=>Be.next(ee),error:ee=>{Se=!0,Re(),Me=re(ie,B,ee),Be.error(ee)},complete:()=>{oe=!0,Re(),Me=re(ie,U),Be.complete()}}),(0,_.D)(ve).subscribe(be))})(Ue)}}function re(ue,ce,...B){return!0===ce?(ue(),null):!1===ce?null:ce(...B).pipe((0,Y.q)(1)).subscribe(()=>ue())}},9468:(et,Ce,P)=>{"use strict";P.d(Ce,{R:()=>Y});var _=P(4482);function Y(O,fe=0){return(0,_.e)((X,he)=>{he.add(O.schedule(()=>X.subscribe(he),fe))})}},5698:(et,Ce,P)=>{"use strict";P.d(Ce,{q:()=>fe});var _=P(515),Y=P(4482),O=P(5403);function fe(X){return X<=0?()=>_.E:(0,Y.e)((he,re)=>{let ue=0;he.subscribe((0,O.x)(re,ce=>{++ue<=X&&(re.next(ce),X<=ue&&re.complete())}))})}},8505:(et,Ce,P)=>{"use strict";P.d(Ce,{b:()=>X});var _=P(576),Y=P(4482),O=P(5403),fe=P(4671);function X(he,re,ue){const ce=(0,_.m)(he)||re||ue?{next:he,error:re,complete:ue}:he;return ce?(0,Y.e)((B,U)=>{var Z;null===(Z=ce.subscribe)||void 0===Z||Z.call(ce);let Ue=!0;B.subscribe((0,O.x)(U,be=>{var Me;null===(Me=ce.next)||void 0===Me||Me.call(ce,be),U.next(be)},()=>{var be;Ue=!1,null===(be=ce.complete)||void 0===be||be.call(ce),U.complete()},be=>{var Me;Ue=!1,null===(Me=ce.error)||void 0===Me||Me.call(ce,be),U.error(be)},()=>{var be,Me;Ue&&(null===(be=ce.unsubscribe)||void 0===be||be.call(ce)),null===(Me=ce.finalize)||void 0===Me||Me.call(ce)}))}):fe.y}},4408:(et,Ce,P)=>{"use strict";P.d(Ce,{o:()=>X});var _=P(727);class Y extends _.w0{constructor(re,ue){super()}schedule(re,ue=0){return this}}const O={setInterval(...he){const{delegate:re}=O;return((null==re?void 0:re.setInterval)||setInterval)(...he)},clearInterval(he){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(he)},delegate:void 0};var fe=P(8737);class X extends Y{constructor(re,ue){super(re,ue),this.scheduler=re,this.work=ue,this.pending=!1}schedule(re,ue=0){if(this.closed)return this;this.state=re;const ce=this.id,B=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(B,ce,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(B,this.id,ue),this}requestAsyncId(re,ue,ce=0){return O.setInterval(re.flush.bind(re,this),ce)}recycleAsyncId(re,ue,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ue;O.clearInterval(ue)}execute(re,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(re,ue);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ue){let B,ce=!1;try{this.work(re)}catch(U){ce=!0,B=U||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ue}=this,{actions:ce}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(ce,this),null!=re&&(this.id=this.recycleAsyncId(ue,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,Ce,P)=>{"use strict";P.d(Ce,{v:()=>O});var _=P(6063);class Y{constructor(X,he=Y.now){this.schedulerActionCtor=X,this.now=he}schedule(X,he=0,re){return new this.schedulerActionCtor(this,X).schedule(re,he)}}Y.now=_.l.now;class O extends Y{constructor(X,he=Y.now){super(X,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:he}=this;if(this._active)return void he.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=he.shift());if(this._active=!1,re){for(;X=he.shift();)X.unsubscribe();throw re}}}},4986:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>O});var _=P(4408);const O=new(P(7565).v)(_.o)},6063:(et,Ce,P)=>{"use strict";P.d(Ce,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>_});const _={setTimeout(...Y){const{delegate:O}=_;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=_;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(et,Ce,P)=>{"use strict";P.d(Ce,{h:()=>Y});const Y=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,Ce,P)=>{"use strict";P.d(Ce,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,Ce,P)=>{"use strict";P.d(Ce,{_6:()=>he,jO:()=>fe,yG:()=>X});var _=P(576);function O(re){return re[re.length-1]}function fe(re){return(0,_.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,_.m)(re.schedule)}(O(re))?re.pop():void 0}function he(re,ue){return"number"==typeof O(re)?re.pop():ue}},8737:(et,Ce,P)=>{"use strict";function _(Y,O){if(Y){const fe=Y.indexOf(O);0<=fe&&Y.splice(fe,1)}}P.d(Ce,{P:()=>_})},3888:(et,Ce,P)=>{"use strict";function _(Y){const fe=Y(X=>{Error.call(X),X.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}P.d(Ce,{d:()=>_})},2806:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>O,O:()=>fe});var _=P(2416);let Y=null;function O(X){if(_.v.useDeprecatedSynchronousErrorHandling){const he=!Y;if(he&&(Y={errorThrown:!1,error:null}),X(),he){const{errorThrown:re,error:ue}=Y;if(Y=null,re)throw ue}}else X()}function fe(X){_.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(et,Ce,P)=>{"use strict";function _(Y,O,fe,X=0,he=!1){const re=O.schedule(function(){fe(),he?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!he)return re}P.d(Ce,{f:()=>_})},4671:(et,Ce,P)=>{"use strict";function _(Y){return Y}P.d(Ce,{y:()=>_})},1144:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>_});const _=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(et,Ce,P)=>{"use strict";P.d(Ce,{D:()=>Y});var _=P(576);function Y(O){return Symbol.asyncIterator&&(0,_.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(et,Ce,P)=>{"use strict";function _(Y){return"function"==typeof Y}P.d(Ce,{m:()=>_})},3670:(et,Ce,P)=>{"use strict";P.d(Ce,{c:()=>O});var _=P(8822),Y=P(576);function O(fe){return(0,Y.m)(fe[_.L])}},6495:(et,Ce,P)=>{"use strict";P.d(Ce,{T:()=>O});var _=P(2202),Y=P(576);function O(fe){return(0,Y.m)(null==fe?void 0:fe[_.h])}},8239:(et,Ce,P)=>{"use strict";P.d(Ce,{t:()=>Y});var _=P(576);function Y(O){return(0,_.m)(null==O?void 0:O.then)}},3260:(et,Ce,P)=>{"use strict";P.d(Ce,{Q:()=>O,L:()=>fe});var _=P(655),Y=P(576);function O(X){return(0,_.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:ue,done:ce}=yield(0,_.qq)(re.read());if(ce)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ue)}}finally{re.releaseLock()}})}function fe(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(et,Ce,P)=>{"use strict";P.d(Ce,{A:()=>Y,e:()=>O});var _=P(576);function Y(fe){return(0,_.m)(null==fe?void 0:fe.lift)}function O(fe){return X=>{if(Y(X))return X.lift(function(he){try{return fe(he,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(et,Ce,P)=>{"use strict";P.d(Ce,{h:()=>O});var _=P(2416),Y=P(3410);function O(fe){Y.z.setTimeout(()=>{const{onUnhandledError:X}=_.v;if(!X)throw fe;X(fe)})}},4532:(et,Ce,P)=>{"use strict";function _(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>_})},655:(et,Ce,P)=>{"use strict";function fe(W,ne){var me={};for(var se in W)Object.prototype.hasOwnProperty.call(W,se)&&ne.indexOf(se)<0&&(me[se]=W[se]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(W);Ne<se.length;Ne++)ne.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,se[Ne])&&(me[se[Ne]]=W[se[Ne]])}return me}function ue(W,ne,me,se){return new(me||(me=Promise))(function(le,ft){function Ft(it){try{tt(se.next(it))}catch(Mn){ft(Mn)}}function In(it){try{tt(se.throw(it))}catch(Mn){ft(Mn)}}function tt(it){it.done?le(it.value):function Ne(le){return le instanceof me?le:new me(function(ft){ft(le)})}(it.value).then(Ft,In)}tt((se=se.apply(W,ne||[])).next())})}function q(W){return this instanceof q?(this.v=W,this):new q(W)}function oe(W,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=me.apply(W,ne||[]),le=[];return Ne={},ft("next"),ft("throw"),ft("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ft(qt){se[qt]&&(Ne[qt]=function(rr){return new Promise(function(jt,Ai){le.push([qt,rr,jt,Ai])>1||Ft(qt,rr)})})}function Ft(qt,rr){try{!function In(qt){qt.value instanceof q?Promise.resolve(qt.value.v).then(tt,it):Mn(le[0][2],qt)}(se[qt](rr))}catch(jt){Mn(le[0][3],jt)}}function tt(qt){Ft("next",qt)}function it(qt){Ft("throw",qt)}function Mn(qt,rr){qt(rr),le.shift(),le.length&&Ft(le[0][0],le[0][1])}}function Re(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=W[Symbol.asyncIterator];return ne?ne.call(W):(W=function Z(W){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&W[ne],se=0;if(me)return me.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&se>=W.length&&(W=void 0),{value:W&&W[se++],done:!W}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(le){me[le]=W[le]&&function(ft){return new Promise(function(Ft,In){!function Ne(le,ft,Ft,In){Promise.resolve(In).then(function(tt){le({value:tt,done:Ft})},ft)}(Ft,In,(ft=W[le](ft)).done,ft.value)})}}}P.d(Ce,{_T:()=>fe,mG:()=>ue,qq:()=>q,FC:()=>oe,KL:()=>Re})},5e3:(et,Ce,P)=>{"use strict";P.d(Ce,{deG:()=>Nh,tb:()=>JE,AFp:()=>Im,ip1:()=>Em,CZH:()=>ap,hGG:()=>CI,z2F:()=>j_,sBO:()=>G_,Sil:()=>Eb,_Vd:()=>Jg,EJc:()=>tI,SBq:()=>El,qLn:()=>cr,vpe:()=>Ti,tBr:()=>mi,XFs:()=>at,OlP:()=>sn,zs3:()=>zs,ZZ4:()=>Q_,aQg:()=>fp,soG:()=>Cm,YKP:()=>Ku,h0i:()=>gs,PXZ:()=>V_,R0b:()=>Co,FiY:()=>Gr,Lbi:()=>Tm,g9A:()=>bm,Qsj:()=>r_,FYo:()=>yE,JOm:()=>ae,tp0:()=>Dr,Rgc:()=>ch,dDg:()=>sI,q4F:()=>qf,GfV:()=>Gf,s_b:()=>lh,ifc:()=>Tt,eFA:()=>Mm,G48:()=>Cb,X6Q:()=>dI,_c5:()=>TI,VLi:()=>L_,c2e:()=>XE,zSh:()=>$a,wAp:()=>dt,vHH:()=>Me,cg1:()=>Lv,kL8:()=>Zd,dqk:()=>Nt,sIi:()=>Lu,CqO:()=>xw,QGY:()=>Pg,F4k:()=>ze,RDi:()=>tc,AaK:()=>ue,TTD:()=>Po,xp6:()=>M0,uIk:()=>bf,Suo:()=>v_,Xpm:()=>Zt,lG2:()=>ru,Yz7:()=>jt,cJS:()=>$t,oAB:()=>mr,Yjl:()=>aa,Y36:()=>Xo,_UZ:()=>Sf,qZA:()=>ea,TgZ:()=>dn,LFG:()=>Ee,$8M:()=>yn,$Z:()=>Sw,NdJ:()=>za,CRH:()=>PE,ALo:()=>CE,lcZ:()=>c_,Q6J:()=>Zn,iGM:()=>dm,LSH:()=>cd,YNc:()=>dv,_uU:()=>Cv,hij:()=>na});var _=P(7579),Y=P(727),O=P(8306),fe=P(6451),X=P(3099);function he(i){for(let s in i)if(i[s]===he)return s;throw Error("Could not find renamed property on target object.")}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=he({__forward_ref__:he});function U(i){return i.__forward_ref__=U,i.toString=function(){return ue(this())},i}function Z(i){return function Ue(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===U}(i)?i():i}class Me extends Error{constructor(s,a){super(function Fe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function q(i){return"string"==typeof i?i:null==i?"":String(i)}function oe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():q(i)}function pe(i,s){const a=s?` in ${s}`:"";throw new Me(-201,`No provider for ${oe(i)} found${a}`)}function tt(i,s){null==i&&function it(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function $t(i){return{providers:i.providers||[],imports:i.imports||[]}}function At(i){return Wi(i,Si)||Wi(i,ei)}function Wi(i,s){return i.hasOwnProperty(s)?i[s]:null}function gr(i){return i&&(i.hasOwnProperty(Is)||i.hasOwnProperty(xi))?i[Is]:null}const Si=he({\u0275prov:he}),Is=he({\u0275inj:he}),ei=he({ngInjectableDef:he}),xi=he({ngInjectorDef:he});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Pr;function pn(i){const s=Pr;return Pr=i,s}function Qs(i,s,a){const u=At(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&at.Optional?null:void 0!==s?s:void pe(ue(i),"Injector")}function Ze(i){return{toString:i}.toString()}var bt=(()=>((bt=bt||{})[bt.OnPush=0]="OnPush",bt[bt.Default=1]="Default",bt))(),Tt=(()=>{return(i=Tt||(Tt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Tt;var i})();const Ye="undefined"!=typeof globalThis&&globalThis,st="undefined"!=typeof window&&window,hi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=Ye||"undefined"!=typeof global&&global||st||hi,ti={},L=[],j=he({\u0275cmp:he}),$=he({\u0275dir:he}),Ie=he({\u0275pipe:he}),J=he({\u0275mod:he}),qe=he({\u0275fac:he}),ct=he({__NG_ELEMENT_ID__:he});let zt=0;function Zt(i){return Ze(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Tt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,f=i.features,y=i.pipes;return u.id+=zt++,u.inputs=oa(i.inputs,a),u.outputs=oa(i.outputs),f&&f.forEach(w=>w(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(Fr):null,u.pipeDefs=y?()=>("function"==typeof y?y():y).map(It):null,u})}function Fr(i){return On(i)||function yr(i){return i[$]||null}(i)}function It(i){return function Zi(i){return i[Ie]||null}(i)}const Nn={};function mr(i){return Ze(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Nn[i.id]=i.type),s})}function oa(i,s){if(null==i)return ti;const a={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=u,s&&(s[l]=f)}return a}const ru=Zt;function aa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function On(i){return i[j]||null}function Pn(i,s){const a=i[J]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function fi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ni(i){return Array.isArray(i)&&!0===i[1]}function Nl(i){return 0!=(8&i.flags)}function iu(i){return 2==(2&i.flags)}function Ts(i){return 1==(1&i.flags)}function ri(i){return null!==i.template}function Dh(i){return 0!=(512&i[2])}function ii(i,s){return i.hasOwnProperty(qe)?i[qe]:null}class no{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Po(){return ko}function ko(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cp),Ll}function Ll(){const i=Ul(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ti)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Cp(i,s,a,u){const l=Ul(i)||function es(i,s){return i[As]=s}(i,{previous:ti,current:null}),f=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[a],I=y[w];f[w]=new no(I&&I.currentValue,s,y===ti),i[u]=s}Po.ngInherit=!0;const As="__ngSimpleChanges__";function Ul(i){return i[As]||null}let uu;function tc(i){uu=i}function Kt(i){return!!i.listen}const da={createRenderer:(i,s)=>function ts(){return void 0!==uu?uu:"undefined"!=typeof document?document:void 0}()};function Gt(i){for(;Array.isArray(i);)i=i[0];return i}function Hn(i,s){return Gt(s[i.index])}function an(i,s){return i.data[s]}function Gn(i,s){const a=s[i];return fi(a)?a:a[0]}function Fo(i){return 4==(4&i[2])}function Mi(i){return 128==(128&i[2])}function Br(i,s){return null==s?null:i[s]}function xs(i){i[18]=0}function Ms(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ot={lFrame:oo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ic(){return ot.bindingsEnabled}function De(){return ot.lFrame.lView}function Ct(){return ot.lFrame.tView}function un(){let i=Rs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Rs(){return ot.lFrame.currentTNode}function _r(i,s){const a=ot.lFrame;a.currentTNode=i,a.isParent=s}function sc(){return ot.lFrame.isParent}function va(){return ot.isInCheckNoChangesMode}function Lo(i){ot.isInCheckNoChangesMode=i}function Ri(){return ot.lFrame.bindingIndex++}function wa(i,s){const a=ot.lFrame;a.bindingIndex=a.bindingRootIndex=i,io(s)}function io(i){ot.lFrame.currentDirectiveIndex=i}function Ea(){return ot.lFrame.currentQueryIndex}function cc(i){ot.lFrame.currentQueryIndex=i}function Ap(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function hu(i,s,a){if(a&at.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&at.Host||(l=Ap(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const u=ot.lFrame=lc();return u.currentTNode=s,u.lView=i,!0}function so(i){const s=lc(),a=i[1];ot.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function lc(){const i=ot.lFrame,s=null===i?null:i.child;return null===s?oo(i):s}function oo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Wl(){const i=ot.lFrame;return ot.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ch=Wl;function Uo(){const i=Wl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qn(){return ot.lFrame.selectedIndex}function is(i){ot.lFrame.selectedIndex=i}function cn(){const i=ot.lFrame;return an(i.tView,i.selectedIndex)}function ss(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ia(i,s,a){zn(i,s,3,a)}function hc(i,s,a,u){(3&i[2])===a&&zn(i,s,a,u)}function fu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function zn(i,s,a,u){const f=null!=u?u:-1,y=s.length-1;let w=0;for(let I=void 0!==u?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=u&&w>=u)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(xh(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function xh(i,s,a,u){const l=a[u]<0,f=a[u+1],w=i[l?-a[u]:a[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Vo{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Tn(i,s,a){const u=Kt(i);let l=0;for(;l<a.length;){const f=a[l];if("number"==typeof f){if(0!==f)break;l++;const y=a[l++],w=a[l++],I=a[l++];u?i.setAttribute(s,w,I,y):s.setAttributeNS(y,w,I)}else{const y=f,w=a[++l];Oi(y)?u&&i.setProperty(s,y,w):u?i.setAttribute(s,y,w):s.setAttribute(y,w),l++}}return l}function nt(i){return 3===i||4===i||6===i}function Oi(i){return 64===i.charCodeAt(0)}function wr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?a=l:0===a||Er(i,a,l,null,-1===a||2===a?s[++u]:null)}}return i}function Er(i,s,a,u,l){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===u)return void(null!==l&&(i[f+1]=l));if(u===i[f+1])return void(i[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==l&&i.splice(f++,0,l)}function Zl(i){return-1!==i}function tn(i){return 32767&i}function Ns(i,s){let a=function fc(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Ta=!0;function ao(i){const s=Ta;return Ta=i,s}let Rh=0;function Os(i,s){const a=Ps(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Cn(u.data,i),Cn(s,null),Cn(u.blueprint,null));const l=mu(i,s),f=i.injectorIndex;if(Zl(l)){const y=tn(l),w=Ns(l,s),I=w[1].data;for(let A=0;A<8;A++)s[f+A]=w[y+A]|I[y+A]}return s[f+8]=l,f}function Cn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ps(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function mu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,l=s;for(;null!==l;){const f=l[1],y=f.type;if(u=2===y?f.declTNode:1===y?l[6]:null,null===u)return-1;if(a++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Ir(i,s,a){!function gu(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(u=a[ct]),null==u&&(u=a[ct]=Rh++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function uo(i,s,a){if(a&at.Optional)return i;pe(s,"NodeInjector")}function ks(i,s,a,u){if(a&at.Optional&&void 0===u&&(u=null),0==(a&(at.Self|at.Host))){const l=i[9],f=pn(void 0);try{return l?l.get(s,u,a&at.Optional):Qs(s,u,a&at.Optional)}finally{pn(f)}}return uo(u,s,a)}function Ca(i,s,a,u=at.Default,l){if(null!==i){const f=function Yl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:Fs:s}(a);if("function"==typeof f){if(!hu(s,i,u))return u&at.Host?uo(l,a,u):ks(s,a,u,l);try{const y=f(u);if(null!=y||u&at.Optional)return y;pe(a)}finally{Ch()}}else if("number"==typeof f){let y=null,w=Ps(i,s),I=-1,A=u&at.Host?s[16][6]:null;for((-1===w||u&at.SkipSelf)&&(I=-1===w?mu(i,s):s[w+8],-1!==I&&Aa(u,!1)?(y=s[1],w=tn(I),s=Ns(I,s)):w=-1);-1!==w;){const S=s[1];if(lo(f,w,S.data)){const k=gc(w,s,a,y,u,A);if(k!==co)return k}I=s[w+8],-1!==I&&Aa(u,s[1].data[w+8]===A)&&lo(f,w,s)?(y=S,w=tn(I),s=Ns(I,s)):w=-1}}}return ks(s,a,u,l)}const co={};function Fs(){return new mn(un(),De())}function gc(i,s,a,u,l,f){const y=s[1],w=y.data[i+8],S=vu(w,y,a,null==u?iu(w)&&Ta:u!=y&&0!=(3&w.type),l&at.Host&&f===w);return null!==S?oi(s,y,S,w):co}function vu(i,s,a,u,l){const f=i.providerIndexes,y=s.data,w=1048575&f,I=i.directiveStart,S=f>>20,V=l?w+S:i.directiveEnd;for(let K=u?w:w+S;K<V;K++){const ye=y[K];if(K<I&&a===ye||K>=I&&ye.type===a)return K}if(l){const K=y[I];if(K&&ri(K)&&K.type===a)return I}return null}function oi(i,s,a,u){let l=i[a];const f=s.data;if(function Sp(i){return i instanceof Vo}(l)){const y=l;y.resolving&&function Se(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Me(-200,`Circular dependency in DI detected for ${i}${a}`)}(oe(f[a]));const w=ao(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?pn(y.injectImpl):null;hu(i,u,at.Default);try{l=i[a]=y.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function dc(i,s,a){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(u){const y=ko(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&pn(I),ao(w),y.resolving=!1,Ch()}}return l}function lo(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Aa(i,s){return!(i&at.Self||i&at.Host&&s)}class mn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Ca(this._tNode,this._lView,s,u,a)}}function yn(i){return function yu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let l=0;for(;l<u;){const f=a[l];if(nt(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(un(),i)}const gi="__parameters__";function jr(i,s,a){return Ze(()=>{const u=function Pi(i){return function(...a){if(i){const u=i(...a);for(const l in u)this[l]=u[l]}}}(s);function l(...f){if(this instanceof l)return u.apply(this,f),this;const y=new l(...f);return w.annotation=y,w;function w(I,A,S){const k=I.hasOwnProperty(gi)?I[gi]:Object.defineProperty(I,gi,{value:[]})[gi];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(y),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class sn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nh=new sn("AnalyzeForEntryComponents");function ur(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),ur(u,s)):s!==i&&s.push(u)}return s}function ai(i,s){i.forEach(a=>Array.isArray(a)?ai(a,s):s(a))}function Jl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function go(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const $s={},xa="__NG_DI_FLAG__",Ma="ngTempTokenPath",D=/\n/gm,x="__source",F=he({provide:String,useValue:he});let z;function te(i){const s=z;return z=i,s}function Ae(i,s=at.Default){if(void 0===z)throw new Me(203,"");return null===z?Qs(i,void 0,s):z.get(i,s&at.Optional?null:void 0,s)}function Ee(i,s=at.Default){return(function Rn(){return Pr}()||Ae)(Z(i),s)}const St=Ee;function xt(i){const s=[];for(let a=0;a<i.length;a++){const u=Z(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Me(900,"");let l,f=at.Default;for(let y=0;y<u.length;y++){const w=u[y],I=Jn(w);"number"==typeof I?-1===I?l=w.token:f|=I:l=w}s.push(Ee(l,f))}else s.push(Ee(u))}return s}function Sn(i,s){return i[xa]=s,i.prototype[xa]=s,i}function Jn(i){return i[xa]}const mi=Sn(jr("Inject",i=>({token:i})),-1),Gr=Sn(jr("Optional"),8),Dr=Sn(jr("SkipSelf"),4);class Bh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const zo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ey=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var _n=(()=>((_n=_n||{})[_n.NONE=0]="NONE",_n[_n.HTML=1]="HTML",_n[_n.STYLE=2]="STYLE",_n[_n.SCRIPT=3]="SCRIPT",_n[_n.URL=4]="URL",_n[_n.RESOURCE_URL=5]="RESOURCE_URL",_n))();function cd(i){const s=function Tu(){const i=De();return i&&i[12]}();return s?s.sanitize(_n.URL,i)||"":function bc(i,s){const a=function Tc(i){return i instanceof Bh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function Hs(i){return i instanceof Bh?i.changingThisBreaksApplicationSecurity:i}(i):function Wo(i){return(i=String(i)).match(zo)||i.match(ey)?i:"unsafe:"+i}(q(i))}const hd="__ngContext__";function br(i,s){i[hd]=s}function Kh(i){const s=function Ua(i){return i[hd]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Zh(i){return i.ngOriginalError}function qp(i,...s){i.error(...s)}class cr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function Pc(i){return i&&i.ngErrorLogger||qp}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Zh(s);for(;a&&Zh(a);)a=Zh(a);return a||null}}const dy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function p(i){return i instanceof Function?i():i}var ae=(()=>((ae=ae||{})[ae.Important=1]="Important",ae[ae.DashCase=2]="DashCase",ae))();function Qe(i,s){return undefined(i,s)}function rn(i){const s=i[3];return ni(s)?s[3]:s}function pd(i){return gd(i[13])}function Va(i){return gd(i[4])}function gd(i){for(;null!==i&&!ni(i);)i=i[4];return i}function Zo(i,s,a,u,l){if(null!=u){let f,y=!1;ni(u)?f=u:fi(u)&&(y=!0,u=u[0]);const w=Gt(u);0===i&&null!==a?null==l?xu(s,a,w):_d(s,a,w,l||null,!0):1===i&&null!==a?_d(s,a,w,l||null,!0):2===i?function A0(i,s,a){const u=Qp(i,s);u&&function qI(i,s,a,u){Kt(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function zr(i,s,a,u,l){const f=a[7];f!==Gt(a)&&Zo(s,i,u,f,l);for(let w=10;w<a.length;w++){const I=a[w];tf(I[1],I,i,s,u,f)}}(s,i,f,a,l)}}function vd(i,s,a){if(Kt(i))return i.createElement(s,a);{const u=null!==a?function au(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function Lc(i,s){const a=i[9],u=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,Ms(l,-1)),a.splice(u,1)}function _y(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const l=u[17];null!==l&&l!==i&&Lc(l,u),s>0&&(i[a-1][4]=u[4]);const f=go(i,10+s);!function gy(i,s){tf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=f[19];null!==y&&y.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function w0(i,s){if(!(256&s[2])){const a=s[11];Kt(a)&&a.destroyNode&&tf(i,s,a,3,null,null),function Kp(i){let s=i[13];if(!s)return Zp(i[1],i);for(;s;){let a=null;if(fi(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)fi(s)&&Zp(s[1],s),s=s[3];null===s&&(s=i),fi(s)&&Zp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Zp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function E0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const l=s[a[u]];if(!(l instanceof Vo)){const f=a[u+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=l[f[y]],I=f[y+1];try{I.call(w)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function GI(i,s){const a=i.cleanup,u=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(s):Gt(s[y]),I=u[l=a[f+2]],A=a[f+3];"boolean"==typeof A?w.removeEventListener(a[f],I,A):A>=0?u[l=A]():u[l=-A].unsubscribe(),f+=2}else{const y=u[l=a[f+1]];a[f].call(y)}if(null!==u){for(let f=l+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&Kt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ni(s[3])){a!==s[3]&&Lc(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function wy(i,s,a){return function Yp(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===Tt.None||l===Tt.Emulated)return null}return Hn(u,a)}(i,s.parent,a)}function _d(i,s,a,u,l){Kt(i)?i.insertBefore(s,a,u,l):s.insertBefore(a,u,l)}function xu(i,s,a){Kt(i)?i.appendChild(s,a):s.appendChild(a)}function Ey(i,s,a,u,l){null!==u?_d(i,s,a,u,l):xu(i,s,a)}function Qp(i,s){return Kt(i)?i.parentNode(s):s.parentNode}let T0=function b0(i,s,a){return 40&i.type?Hn(i,a):null};function Xp(i,s,a,u){const l=wy(i,u,s),f=s[11],w=function D0(i,s,a){return T0(i,s,a)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)Ey(f,l,a[I],w,!1);else Ey(f,l,a,w,!1)}function eg(i,s){if(null!==s){const a=s.type;if(3&a)return Hn(s,i);if(4&a)return Iy(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return eg(i,u);{const l=i[s.index];return ni(l)?Iy(-1,l):Gt(l)}}if(32&a)return Qe(s,i)()||Gt(i[s.index]);{const u=tg(i,s);return null!==u?Array.isArray(u)?u[0]:eg(rn(i[16]),u):eg(i,s.next)}}return null}function tg(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Iy(i,s){const a=10+i+1;if(a<s.length){const u=s[a],l=u[1].firstChild;if(null!==l)return eg(u,l)}return s[7]}function ng(i,s,a,u,l,f,y){for(;null!=a;){const w=u[a.index],I=a.type;if(y&&0===s&&(w&&br(Gt(w),u),a.flags|=4),64!=(64&a.flags))if(8&I)ng(i,s,a.child,u,l,f,!1),Zo(s,i,l,w,f);else if(32&I){const A=Qe(a,u);let S;for(;S=A();)Zo(s,i,l,S,f);Zo(s,i,l,w,f)}else 16&I?S0(i,s,u,a,l,f):Zo(s,i,l,w,f);a=y?a.projectionNext:a.next}}function tf(i,s,a,u,l,f){ng(a,u,i.firstChild,s,l,f,!1)}function S0(i,s,a,u,l,f){const y=a[16],I=y[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Zo(s,i,l,I[A],f);else ng(i,s,I,y[3],l,f,!0)}function x0(i,s,a){Kt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function by(i,s,a){Kt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function zI(i,s,a){let u=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===u||i.charCodeAt(l+f)<=32)return l}a=l+1}}const _e="ng-template";function Uc(i,s,a){let u=0;for(;u<i.length;){let l=i[u++];if(a&&"class"===l){if(l=i[u],-1!==zI(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function nf(i){return 4===i.type&&i.value!==_e}function Mu(i,s,a){return s===(4!==i.type||a?i.value:_e)}function Mt(i,s,a){let u=4;const l=i.attrs||[],f=function vt(i){for(let s=0;s<i.length;s++)if(nt(i[s]))return s;return i.length}(l);let y=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!y)if(4&u){if(u=2|1&u,""!==I&&!Mu(i,I,a)||""===I&&1===s.length){if(wo(u))return!1;y=!0}}else{const A=8&u?I:s[++w];if(8&u&&null!==i.attrs){if(!Uc(i.attrs,A,a)){if(wo(u))return!1;y=!0}continue}const k=Ba(8&u?"class":I,l,nf(i),a);if(-1===k){if(wo(u))return!1;y=!0;continue}if(""!==A){let V;V=k>f?"":l[k+1].toLowerCase();const K=8&u?V:null;if(K&&-1!==zI(K,A,0)||2&u&&A!==V){if(wo(u))return!1;y=!0}}}}else{if(!y&&!wo(u)&&!wo(I))return!1;if(y&&wo(I))continue;y=!1,u=I|1&u}}return wo(u)||y}function wo(i){return 0==(1&i)}function Ba(i,s,a,u){if(null===s)return-1;let l=0;if(u||!a){let f=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++l];for(;"string"==typeof w;)w=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function rg(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function We(i,s,a=!1){for(let u=0;u<s.length;u++)if(Mt(i,s[u],a))return!0;return!1}function wd(i,s){return i?":not("+s.trim()+")":s}function WI(i){let s=i[0],a=1,u=2,l="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&u){const w=i[++a];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?l+="."+y:4&u&&(l+=" "+y);else""!==l&&!wo(y)&&(s+=wd(f,l),l=""),u=y,f=f||!wo(u);a++}return""!==l&&(s+=wd(f,l)),s}const wt={};function M0(i){Tr(Ct(),De(),qn()+i,va())}function Tr(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ia(s,f,a)}else{const f=i.preOrderHooks;null!==f&&hc(s,f,0,a)}is(a)}function q0(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const l=a[u],f=a[u+1];if(-1!==f){const y=i.data[f];cc(l),y.contentQueries(2,s[f],f)}}}function Vc(i,s,a,u,l,f,y,w,I,A){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,xs(S),S[3]=S[15]=i,S[8]=a,S[10]=y||i&&i[10],S[11]=w||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Bc(i,s,a,u,l){let f=i.data[s];if(null===f)f=function Uy(i,s,a,u,l){const f=Rs(),y=sc(),I=i.data[s]=function By(i,s,a,u,l,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,u,l);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,l),function _a(){return ot.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=l;const y=function ya(){const i=ot.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return _r(f,!0),f}function Ru(i,s,a,u){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function jc(i,s,a){so(s);try{const u=i.viewQuery;null!==u&&yg(1,u,a);const l=i.template;null!==l&&xr(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&q0(i,s),i.staticViewQueries&&yg(2,i.viewQuery,a);const f=i.components;null!==f&&function W0(i,s){for(let a=0;a<s.length;a++)Ky(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Uo()}}function Nu(i,s,a,u){const l=s[2];if(256==(256&l))return;so(s);const f=va();try{xs(s),function ac(i){return ot.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&xr(i,s,a,2,u);const y=3==(3&l);if(!f)if(y){const A=i.preOrderCheckHooks;null!==A&&Ia(s,A,null)}else{const A=i.preOrderHooks;null!==A&&hc(s,A,0,null),fu(s,0)}if(function ff(i){for(let s=pd(i);null!==s;s=Va(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const l=a[u],f=l[3];0==(1024&l[2])&&Ms(f,1),l[2]|=1024}}}(s),function sw(i){for(let s=pd(i);null!==s;s=Va(s))for(let a=10;a<s.length;a++){const u=s[a],l=u[1];Mi(u)&&Nu(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&q0(i,s),!f)if(y){const A=i.contentCheckHooks;null!==A&&Ia(s,A)}else{const A=i.contentHooks;null!==A&&hc(s,A,1),fu(s,1)}!function G0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const l=a[u];if(l<0)is(~l);else{const f=l,y=a[++u],w=a[++u];wa(y,f),w(2,s[f])}}}finally{is(-1)}}(i,s);const w=i.components;null!==w&&function z0(i,s){for(let a=0;a<s.length;a++)Wy(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&yg(2,I,u),!f)if(y){const A=i.viewCheckHooks;null!==A&&Ia(s,A)}else{const A=i.viewHooks;null!==A&&hc(s,A,2),fu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ms(s[3],-1))}finally{Uo()}}function Sr(i,s,a,u){const l=s[10],f=!va(),y=Fo(s);try{f&&!y&&l.begin&&l.begin(),y&&jc(i,s,u),Nu(i,s,a,u)}finally{f&&!y&&l.end&&l.end()}}function xr(i,s,a,u,l){const f=qn(),y=2&u;try{is(-1),y&&s.length>20&&Tr(i,s,20,va()),a(u,l)}finally{is(f)}}function df(i,s,a){!ic()||(function Td(i,s,a,u){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Os(a,s),br(u,s);const y=a.initialInputs;for(let w=l;w<f;w++){const I=i.data[w],A=ri(I);A&&Ii(s,a,I);const S=oi(s,i,w,a);br(S,s),null!==y&&fg(0,w-l,S,I,0,y),A&&(Gn(a.index,s)[8]=S)}}(i,s,a,Hn(a,s)),128==(128&a.flags)&&function rD(i,s,a){const u=a.directiveStart,l=a.directiveEnd,y=a.index,w=function zl(){return ot.lFrame.currentDirectiveIndex}();try{is(y);for(let I=u;I<l;I++){const A=i.data[I],S=s[I];io(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&tw(A,S)}}finally{is(-1),io(w)}}(i,s,a))}function Vy(i,s,a=Hn){const u=s.localNames;if(null!==u){let l=s.index+1;for(let f=0;f<u.length;f+=2){const y=u[f+1],w=-1===y?a(s,i):i[y];i[l++]=w}}}function K0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=hf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function hf(i,s,a,u,l,f,y,w,I,A){const S=20+u,k=S+l,V=function XI(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:wt);return a}(S,k),K="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:w,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function Q0(i,s,a,u){const l=Zy(s);null===a?l.push(u):(l.push(a),i.firstCreatePass&&yf(i).push(u,l.length-1))}function jy(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,l):a[u]=[s,l]}return a}function bd(i,s,a,u){let l=!1;if(ic()){const f=function $c(i,s,a){const u=i.directiveRegistry;let l=null;if(u)for(let f=0;f<u.length;f++){const y=u[f];We(a,y.selectors,!1)&&(l||(l=[]),Ir(Os(a,s),i,y.type),ri(y)?(Gy(i,a),l.unshift(y)):l.push(y))}return l}(i,s,a),y=null===u?null:{"":-1};if(null!==f){l=!0,Cd(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,A=Ru(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=wr(a.mergedAttrs,k.hostAttrs),qy(i,a,s,A,k),nw(A,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function eD(i,s){const u=s.directiveEnd,l=i.data,f=s.attrs,y=[];let w=null,I=null;for(let A=s.directiveStart;A<u;A++){const S=l[A],k=S.inputs,V=null===f||nf(s)?null:rw(k,f);y.push(V),w=jy(k,A,w),I=jy(S.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=I}(i,a)}y&&function hg(i,s,a){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new Me(-301,!1);u.push(s[l],f)}}}(a,u,y)}return a.mergedAttrs=wr(a.mergedAttrs,a.attrs),l}function ew(i,s,a,u,l,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function nD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(u,l,y)}}function tw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Gy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function nw(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;ri(s)&&(a[""]=i)}}function Cd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function qy(i,s,a,u,l){i.data[u]=l;const f=l.factory||(l.factory=ii(l.type)),y=new Vo(f,ri(l),null);i.blueprint[u]=y,a[u]=y,ew(i,s,0,u,Ru(i,a,l.hostVars,wt),l)}function Ii(i,s,a){const u=Hn(s,i),l=K0(a),f=i[10],y=Ou(i,Vc(i,l,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=y}function Eo(i,s,a,u,l,f){const y=Hn(i,s);!function Hc(i,s,a,u,l,f,y){if(null==f)Kt(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const w=null==y?q(f):y(f,u||"",l);Kt(i)?i.setAttribute(s,l,w,a):a?s.setAttributeNS(a,l,w):s.setAttribute(l,w)}}(s[11],y,f,i.value,a,u,l)}function fg(i,s,a,u,l,f){const y=f[s];if(null!==y){const w=u.setInput;for(let I=0;I<y.length;){const A=y[I++],S=y[I++],k=y[I++];null!==w?u.setInput(a,k,A,S):a[S]=k}}}function rw(i,s){let a=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return a}function zy(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function Wy(i,s){const a=Gn(s,i);if(Mi(a)){const u=a[1];80&a[2]?Nu(u,a,u.template,a[8]):a[5]>0&&pf(a)}}function pf(i){for(let u=pd(i);null!==u;u=Va(u))for(let l=10;l<u.length;l++){const f=u[l];if(1024&f[2]){const y=f[1];Nu(y,f,y.template,f[8])}else f[5]>0&&pf(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const l=Gn(a[u],i);Mi(l)&&l[5]>0&&pf(l)}}function Ky(i,s){const a=Gn(s,i),u=a[1];(function pg(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),jc(u,a,a[8])}function Ou(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function gg(i){for(;i;){i[2]|=64;const s=rn(i);if(Dh(i)&&!s)return i;i=s}return null}function Ad(i,s,a){const u=s[10];u.begin&&u.begin();try{Nu(i,s,i.template,a)}catch(l){throw Pu(s,l),l}finally{u.end&&u.end()}}function mg(i){!function gf(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Kh(a),l=u[1];Sr(l,u,l.template,a)}}(i[8])}function yg(i,s,a){cc(0),s(i,a)}const mf=(()=>Promise.resolve(null))();function Zy(i){return i[7]||(i[7]=[])}function yf(i){return i.cleanup||(i.cleanup=[])}function Pu(i,s){const a=i[9],u=a?a.get(cr,null):null;u&&u.handleError(s)}function vg(i,s,a,u,l){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],I=s[y],A=i.data[y];null!==A.setInput?A.setInput(I,l,u,w):I[w]=l}}function ja(i,s,a){const u=function ro(i,s){return Gt(s[i])}(s,i);!function ef(i,s,a){Kt(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function xd(i,s,a){let u=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?l=ce(l,w):2==f&&(u=ce(u,w+": "+s[++y]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=l:i.classesWithoutHost=l}const _g=new sn("INJECTOR",-1);class uw{get(s,a=$s){if(a===$s){const u=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw u.name="NullInjectorError",u}return a}}const $a=new sn("Set Injector scope."),cs={},wg={};let Nd;function vf(){return void 0===Nd&&(Nd=new uw),Nd}function Qy(i,s=null,a=null,u){const l=ln(i,s,a,u);return l._resolveInjectorDefTypes(),l}function ln(i,s=null,a=null,u){return new Eg(i,a,s||vf(),u)}class Eg{constructor(s,a,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ai(a,w=>this.processProvider(w,s,a)),ai([s],w=>this.processInjectorType(w,[],f)),this.records.set(_g,Pd(void 0,this));const y=this.records.get($a);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof s?null:ue(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=$s,u=at.Default){this.assertNotDestroyed();const l=te(this),f=pn(void 0);try{if(!(u&at.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function cw(i){return"function"==typeof i||"object"==typeof i&&i instanceof sn}(s)&&At(s);w=I&&this.injectableDefInScope(I)?Pd(Jy(s),cs):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(u&at.Self?vf():this.parent).get(s,a=u&at.Optional&&a===$s?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ma]=y[Ma]||[]).unshift(ue(s)),l)throw y;return function vn(i,s,a,u){const l=i[Ma];throw s[x]&&l.unshift(s[x]),i.message=function Ra(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=ue(s);if(Array.isArray(s))l=s.map(ue).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ue(w)))}l=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${l}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,l,a,u),i.ngTokenPath=l,i[Ma]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{pn(f),te(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(ue(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(s,a,u){if(!(s=Z(s)))return!1;let l=gr(s);const f=null==l&&s.ngModule||void 0,y=void 0===f?s:f,w=-1!==u.indexOf(y);if(void 0!==f&&(l=gr(f)),null==l)return!1;if(null!=l.imports&&!w){let S;u.push(y);try{ai(l.imports,k=>{this.processInjectorType(k,a,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:K}=S[k];ai(K,ye=>this.processProvider(ye,V,K||L))}}this.injectorDefTypes.add(y);const I=ii(y)||(()=>new y);this.records.set(y,Pd(I,cs));const A=l.providers;if(null!=A&&!w){const S=s;ai(A,k=>this.processProvider(k,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let l=kd(s=Z(s))?s:Z(s&&s.provide);const f=function _f(i,s,a){return Xy(i)?Pd(void 0,i.useValue):Pd(function Od(i,s,a){let u;if(kd(i)){const l=Z(i);return ii(l)||Jy(l)}if(Xy(i))u=()=>Z(i.useValue);else if(function aD(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...xt(i.deps||[]));else if(function oD(i){return!(!i||!i.useExisting)}(i))u=()=>Ee(Z(i.useExisting));else{const l=Z(i&&(i.useClass||i.provide));if(!function wf(i){return!!i.deps}(i))return ii(l)||Jy(l);u=()=>new l(...xt(i.deps))}return u}(i),cs)}(s);if(kd(s)||!0!==s.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=Pd(void 0,cs,!0),y.factory=()=>xt(y.multi),this.records.set(l,y)),l=s,y.multi.push(s)}this.records.set(l,f)}hydrate(s,a){return a.value===cs&&(a.value=wg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ku(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Jy(i){const s=At(i),a=null!==s?s.factory:ii(i);if(null!==a)return a;if(i instanceof sn)throw new Me(204,!1);if(i instanceof Function)return function sD(i){const s=i.length;if(s>0)throw function ui(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Me(204,!1);const a=function Yn(i){const s=i&&(i[Si]||i[ei]);if(s){const a=function Es(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Me(204,!1)}function Pd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Xy(i){return null!==i&&"object"==typeof i&&F in i}function kd(i){return"function"==typeof i}let zs=(()=>{class i{static create(a,u){var l;if(Array.isArray(a))return Qy({name:""},u,a,"");{const f=null!==(l=a.name)&&void 0!==l?l:"";return Qy({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=$s,i.NULL=new uw,i.\u0275prov=jt({token:i,providedIn:"any",factory:()=>Ee(_g)}),i.__NG_ELEMENT_ID__=-1,i})();function fD(i,s){ss(Kh(i)[1],un())}let Fu=null;function qc(){if(!Fu){const i=Nt.Symbol;if(i&&i.iterator)Fu=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Fu=u)}}}return Fu}function Lu(i){return!!Ld(i)&&(Array.isArray(i)||!(i instanceof Map)&&qc()in i)}function Ld(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function er(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function bf(i,s,a,u){const l=De();return er(l,Ri(),s)&&(Ct(),Eo(cn(),l,i,s,a,u)),bf}function dv(i,s,a,u,l,f,y,w){const I=De(),A=Ct(),S=i+20,k=A.firstCreatePass?function gD(i,s,a,u,l,f,y,w,I){const A=s.consts,S=Bc(s,i,4,y||null,Br(A,w));bd(s,a,S,Br(A,I)),ss(s,S);const k=S.tViews=hf(2,S,u,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,u,l,f,y):A.data[S];_r(k,!1);const V=I[11].createComment("");Xp(A,I,V,k),br(V,I),Ou(I,I[S]=zy(V,I,V,k)),Ts(k)&&df(A,I,k),null!=y&&Vy(I,k,w)}function Xo(i,s=at.Default){const a=De();return null===a?Ee(i,s):Ca(un(),a,Z(i),s)}function Sw(){throw new Error("invalid")}function Zn(i,s,a){const u=De();return er(u,Ri(),s)&&function Ei(i,s,a,u,l,f,y,w){const I=Hn(s,a);let S,A=s.inputs;!w&&null!=A&&(S=A[u])?(vg(i,a,S,u,l),iu(s)&&function $y(i,s){const a=Gn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function lg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=y?y(l,s.value||"",u):l,Kt(f)?f.setProperty(I,u,l):Oi(u)||(I.setProperty?I.setProperty(u,l):I[u]=l))}(Ct(),cn(),u,i,s,u[11],a,!1),Zn}function pv(i,s,a,u,l){const y=l?"class":"style";vg(i,a,s.inputs[y],y,u)}function dn(i,s,a,u){const l=De(),f=Ct(),y=20+i,w=l[11],I=l[y]=vd(w,s,function Kl(){return ot.lFrame.currentNamespace}()),A=f.firstCreatePass?function ju(i,s,a,u,l,f,y){const w=s.consts,A=Bc(s,i,2,l,Br(w,f));return bd(s,a,A,Br(w,y)),null!==A.attrs&&xd(A,A.attrs,!1),null!==A.mergedAttrs&&xd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(y,f,l,0,s,a,u):f.data[y];_r(A,!0);const S=A.mergedAttrs;null!==S&&Tn(w,I,S);const k=A.classes;null!==k&&by(w,I,k);const V=A.styles;return null!==V&&x0(w,I,V),64!=(64&A.flags)&&Xp(f,l,I,A),0===function pa(){return ot.lFrame.elementDepthCount}()&&br(I,l),function $l(){ot.lFrame.elementDepthCount++}(),Ts(A)&&(df(f,l,A),function lf(i,s,a){if(Nl(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,A,l)),null!==u&&Vy(l,A),dn}function ea(){let i=un();sc()?function oc(){ot.lFrame.isParent=!1}():(i=i.parent,_r(i,!1));const s=i;!function ga(){ot.lFrame.elementDepthCount--}();const a=Ct();return a.firstCreatePass&&(ss(a,i),Nl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mh(i){return 0!=(16&i.flags)}(s)&&pv(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function xp(i){return 0!=(32&i.flags)}(s)&&pv(a,s,De(),s.stylesWithoutHost,!1),ea}function Sf(i,s,a,u){return dn(i,s,a,u),ea(),Sf}function Pg(i){return!!i&&"function"==typeof i.then}function ze(i){return!!i&&"function"==typeof i.subscribe}const xw=ze;function za(i,s,a,u){const l=De(),f=Ct(),y=un();return function tl(i,s,a,u,l,f,y,w){const I=Ts(u),S=i.firstCreatePass&&yf(i),k=s[8],V=Zy(s);let K=!0;if(3&u.type||w){const $e=Hn(u,s),Ke=w?w($e):$e,Te=V.length,ut=w?_t=>w(Gt(_t[u.index])):u.index;if(Kt(a)){let _t=null;if(!w&&I&&(_t=function Rf(i,s,a,u){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===a&&l[f+1]===u){const w=s[7],I=l[f+2];return w.length>I?w[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,l,u.index)),null!==_t)(_t.__ngLastListenerFn__||_t).__ngNextListenerFn__=f,_t.__ngLastListenerFn__=f,K=!1;else{f=Hu(u,s,k,f,!1);const Jt=a.listen(Ke,l,f);V.push(f,Jt),S&&S.push(l,ut,Te,Te+1)}}else f=Hu(u,s,k,f,!0),Ke.addEventListener(l,f,y),V.push(f),S&&S.push(l,ut,Te,y)}else f=Hu(u,s,k,f,!1);const ye=u.outputs;let ke;if(K&&null!==ye&&(ke=ye[l])){const $e=ke.length;if($e)for(let Ke=0;Ke<$e;Ke+=2){const jn=s[ke[Ke]][ke[Ke+1]].subscribe(f),ys=V.length;V.push(f,jn),S&&S.push(l,u.index,ys,-(ys+1))}}}(f,l,l[11],y,i,s,!!a,u),za}function mv(i,s,a,u){try{return!1!==a(u)}catch(l){return Pu(i,l),!1}}function Hu(i,s,a,u,l){return function f(y){if(y===Function)return u;const w=2&i.flags?Gn(i.index,s):s;0==(32&s[2])&&gg(w);let I=mv(s,0,u,y),A=f.__ngNextListenerFn__;for(;A;)I=mv(s,0,A,y)&&I,A=A.__ngNextListenerFn__;return l&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Cv(i,s=""){const a=De(),u=Ct(),l=i+20,f=u.firstCreatePass?Bc(u,l,1,s,null):u.data[l],y=a[l]=function md(i,s){return Kt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Xp(u,a,y,f),_r(f,!1)}function na(i,s,a){const u=De(),l=function Ga(i,s,a,u){return er(i,Ri(),a)?s+q(a)+u:wt}(u,i,s,a);return l!==wt&&ja(u,qn(),l),na}const ll=void 0;var LD=["en",[["a","p"],["AM","PM"],ll],[["AM","PM"],ll,ll],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ll,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ll,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ll,"{1} 'at' {0}",ll],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Fv(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Kd={};function Lv(i){const s=function Ww(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Yd(s);if(a)return a;const u=s.split("-")[0];if(a=Yd(u),a)return a;if("en"===u)return LD;throw new Error(`Missing locale data for the locale "${i}".`)}function Zd(i){return Lv(i)[dt.PluralCase]}function Yd(i){return i in Kd||(Kd[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),Kd[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Bf="en-US";let Bv=Bf;class rh{}class ZD{resolveComponentFactory(s){throw function Qg(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Jg=(()=>{class i{}return i.NULL=new ZD,i})();function YD(){return wl(un(),De())}function wl(i,s){return new El(Hn(i,s))}let El=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=YD,i})();function n_(i){return i instanceof El?i.nativeElement:i}class yE{}let r_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function vE(){const i=De(),a=Gn(un().index,i);return function JD(i){return i[11]}(fi(a)?a:i)}(),i})(),Xg=(()=>{class i{}return i.\u0275prov=jt({token:i,providedIn:"root",factory:()=>null}),i})();class Gf{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const qf=new Gf("13.2.5"),em={};function Xr(i,s,a,u,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(Gt(f)),ni(f))for(let w=10;w<f.length;w++){const I=f[w],A=I[1].firstChild;null!==A&&Xr(I[1],I,A,u)}const y=a.type;if(8&y)Xr(i,s,a.child,u);else if(32&y){const w=Qe(a,s);let I;for(;I=w();)u.push(I)}else if(16&y){const w=tg(s,a);if(Array.isArray(w))u.push(...w);else{const I=rn(s[16]);Xr(I[1],I,w,u,!0)}}a=l?a.projectionNext:a.next}return u}class ih{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Xr(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ni(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(_y(s,u),go(a,u))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(s){Q0(this._lView[1],this._lView,null,s)}markForCheck(){gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ad(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ow(i,s,a){Lo(!0);try{Ad(i,s,a)}finally{Lo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function my(i,s){tf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=s}}class tm extends ih{constructor(s){super(s),this._view=s}detectChanges(){mg(this._view)}checkNoChanges(){!function aw(i){Lo(!0);try{mg(i)}finally{Lo(!1)}}(this._view)}get context(){return null}}class nm extends Jg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=On(s);return new rm(a,this.ngModule)}}function i_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class rm extends rh{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ay(i){return i.map(WI).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return i_(this.componentDef.inputs)}get outputs(){return i_(this.componentDef.outputs)}create(s,a,u,l){const f=(l=l||this.ngModule)?function sh(i,s){return{get:(a,u,l)=>{const f=i.get(a,em,l);return f!==em||u===em?f:s.get(a,u,l)}}}(s,l.injector):s,y=f.get(yE,da),w=f.get(Xg,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=u?function cg(i,s,a){if(Kt(i))return i.selectRootElement(s,a===Tt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):vd(y.createRenderer(null,this.componentDef),A,function Wu(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function pw(i,s){return{components:[],scheduler:i||dy,clean:mf,playerHandler:s||null,flags:0}}(),K=hf(0,null,null,1,0,null,null,null,null,null),ye=Vc(null,K,V,k,null,null,y,I,w,f);let ke,$e;so(ye);try{const Ke=function Kn(i,s,a,u,l,f){const y=a[1];a[20]=i;const I=Bc(y,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(xd(I,A,!0),null!==i&&(Tn(l,i,A),null!==I.classes&&by(l,i,I.classes),null!==I.styles&&x0(l,i,I.styles)));const S=u.createRenderer(i,s),k=Vc(a,K0(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return y.firstCreatePass&&(Ir(Os(I,a),y,s.type),Gy(y,I),Cd(I,a.length,1)),Ou(a,k),a[20]=k}(S,this.componentDef,ye,y,I);if(S)if(u)Tn(I,S,["ng-version",qf.full]);else{const{attrs:Te,classes:ut}=function KI(i){const s=[],a=[];let u=1,l=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++u]):8===l&&a.push(f);else{if(!wo(l))break;l=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&Tn(I,S,Te),ut&&ut.length>0&&by(I,S,ut.join(" "))}if($e=an(K,20),void 0!==a){const Te=$e.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const _t=a[ut];Te.push(null!=_t?Array.from(_t):null)}}ke=function iv(i,s,a,u,l){const f=a[1],y=function X0(i,s,a){const u=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),qy(i,u,s,Ru(i,s,1,null),a));const l=oi(s,i,u.directiveStart,u);br(l,s);const f=Hn(u,s);return f&&br(f,s),l}(f,a,s);if(u.components.push(y),i[8]=y,l&&l.forEach(I=>I(y,s)),s.contentQueries){const I=un();s.contentQueries(1,y,I.directiveStart)}const w=un();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(is(w.index),ew(a[1],w,0,w.directiveStart,w.directiveEnd,s),tw(s,y)),y}(Ke,this.componentDef,ye,V,[fD]),jc(K,ye,null)}finally{Uo()}return new oh(this.componentType,ke,wl($e,ye),ye,$e)}}class oh extends class t_{}{constructor(s,a,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new tm(l),this.componentType=s}get injector(){return new mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class gs{}class Ku{}const Zu=new Map;class Dl extends gs{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nm(this);const u=Pn(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=ln(s,a,[{provide:gs,useValue:this},{provide:Jg,useValue:this.componentFactoryResolver}],ue(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=zs.THROW_IF_NOT_FOUND,u=at.Default){return s===zs||s===gs||s===_g?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class im extends Ku{constructor(s){super(),this.moduleType=s,null!==Pn(s)&&function eb(i){const s=new Set;!function a(u){const l=Pn(u,!0),f=l.id;null!==f&&(function wE(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ue(s)} vs ${ue(s.name)}`)}(f,Zu.get(f),u),Zu.set(f,u));const y=p(l.imports);for(const w of y)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new Dl(this.moduleType,s)}}function om(i,s,a,u,l,f){const y=s+a;return er(i,y,l)?function Jo(i,s,a){return i[s]=a}(i,y+1,f?u.call(f,l):u(l)):function Qu(i,s){const a=i[s];return a===wt?void 0:a}(i,y+1)}function CE(i,s){const a=Ct();let u;const l=i+20;a.firstCreatePass?(u=function AE(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}}(s,a.pipeRegistry),a.data[l]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,u.onDestroy)):u=a.data[l];const f=u.factory||(u.factory=ii(u.type)),y=pn(Xo);try{const w=ao(!1),I=f();return ao(w),function mD(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,De(),l,I),I}finally{pn(y)}}function c_(i,s,a){const u=i+20,l=De(),f=function ns(i,s){return i[s]}(l,u);return function ah(i,s){return i[1].data[s].pure}(l,u)?om(l,function kn(){const i=ot.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function Ju(i){return s=>{setTimeout(i,void 0,s)}}const Ti=class ob extends _.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var l,f,y;let w=s,I=a||(()=>null),A=u;if(s&&"object"==typeof s){const k=s;w=null===(l=k.next)||void 0===l?void 0:l.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),A=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=Ju(I),w&&(w=Ju(w)),A&&(A=Ju(A)));const S=super.subscribe({next:w,error:I,complete:A});return s instanceof Y.w0&&s.add(S),S}};function d_(){return this._results[qc()]()}class uh{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=qc(),u=uh.prototype;u[a]||(u[a]=d_)}get changes(){return this._changes||(this._changes=new Ti)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const l=ur(s);(this._changesDetected=!function mc(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],f=s[u];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(u._results,l,a))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ch=(()=>{class i{}return i.__NG_ELEMENT_ID__=h_,i})();const xE=ch,ab=class extends xE{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=Vc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),jc(a,u,s),new ih(u)}};function h_(){return um(un(),De())}function um(i,s){return 4&i.type?new ab(s,i,wl(i,s)):null}let lh=(()=>{class i{}return i.__NG_ELEMENT_ID__=ub,i})();function ub(){return fr(un(),De())}const f_=lh,ME=class extends f_{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return wl(this._hostTNode,this._hostLView)}get injector(){return new mn(this._hostTNode,this._hostLView)}get parentInjector(){const s=mu(this._hostTNode,this._hostLView);if(Zl(s)){const a=Ns(s,this._hostLView),u=tn(s);return new mn(a[1].data[u+8],a)}return new mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=RE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const l=s.createEmbeddedView(a||{});return this.insert(l,u),l}createComponent(s,a,u,l,f){const y=s&&!function po(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const k=a||{};w=k.index,u=k.injector,l=k.projectableNodes,f=k.ngModuleRef}const I=y?s:new rm(On(s)),A=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(y?A:this.parentInjector).get(gs,null);V&&(f=V)}const S=I.create(A,l,void 0,f);return this.insert(S.hostView,w),S}insert(s,a){const u=s._lView,l=u[1];if(function rc(i){return ni(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=u[3],V=new ME(k,k[6],k[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function yy(i,s,a,u){const l=10+u,f=a.length;u>0&&(a[l-1][4]=s),u<f-10?(s[4]=a[l],Jl(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function vy(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(l,u,y,f);const w=Iy(f,y),I=u[11],A=Qp(I,y[7]);return null!==A&&function qr(i,s,a,u,l,f){u[0]=l,u[6]=s,tf(i,u,a,1,l,f)}(l,y[6],I,u,A,w),s.attachToViewContainerRef(),Jl(Wf(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=RE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=_y(this._lContainer,a);u&&(go(Wf(this._lContainer),a),w0(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=_y(this._lContainer,a);return u&&null!=go(Wf(this._lContainer),a)?new ih(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function RE(i){return i[8]}function Wf(i){return i[8]||(i[8]=[])}function fr(i,s){let a;const u=s[i.index];if(ni(u))a=u;else{let l;if(8&i.type)l=Gt(u);else{const f=s[11];l=f.createComment("");const y=Hn(i,s);_d(f,Qp(f,y),l,function I0(i,s){return Kt(i)?i.nextSibling(s):s.nextSibling}(f,y),!1)}s[i.index]=a=zy(u,s,l,i),Ou(s,a)}return new ME(a,i,s)}class p_{constructor(s){this.queryList=s,this.matches=null}clone(){return new p_(this.queryList)}setDirty(){this.queryList.setDirty()}}class g_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<u;f++){const y=a.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new g_(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==__(s,a).matches&&this.queries[a].setDirty()}}class NE{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Kf{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const l=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,l);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new Kf(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class cm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new cm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(s,a,OE(a,f)),this.matchTNodeWithReadOption(s,a,vu(a,s,f,!1,!1))}else u===ch?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,vu(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===El||l===lh||l===ch&&4&a.type)this.addMatch(a.index,-2);else{const f=vu(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function OE(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function lm(i,s,a,u){return-1===a?function m_(i,s){return 11&i.type?wl(i,s):4&i.type?um(i,s):null}(s,i):-2===a?function Zf(i,s,a){return a===El?wl(s,i):a===ch?um(s,i):a===lh?fr(s,i):void 0}(i,s,u):oi(i,i[1],a,s)}function Yf(i,s,a,u){const l=s[19].queries[u];if(null===l.matches){const f=i.data,y=a.matches,w=[];for(let I=0;I<y.length;I+=2){const A=y[I];w.push(A<0?null:lm(s,f[A],y[I+1],a.metadata.read))}l.matches=w}return l.matches}function Qf(i,s,a,u){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const y=Yf(i,s,l,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)u.push(y[w/2]);else{const A=f[w+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&Qf(V[1],V,A,u)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const K=k[V];Qf(K[1],K,A,u)}}}}}return u}function dm(i){const s=De(),a=Ct(),u=Ea();cc(u+1);const l=__(a,u);if(i.dirty&&Fo(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?Qf(a,s,u,[]):Yf(a,s,l,u);i.reset(f,n_),i.notifyOnChanges()}return!0}return!1}function v_(i,s,a,u){const l=Ct();if(l.firstCreatePass){const f=un();(function LE(i,s,a){null===i.queries&&(i.queries=new Kf),i.queries.track(new cm(s,a))})(l,new NE(s,a,u),f.index),function db(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function FE(i,s,a){const u=new uh(4==(4&a));Q0(i,s,u,u.destroy),null===s[19]&&(s[19]=new g_),s[19].queries.push(new p_(u))}(l,De(),a)}function PE(){return function kE(i,s){return i[19].queries[s].queryList}(De(),Ea())}function __(i,s){return i.queries.getByIndex(s)}function wm(...i){}const Em=new sn("Application Initializer");let ap=(()=>{class i{constructor(a){this.appInits=a,this.resolve=wm,this.reject=wm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Pg(f))a.push(f);else if(xw(f)){const y=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(y)}}Promise.all(a).then(()=>{u()}).catch(l=>{this.reject(l)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ee(Em,8))},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Im=new sn("AppId",{providedIn:"root",factory:function Dm(){return`${S_()}${S_()}${S_()}`}});function S_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bm=new sn("Platform Initializer"),Tm=new sn("Platform ID"),JE=new sn("appBootstrapListener");let XE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac}),i})();const Cm=new sn("LocaleId",{providedIn:"root",factory:()=>St(Cm,at.Optional|at.SkipSelf)||function eI(){return"undefined"!=typeof $localize&&$localize.locale||Bf}()}),tI=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Eb=(()=>{class i{compileModuleSync(a){return new im(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(Pn(a).declarations).reduce((y,w)=>{const I=On(w);return I&&y.push(new rm(I)),y},[]);return new wb(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const M_=(()=>Promise.resolve(0))();function R_(i){"undefined"==typeof Zone?M_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Co{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ti(!1),this.onMicrotaskEmpty=new Ti(!1),this.onStable=new Ti(!1),this.onError=new Ti(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&a,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function N_(){let i=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function rI(i){const s=()=>{!function P_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,k_(i),i.isCheckStableRunning=!0,Am(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),k_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,l,f,y,w)=>{try{return Sm(i),a.invokeTask(l,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),iI(i)}},onInvoke:(a,u,l,f,y,w,I)=>{try{return Sm(i),a.invoke(l,f,y,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),iI(i)}},onHasTask:(a,u,l,f)=>{a.hasTask(l,f),u===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,k_(i),Am(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Co.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Co.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,s,O_,wm,wm);try{return f.runTask(y,a,u)}finally{f.cancelTask(y)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const O_={};function Am(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function k_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Sm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function iI(i){i._nesting--,Am(i)}class F_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ti,this.onMicrotaskEmpty=new Ti,this.onStable=new Ti,this.onError=new Ti}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,l){return s.apply(a,u)}}let sI=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Co.assertNotInAngularZone(),R_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())R_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ee(Co))},i.\u0275prov=jt({token:i,factory:i.\u0275fac}),i})(),xm=(()=>{class i{constructor(){this._applications=new Map,up.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return up.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac}),i})();class Ib{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function L_(i){up=i}let ms,up=new Ib;const oI=new sn("AllowMultipleToken");class V_{constructor(s,a){this.name=s,this.token=a}}function Mm(i,s,a=[]){const u=`Platform: ${s}`,l=new sn(u);return(f=[])=>{let y=uI();if(!y||y.injector.get(oI,!1))if(i)i(a.concat(f).concat({provide:l,useValue:!0}));else{const w=a.concat(f).concat({provide:l,useValue:!0},{provide:$a,useValue:"platform"});!function Qa(i){if(ms&&!ms.destroyed&&!ms.injector.get(oI,!1))throw new Me(400,"");ms=i.get(cI);const s=i.get(bm,null);s&&s.forEach(a=>a())}(zs.create({providers:w,name:u}))}return function bb(i){const s=uI();if(!s)throw new Me(401,"");return s}()}}function uI(){return ms&&!ms.destroyed?ms:null}let cI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const w=function B_(i,s){let a;return a="noop"===i?new F_:("zone.js"===i?void 0:i)||new Co({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:Co,useValue:w}];return w.run(()=>{const A=zs.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(cr,null);if(!k)throw new Me(402,"");return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{cp(this._modules,S),V.unsubscribe()})}),function Tb(i,s,a){try{const u=a();return Pg(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,w,()=>{const V=S.injector.get(ap);return V.runInitializers(),V.donePromise.then(()=>(function VD(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(Bv=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Cm,Bf)||Bf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const l=Rm({},u);return function gh(i,s,a){const u=new im(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const u=a.injector.get(j_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Me(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ee(zs))},i.\u0275prov=jt({token:i,factory:i.\u0275fac}),i})();function Rm(i,s){return Array.isArray(s)?s.reduce(Rm,i):Object.assign(Object.assign({},i),s)}let j_=(()=>{class i{constructor(a,u,l,f,y){this._zone=a,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Co.assertNotInAngularZone(),R_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Co.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,fe.T)(w,I.pipe((0,X.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Me(405,"");let l;l=a instanceof rh?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(l.componentType);const f=function U_(i){return i.isBoundToModule}(l)?void 0:this._injector.get(gs),w=l.create(zs.NULL,[],u||l.selector,f),I=w.location.nativeElement,A=w.injector.get(sI,null),S=A&&w.injector.get(xm);return A&&S&&S.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),cp(this.components,w),S&&S.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;cp(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(JE,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ee(Co),Ee(zs),Ee(cr),Ee(Jg),Ee(ap))},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function cp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let H_=!0,Nm=!1;function dI(){return Nm=!0,H_}function Cb(){if(Nm)throw new Error("Cannot enable prod mode after platform setup.");H_=!1}let G_=(()=>{class i{}return i.__NG_ELEMENT_ID__=q_,i})();function q_(i){return function z_(i,s,a){if(iu(i)&&!a){const u=Gn(i.index,s);return new ih(u,u)}return 47&i.type?new ih(s[16],s):null}(un(),De(),16==(16&i))}class Pm{constructor(){}supports(s){return Lu(s)}create(s){return new Z_(s)}}const mh=(i,s)=>s;class Z_{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||mh}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,l=0,f=null;for(;a||u;){const y=!u||a&&a.currentIndex<Y_(u,l,f)?a:u,w=Y_(y,l,f),I=y.currentIndex;if(y===u)l--,u=u._nextRemoved;else if(a=a._next,null==y.previousIndex)l++;else{f||(f=[]);const A=w-l,S=I-l;if(A!=S){for(let V=0;V<A;V++){const K=V<f.length?f[V]:f[V]=0,ye=K+V;S<=ye&&ye<A&&(f[V]=K+1)}f[y.previousIndex]=S-A}}w!==I&&s(y,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Lu(s))throw new Me(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,y,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),u=!0),a=a._next}else l=0,function uv(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[qc()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,w=>{y=this._trackByFn(l,w),null!==a&&Object.is(a.trackById,y)?(u&&(a=this._verifyReinsertion(a,w,y,l)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,l),u=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new Ob(a,u),f,l),s}_verifyReinsertion(s,a,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new _I),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _I),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Ob{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class _I{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new Pb,this.map.set(a,u)),u.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Y_(i,s,a){const u=i.previousIndex;if(null===u)return u;let l=0;return a&&u<a.length&&(l=a[u]),u+s+l}class wI{constructor(){}supports(s){return s instanceof Map||Ld(s)}create(){return new EI}}class EI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ld(s)))throw new Me(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const u=new kb(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class kb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function II(){return new Q_([new Pm])}let Q_=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||II()),deps:[[i,new Dr,new Gr]]}}find(a){const u=this.factories.find(l=>l.supports(a));if(null!=u)return u;throw new Me(901,"")}}return i.\u0275prov=jt({token:i,providedIn:"root",factory:II}),i})();function J_(){return new fp([new wI])}let fp=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||J_()),deps:[[i,new Dr,new Gr]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new Me(901,"")}}return i.\u0275prov=jt({token:i,providedIn:"root",factory:J_}),i})();const TI=Mm(null,"core",[{provide:Tm,useValue:"unknown"},{provide:cI,deps:[zs]},{provide:xm,deps:[]},{provide:XE,deps:[]}]);let CI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ee(j_))},i.\u0275mod=mr({type:i}),i.\u0275inj=$t({}),i})()},3942:(et,Ce,P)=>{"use strict";P.d(Ce,{Z:()=>Me});var _=P(2090),Y=P(4859),O=P(9681),fe=P(1877);class X{constructor(q,oe){this._delegate=q,this.firebase=oe,(0,O._addComponent)(q,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(q,oe=O._DEFAULT_ENTRY_NAME){var Se;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(q);return!Re.isInitialized()&&"EXPLICIT"===(null===(Se=Re.getComponent())||void 0===Se?void 0:Se.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:oe})}_removeServiceInstance(q,oe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(oe)}_addComponent(q){(0,O._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,O._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ce(){const Fe=function ue(Fe){const q={},oe={__esModule:!0,initializeApp:function ie(Be,ee={}){const W=O.initializeApp(Be,ee);if((0,_.r3)(q,W.name))return q[W.name];const ne=new Fe(W,oe);return q[W.name]=ne,ne},app:Re,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const ee=Be.name,W=ee.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const ne=(me=Re())=>{if("function"!=typeof me[W])throw re.create("invalid-app-argument",{appName:ee});return me[W]()};void 0!==Be.serviceProps&&(0,_.ZB)(ne,Be.serviceProps),oe[W]=ne,Fe.prototype[W]=function(...me){return this._getService.bind(this,ee).apply(this,Be.multipleInstances?me:[])}}return"PUBLIC"===Be.type?oe[W]:null},removeApp:function Se(Be){delete q[Be]},useAsService:function je(Be,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function Re(Be){if(!(0,_.r3)(q,Be=Be||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Be});return q[Be]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function pe(){return Object.keys(q).map(Be=>q[Be])}}),Re.App=Fe,oe}(X);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function q(oe){(0,_.ZB)(Fe,oe)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Fe}(),U=new fe.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=B;!function be(Fe){(0,O.registerVersion)("@firebase/app-compat","0.1.18",Fe)}()},9681:(et,Ce,P)=>{"use strict";P.r(Ce),P.d(Ce,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>gr,_DEFAULT_ENTRY_NAME:()=>In,_addComponent:()=>qt,_addOrOverwriteComponent:()=>rr,_apps:()=>it,_clearComponents:()=>At,_components:()=>Mn,_getProvider:()=>Ai,_registerComponent:()=>jt,_removeServiceInstance:()=>$t,deleteApp:()=>xi,getApp:()=>Is,getApps:()=>ei,initializeApp:()=>Si,onLog:()=>Rn,registerVersion:()=>Pr,setLogLevel:()=>pn});var _=P(5861),Y=P(4859),O=P(1877),fe=P(2090);class X{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(bt=>{if(function he(lt){const Ze=lt.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(bt)){const Xt=bt.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(bt=>bt).join(" ")}}const re="@firebase/app",ce=new O.Yd("@firebase/app"),In="[DEFAULT]",tt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,Mn=new Map;function qt(lt,Ze){try{lt.container.addComponent(Ze)}catch(bt){ce.debug(`Component ${Ze.name} failed to register with FirebaseApp ${lt.name}`,bt)}}function rr(lt,Ze){lt.container.addOrOverwriteComponent(Ze)}function jt(lt){const Ze=lt.name;if(Mn.has(Ze))return ce.debug(`There were multiple attempts to register component ${Ze}.`),!1;Mn.set(Ze,lt);for(const bt of it.values())qt(bt,lt);return!0}function Ai(lt,Ze){return lt.container.getProvider(Ze)}function $t(lt,Ze,bt=In){Ai(lt,Ze).clearInstance(bt)}function At(){Mn.clear()}const Yn=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Es{constructor(Ze,bt,Xt){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},bt),this._name=bt.name,this._automaticDataCollectionEnabled=bt.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}const gr="9.6.7";function Si(lt,Ze={}){"object"!=typeof Ze&&(Ze={name:Ze});const bt=Object.assign({name:In,automaticDataCollectionEnabled:!1},Ze),Xt=bt.name;if("string"!=typeof Xt||!Xt)throw Yn.create("bad-app-name",{appName:String(Xt)});const ir=it.get(Xt);if(ir){if((0,fe.vZ)(lt,ir.options)&&(0,fe.vZ)(bt,ir.config))return ir;throw Yn.create("duplicate-app",{appName:Xt})}const Tt=new Y.H0(Xt);for(const st of Mn.values())Tt.addComponent(st);const Ye=new Es(lt,bt,Tt);return it.set(Xt,Ye),Ye}function Is(lt=In){const Ze=it.get(lt);if(!Ze)throw Yn.create("no-app",{appName:lt});return Ze}function ei(){return Array.from(it.values())}function xi(lt){return at.apply(this,arguments)}function at(){return(at=(0,_.Z)(function*(lt){const Ze=lt.name;it.has(Ze)&&(it.delete(Ze),yield Promise.all(lt.container.getProviders().map(bt=>bt.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function Pr(lt,Ze,bt){var Xt;let ir=null!==(Xt=tt[lt])&&void 0!==Xt?Xt:lt;bt&&(ir+=`-${bt}`);const Tt=ir.match(/\s|\//),Ye=Ze.match(/\s|\//);if(Tt||Ye){const st=[`Unable to register library "${ir}" with version "${Ze}":`];return Tt&&st.push(`library name "${ir}" contains illegal characters (whitespace or "/")`),Tt&&Ye&&st.push("and"),Ye&&st.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void ce.warn(st.join(" "))}jt(new Y.wA(`${ir}-version`,()=>({library:ir,version:Ze}),"VERSION"))}function Rn(lt,Ze){if(null!==lt&&"function"!=typeof lt)throw Yn.create("invalid-log-argument");(0,O.Am)(lt,Ze)}function pn(lt){(0,O.Ub)(lt)}!function Qs(lt){jt(new Y.wA("platform-logger",Ze=>new X(Ze),"PRIVATE")),Pr(re,"0.7.17",lt),Pr(re,"0.7.17","esm2017"),Pr("fire-js","")}("")},4859:(et,Ce,P)=>{"use strict";P.d(Ce,{wA:()=>O,H0:()=>ue});var _=P(5861),Y=P(2090);class O{constructor(B,U,Z){this.name=B,this.instanceFactory=U,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const fe="[DEFAULT]";class X{constructor(B,U){this.name=B,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const U=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(U)){const Z=new Y.BH;if(this.instancesDeferred.set(U,Z),this.isInitialized(U)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:U});Ue&&Z.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(U).promise}getImmediate(B){var U;const Z=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ue=null!==(U=null==B?void 0:B.optional)&&void 0!==U&&U;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(be){if(Ue)return null;throw be}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(ce){return"EAGER"===ce.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(U){}for(const[U,Z]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(U);try{const be=this.getOrInitializeService({instanceIdentifier:Ue});Z.resolve(be)}catch(be){}}}}clearInstance(B=fe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,_.Z)(function*(){const U=Array.from(B.instances.values());yield Promise.all([...U.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...U.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=fe){return this.instances.has(B)}getOptions(B=fe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:U={}}=B,Z=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Z,options:U});for(const[be,Me]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(be)&&Me.resolve(Ue);return Ue}onInit(B,U){var Z;const Ue=this.normalizeInstanceIdentifier(U),be=null!==(Z=this.onInitCallbacks.get(Ue))&&void 0!==Z?Z:new Set;be.add(B),this.onInitCallbacks.set(Ue,be);const Me=this.instances.get(Ue);return Me&&B(Me,Ue),()=>{be.delete(B)}}invokeOnInitCallbacks(B,U){const Z=this.onInitCallbacks.get(U);if(Z)for(const Ue of Z)try{Ue(B,U)}catch(be){}}getOrInitializeService({instanceIdentifier:B,options:U={}}){let Z=this.instances.get(B);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=B,ce===fe?void 0:ce),options:U}),this.instances.set(B,Z),this.instancesOptions.set(B,U),this.invokeOnInitCallbacks(Z,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Z)}catch(Ue){}var ce;return Z||null}normalizeInstanceIdentifier(B=fe){return this.component?this.component.multipleInstances?B:fe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const U=this.getProvider(B.name);if(U.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);U.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const U=new X(B,this);return this.providers.set(B,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(et,Ce,P)=>{"use strict";P.d(Ce,{in:()=>Y,Yd:()=>re,Ub:()=>ue,Am:()=>ce});const _=[];var Y=(()=>{return(B=Y||(Y={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Y;var B})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},fe=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},he=(B,U,...Z)=>{if(U<B.logLevel)return;const Ue=(new Date).toISOString(),be=X[U];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[be](`[${Ue}]  ${B.name}:`,...Z)};class re{constructor(U){this.name=U,this._logLevel=fe,this._logHandler=he,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Y))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?O[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...U),this._logHandler(this,Y.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...U),this._logHandler(this,Y.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...U),this._logHandler(this,Y.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...U),this._logHandler(this,Y.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...U),this._logHandler(this,Y.ERROR,...U)}}function ue(B){_.forEach(U=>{U.setLogLevel(B)})}function ce(B,U){for(const Z of _){let Ue=null;U&&U.level&&(Ue=O[U.level]),Z.userLogHandler=null===B?null:(be,Me,...Fe)=>{const q=Fe.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(Se){return null}}).filter(oe=>oe).join(" ");Me>=(null!=Ue?Ue:be.logLevel)&&B({level:Y[Me].toLowerCase(),message:q,args:Fe,type:be.name})}}}},5861:(et,Ce,P)=>{"use strict";function _(O,fe,X,he,re,ue,ce){try{var B=O[ue](ce),U=B.value}catch(Z){return void X(Z)}B.done?fe(U):Promise.resolve(U).then(he,re)}function Y(O){return function(){var fe=this,X=arguments;return new Promise(function(he,re){var ue=O.apply(fe,X);function ce(U){_(ue,he,re,ce,B,"next",U)}function B(U){_(ue,he,re,ce,B,"throw",U)}ce(void 0)})}}P.d(Ce,{Z:()=>Y})}},et=>{et(et.s=7003)}]);